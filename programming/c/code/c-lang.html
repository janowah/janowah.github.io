<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The C Programming Language</title>
<meta name="generator" content="Org mode" />
</head>
<body>
<div id="content">
<h1 class="title">The C Programming Language</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc4535d8">Chapter 1 - A Tutorial Introduction</a>
<ul>
<li><a href="#org3ce44c6">hello.c</a></li>
<li><a href="#orgc9ecc59">The first C program hello world</a></li>
<li><a href="#org7a29cac">hello world</a></li>
<li><a href="#org542ecb4">fahrenheit-celsius</a></li>
<li><a href="#org41810c3">fahrenheit-celsius floating point</a></li>
<li><a href="#org5de1d6e">fahrenheit-celsius table (in one go?)</a></li>
<li><a href="#orgec0fb62">fahrenheit-celsius constants</a></li>
<li><a href="#orge0b6798">file copy</a></li>
<li><a href="#orgb005b52">file copy 2</a></li>
<li><a href="#orgd6c4fbd">count chars 1</a></li>
<li><a href="#org1b2ee4e">count chars 2</a></li>
<li><a href="#org6172295">count lines</a></li>
<li><a href="#org88b0308">word counting</a></li>
<li><a href="#orgbe057b6">arrays</a></li>
<li><a href="#orgca1594a">functions</a></li>
<li><a href="#org6fc6412">character arrays</a></li>
<li><a href="#org115ccce">external variables and scope</a></li>
</ul>
</li>
<li><a href="#org8f9db52">Chapter 2 - Types, Operators and Expressions</a>
<ul>
<li><a href="#org7a7cf9c">strlen function</a></li>
<li><a href="#org31e281e">atoi function</a></li>
<li><a href="#org4097941">lower function</a></li>
<li><a href="#org27f5eca">rand function</a></li>
<li><a href="#org0cae442">squeeze function</a></li>
<li><a href="#org61ee2c7">strcat function</a></li>
<li><a href="#org37808de">getbits function</a></li>
<li><a href="#orgd03a6b6">bitcount function</a></li>
</ul>
</li>
<li><a href="#orgb0ece66">Chapter 3 - Control Flow</a>
<ul>
<li><a href="#org457915c">binsearch function</a></li>
<li><a href="#org0fd7352">switchex</a></li>
<li><a href="#org69796c3">atoi function</a></li>
<li><a href="#org38a99a0">shellsort function</a></li>
<li><a href="#org9d14a00">reverse function</a></li>
<li><a href="#orga859290">itoa function</a></li>
<li><a href="#org0559c8a">trim function</a></li>
</ul>
</li>
<li><a href="#org0c14b43">Chapter 4 - Functions and Program Structure</a>
<ul>
<li><a href="#org62f0cda">41 ; not sure what this does</a></li>
<li><a href="#orgac41dbe">atof function</a></li>
<li><a href="#orgaed8f34">calculator</a></li>
<li><a href="#org0251840">atoi function rewrite</a></li>
<li><a href="#org48fc4d5"><span class="todo TODO">TODO</span> reverse polish calculator</a></li>
<li><a href="#org014071a">push and pop functions</a></li>
<li><a href="#orgb257232"><span class="todo TODO">TODO</span> complete cal</a></li>
<li><a href="#org17b197c">getop function</a></li>
<li><a href="#orgeb641ba">getch and ungetch funcions</a></li>
<li><a href="#org56a0724">recursion example. printd function</a></li>
<li><a href="#orgcdf8c0b">qsort function</a></li>
</ul>
</li>
<li><a href="#orga45e5e0">Chapter 5 - Pointers and Arrays</a>
<ul>
<li><a href="#org33ff8bf">swap (with pointers)</a></li>
<li><a href="#orgc8835e3">getint</a></li>
<li><a href="#orgc87b2b3">strlen</a></li>
<li><a href="#orge334a61">alloc and afree</a></li>
<li><a href="#org9a6f93e">strlen</a></li>
<li><a href="#orgd481e25">strcpy (using arrays)</a></li>
<li><a href="#orgebc2feb">strcpy (using pointers)</a></li>
<li><a href="#orgd0a98b9">strcpy (experienced programmers)</a></li>
<li><a href="#org504002b">STRCPY (v3)</a></li>
<li><a href="#org599f775">strcmp (no pointers)</a></li>
<li><a href="#org07163ad">STRCMP (with pointers)</a></li>
<li><a href="#org5bcd53a"><span class="todo TODO">TODO</span> program:  + readlines and writelines</a></li>
<li><a href="#org3de280f">WRITELINES</a></li>
<li><a href="#orge661ff3">QSORT</a></li>
<li><a href="#org94ac882">swap</a></li>
<li><a href="#org06e4a28">multi-dimensional arrays daytab, day_of_year, month_day</a></li>
<li><a href="#org9db114f">month_name</a></li>
<li><a href="#org2d96c4a"><span class="done DONE">DONE</span> program: krecho v1</a></li>
<li><a href="#org5902351"><span class="done DONE">DONE</span> program: krecho v2</a></li>
<li><a href="#orgf937914">main</a></li>
<li><a href="#org5514534">program:</a></li>
<li><a href="#orgc8e0c88">program:</a></li>
<li><a href="#org50e1f35">qsort</a></li>
<li><a href="#org5b36b44">NUMCMP</a></li>
<li><a href="#orga8d1151">swap</a></li>
<li><a href="#org62b0335">recursive decent parser dcl, dirdcl,</a></li>
<li><a href="#orgafd59ca">program:</a></li>
<li><a href="#orgc58b331">GETTOKEN</a></li>
<li><a href="#orgceaa4c6">undcl</a></li>
</ul>
</li>
<li><a href="#orgf789d0b">Chapter 6 - Structures</a>
<ul>
<li><a href="#org07b06cc">makepoint</a></li>
<li><a href="#org843bca2"></a></li>
<li><a href="#orgeb2f731">addpoint</a></li>
<li><a href="#org69a974e">ptinrect</a></li>
<li><a href="#org3621917">canonrect</a></li>
<li><a href="#org61460a6">binsearch</a></li>
<li><a href="#org315f70a">GETWORD</a></li>
<li><a href="#orgdb89b3c">program: pointers to structures</a></li>
<li><a href="#org432b10c">tnode</a></li>
<li><a href="#org21db71e">program:</a></li>
<li><a href="#org313f881">treenode</a></li>
<li><a href="#org975d208">treeprint</a></li>
<li><a href="#orgab72043">tnode strdup</a></li>
<li><a href="#orgd6b171d">nlist</a></li>
<li><a href="#org1252167">hash</a></li>
<li><a href="#org929504f">nlist</a></li>
<li><a href="#org80e9034">nlist</a></li>
<li><a href="#orge082c19"></a></li>
<li><a href="#orgbd7b54b"></a></li>
</ul>
</li>
<li><a href="#org4a1e05d">Chapter 7 - Input and Output</a>
<ul>
<li><a href="#org8ac20e8">Program Lower</a></li>
<li><a href="#org23e4231">ex printf myprint.c</a></li>
<li><a href="#org0c64832">minprintf</a></li>
<li><a href="#org9834e4b">program: calculator</a></li>
<li><a href="#org7ec1f1f">program: krcatv1</a></li>
<li><a href="#org6ae577f">program: cat revised (error handling)</a></li>
<li><a href="#org2b3753f">fputs and fgets</a></li>
<li><a href="#orga1403d9">getline using fgets</a></li>
</ul>
</li>
<li><a href="#org3ca782f">Chapter 8 - The UNIX System Interface</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc4535d8" class="outline-2">
<h2 id="orgc4535d8">Chapter 1 - A Tutorial Introduction</h2>
<div class="outline-text-2" id="text-orgc4535d8">
</div>
<div id="outline-container-org3ce44c6" class="outline-3">
<h3 id="org3ce44c6">hello.c</h3>
<div class="outline-text-3" id="text-org3ce44c6">
<ul class="org-ul">
<li><code>$ gcc hello.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, world\n"</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9ecc59" class="outline-3">
<h3 id="orgc9ecc59">The first C program hello world</h3>
<div class="outline-text-3" id="text-orgc9ecc59">
<ul class="org-ul">
<li><code>$ gcc hello2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, world\n"</span>);
}
</pre>
</div>

<ul class="org-ul">
<li>include information about standard library</li>
<li>define a function called <code>main</code> that received no argument values</li>
<li>statements of <code>main</code> are enclosed in braces</li>
<li>main calls library function <code>printf</code> to print this sequence of
characters <code>\n</code> represents the newline character</li>
</ul>
</div>
</div>

<div id="outline-container-org7a29cac" class="outline-3">
<h3 id="org7a29cac">hello world</h3>
<div class="outline-text-3" id="text-org7a29cac">
<ul class="org-ul">
<li><code>$ gcc hello3.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, "</span>);
    printf(<span style="color: #848ea9;">"world"</span>);
    printf(<span style="color: #848ea9;">"\n"</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org542ecb4" class="outline-3">
<h3 id="org542ecb4">fahrenheit-celsius</h3>
<div class="outline-text-3" id="text-org542ecb4">
<ul class="org-ul">
<li><code>$ gcc fc1.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table for fahr = 0, 20, ..., 300 </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>, <span style="color: #e69f00; font-weight: bold;">celsius</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lower</span>, <span style="color: #e69f00; font-weight: bold;">upper</span>, <span style="color: #e69f00; font-weight: bold;">step</span>;

    lower = 0;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of temperature scale </span><span style="color: #009e73; font-style: italic;">*/</span>
    upper = 300;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
    step = 20;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

    fahr = lower;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (fahr &lt;= upper) {
        celsius = 5 * (fahr - 32) / 9;
        printf(<span style="color: #848ea9;">"%d\t%d\n"</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org41810c3" class="outline-3">
<h3 id="org41810c3">fahrenheit-celsius floating point</h3>
<div class="outline-text-3" id="text-org41810c3">
<ul class="org-ul">
<li><code>$ gcc fc2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table for fahr = 0, 20, ..., 300;</span>
<span style="color: #009e73; font-style: italic;">   floating-point version </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>, <span style="color: #e69f00; font-weight: bold;">celsius</span>;
    <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">lower</span>, <span style="color: #e69f00; font-weight: bold;">upper</span>, <span style="color: #e69f00; font-weight: bold;">step</span>;

    lower = 0;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of temperature scale </span><span style="color: #009e73; font-style: italic;">*/</span>
    upper = 300;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
    step = 20;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

    fahr = lower;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (fahr &lt;= upper) {
        celsius = (5.0 / 9.0) * (fahr - 32.0);
        printf(<span style="color: #848ea9;">"%3.0f %6.1f\n"</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5de1d6e" class="outline-3">
<h3 id="org5de1d6e">fahrenheit-celsius table (in one go?)</h3>
<div class="outline-text-3" id="text-org5de1d6e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (fahr = 0; fahr &lt;= 300; fahr = fahr + 20)
        printf(<span style="color: #848ea9;">"%3d %6.1f\n"</span>, fahr, (5.0 / 9.0) * (fahr - 32));
}

</pre>
</div>
</div>
</div>

<div id="outline-container-orgec0fb62" class="outline-3">
<h3 id="orgec0fb62">fahrenheit-celsius constants</h3>
<div class="outline-text-3" id="text-orgec0fb62">
<ul class="org-ul">
<li><code>$ gcc fc4.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">LOWER</span>  0                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">UPPER</span>  300              <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">STEP</span>   20               <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (fahr = LOWER; fahr &lt;= UPPER; fahr = fahr + STEP)
        printf(<span style="color: #848ea9;">"%3d %6.1f\n"</span>, fahr, (5.0 / 9.0) * (fahr - 32));
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0b6798" class="outline-3">
<h3 id="orge0b6798">file copy</h3>
<div class="outline-text-3" id="text-orge0b6798">
<ul class="org-ul">
<li><code>$ gcc filecopy1.c</code></li>
<li><code>./a.out</code></li>
<li>enter characters</li>
<li>C-d to terminate</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy input to output; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    c = getchar();
    <span style="color: #56b4e9; font-weight: bold;">while</span> (c != EOF) {
        putchar(c);
        c = getchar();
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb005b52" class="outline-3">
<h3 id="orgb005b52">file copy 2</h3>
<div class="outline-text-3" id="text-orgb005b52">
<ul class="org-ul">
<li><code>$ gcc filecopy2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy input to output; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        putchar(c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6c4fbd" class="outline-3">
<h3 id="orgd6c4fbd">count chars 1</h3>
<div class="outline-text-3" id="text-orgd6c4fbd">
<ul class="org-ul">
<li><code>$ gcc countchars1.c</code></li>
<li><code>./a.out</code></li>
<li>RET C-d to get number of characters. but get extra</li>
<li>includes newlines in count?</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count characters in input; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">nc</span>;

    nc = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getchar() != EOF)
        ++nc;
    printf(<span style="color: #848ea9;">"%ld\n"</span>, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b2ee4e" class="outline-3">
<h3 id="org1b2ee4e">count chars 2</h3>
<div class="outline-text-3" id="text-org1b2ee4e">
<ul class="org-ul">
<li><code>$ gcc countchars2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count characters in input; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">nc</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (nc = 0; getchar() != EOF; ++nc);
    printf(<span style="color: #848ea9;">"%.0f\n"</span>, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6172295" class="outline-3">
<h3 id="org6172295">count lines</h3>
<div class="outline-text-3" id="text-org6172295">
<ul class="org-ul">
<li><code>$ gcc countlines.c</code></li>
<li><code>./a.out</code></li>
<li>C-d to get result</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count lines in input </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">nl</span>;

    nl = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
            ++nl;
    printf(<span style="color: #848ea9;">"%d\n"</span>, nl);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org88b0308" class="outline-3">
<h3 id="org88b0308">word counting</h3>
<div class="outline-text-3" id="text-org88b0308">
<ul class="org-ul">
<li><code>$ gcc wordcount.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">IN</span>   1                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">inside a word </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">OUT</span>  0                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">outside a word </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count lines, words, and characters in input </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">nl</span>, <span style="color: #e69f00; font-weight: bold;">nw</span>, <span style="color: #e69f00; font-weight: bold;">nc</span>, <span style="color: #e69f00; font-weight: bold;">state</span>;

    state = OUT;
    nl = nw = nc = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF) {
        ++nc;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
            ++nl;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\n'</span> || c == <span style="color: #848ea9;">'\t'</span>)
            state = OUT;
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (state == OUT) {
            state = IN;
            ++nw;
        }
    }
    printf(<span style="color: #848ea9;">"%d %d %d\n"</span>, nl, nw, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe057b6" class="outline-3">
<h3 id="orgbe057b6">arrays</h3>
<div class="outline-text-3" id="text-orgbe057b6">
<ul class="org-ul">
<li><code>$ gcc arrays.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count digits, white space, others </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">nwhite</span>, <span style="color: #e69f00; font-weight: bold;">nother</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ndigit</span>[10];

    nwhite = nother = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        ndigit[i] = 0;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c &gt;= <span style="color: #848ea9;">'0'</span> &amp;&amp; c &lt;= <span style="color: #848ea9;">'9'</span>)
            ++ndigit[c - <span style="color: #848ea9;">'0'</span>];
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\n'</span> || c == <span style="color: #848ea9;">'\t'</span>)
            ++nwhite;
        <span style="color: #56b4e9; font-weight: bold;">else</span>
            ++nother;

    printf(<span style="color: #848ea9;">"digits ="</span>);
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        printf(<span style="color: #848ea9;">" %d"</span>, ndigit[i]);
    printf(<span style="color: #848ea9;">", white space = %d, other = %d\n"</span>, nwhite, nother);
}
</pre>
</div>

<pre class="example">
$ ./a.out
1       2       12 3
digits = 0 2 2 1 0 0 0 0 0 0, white space = 4, other = 0
</pre>
</div>
</div>

<div id="outline-container-orgca1594a" class="outline-3">
<h3 id="orgca1594a">functions</h3>
<div class="outline-text-3" id="text-orgca1594a">
<ul class="org-ul">
<li><code>$ gcc functions.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">power</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">m</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">test power function </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        printf(<span style="color: #848ea9;">"%d %d %d\n"</span>, i, power(2, i), power(-3, i));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">power: raise base to n-th power; n &gt;= 0 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">power</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">base</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">p</span>;

    p = 1;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt;= n; ++i)
        p = p * base;
    <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>

<pre class="example">
$ ./a.out
0 1 1
1 2 -3
2 4 9
3 8 -27
4 16 81
5 32 -243
6 64 729
7 128 -2187
8 256 6561
9 512 -19683
</pre>
</div>
</div>

<div id="outline-container-org6fc6412" class="outline-3">
<h3 id="org6fc6412">character arrays</h3>
<div class="outline-text-3" id="text-org6fc6412">
<ul class="org-ul">
<li><code>$ gcc characterarrays.c</code></li>
<li><code>./a.out</code></li>
<li>; need to change the name of the getline function. conflict</li>
<li>this just prints the longest line entered</li>
<li>changed the variables in the function prototype but this wasn't necessary</li>
</ul>

<div class="org-src-container">
<pre class="src src-c">
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line length </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s1</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim1</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">to</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">from</span>[]);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print the longest input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>;                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current line length </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum length seen so far </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];         <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current input line </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[MAXLINE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">longest line saved here </span><span style="color: #009e73; font-style: italic;">*/</span>

    max = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = xgetline(line, MAXLINE)) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (len &gt; max) {
            max = len;
            copy(longest, line);
        }
    <span style="color: #56b4e9; font-weight: bold;">if</span> (max &gt; 0)                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">there was a line </span><span style="color: #009e73; font-style: italic;">*/</span>
        printf(<span style="color: #848ea9;">"%s"</span>, longest);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: read a line into s, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; lim - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>; ++i)
        s[i] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>) {
        s[i] = c;
        ++i;
    }
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy: copy 'from' into 'to'; assume to is big enough </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">to</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">from</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((to[i] = from[i]) != <span style="color: #848ea9;">'\0'</span>)
        ++i;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org115ccce" class="outline-3">
<h3 id="org115ccce">external variables and scope</h3>
<div class="outline-text-3" id="text-org115ccce">
<ul class="org-ul">
<li>$ gcc scope.c</li>
<li>./a.out</li>
<li>had to rename the getline() function</li>
<li>change getchar to getchar()</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line size </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;                        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum length seen so far </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[MAXLINE];          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">longest line saved here </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print longest input line; specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[];

    max = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = xgetline()) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (len &gt; max) {
            max = len;
            copy();
        }
    <span style="color: #56b4e9; font-weight: bold;">if</span> (max &gt; 0)                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">there was a line </span><span style="color: #009e73; font-style: italic;">*/</span>
        printf(<span style="color: #848ea9;">"%s"</span>, longest);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[];

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; MAXLINE - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>; ++i)
        line[i] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>) {
        line[i] = c;
        ++i;
    }
    line[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy: specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #e69f00; font-weight: bold;">longest</span>[];

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((longest[i] = line[i]) != <span style="color: #848ea9;">'\0'</span>)
        ++i;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8f9db52" class="outline-2">
<h2 id="org8f9db52">Chapter 2 - Types, Operators and Expressions</h2>
<div class="outline-text-2" id="text-org8f9db52">
<p>
will need to write my own main() to test these
</p>
</div>

<div id="outline-container-org7a7cf9c" class="outline-3">
<h3 id="org7a7cf9c">strlen function</h3>
<div class="outline-text-3" id="text-org7a7cf9c">
<ul class="org-ul">
<li>change strlen to xstrlen. conflict</li>
<li>gcc strlen.c</li>
<li>custom main</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xstrlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (s[i] != <span style="color: #848ea9;">'\0'</span>)
        ++i;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span> = xstrlen(<span style="color: #848ea9;">"house"</span>);

    printf(<span style="color: #848ea9;">"%d\n"</span>, xx);

}
</pre>
</div>
</div>
</div>

<div id="outline-container-org31e281e" class="outline-3">
<h3 id="org31e281e">atoi function</h3>
<div class="outline-text-3" id="text-org31e281e">
<ul class="org-ul">
<li>ascii to integer</li>
<li>not sure what is happening</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert s to integer </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">n</span>;

    n = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] &gt;= <span style="color: #848ea9;">'0'</span> &amp;&amp; s[i] &lt;= <span style="color: #848ea9;">'9'</span>; ++i)
        n = 10 * n + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>;

    xx = atoi(<span style="color: #848ea9;">"88"</span>);
    printf(<span style="color: #848ea9;">"%d\n"</span>, xx);

}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4097941" class="outline-3">
<h3 id="org4097941">lower function</h3>
<div class="outline-text-3" id="text-org4097941">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower: convert c to lower case; ASCII only </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">lower</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>)
{
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c &gt;= <span style="color: #848ea9;">'A'</span> &amp;&amp; c &lt;= <span style="color: #848ea9;">'Z'</span>)
        <span style="color: #56b4e9; font-weight: bold;">return</span> c + <span style="color: #848ea9;">'a'</span> - <span style="color: #848ea9;">'A'</span>;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
        <span style="color: #56b4e9; font-weight: bold;">return</span> c;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">yy</span> = <span style="color: #848ea9;">'Z'</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>;

    xx = lower(yy);
    printf(<span style="color: #848ea9;">"%d"</span>, xx);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org27f5eca" class="outline-3">
<h3 id="org27f5eca">rand function</h3>
<div class="outline-text-3" id="text-org27f5eca">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">next</span> = 1;
<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rand: return pseudo-random integer on 0..32767 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">rand</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    next = next * 1103515245 + 12345;
    <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">int</span>) (next / 65536) % 32768;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">srand: set seed for rand() </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">srand</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">seed</span>)
{
    next = seed;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++) {
        srand(i);

        xx = rand();
        printf(<span style="color: #848ea9;">"%d\n"</span>, xx);
    }

}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cae442" class="outline-3">
<h3 id="org0cae442">squeeze function</h3>
<div class="outline-text-3" id="text-org0cae442">
<ul class="org-ul">
<li>ascii automatically converted to integers?</li>
<li>this works but i don't understand how</li>
</ul>

<div class="org-src-container">
<pre class="src src-c">
<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">squeeze: delete all c from s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">squeeze</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = j = 0; s[i] != <span style="color: #848ea9;">'\0'</span>; i++)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] != c)
            s[j++] = s[i];
    s[j] = <span style="color: #848ea9;">'\0'</span>;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[] = <span style="color: #848ea9;">"house"</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span> = <span style="color: #848ea9;">'o'</span>;                <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">o is 111</span>
    squeeze(s, c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org61ee2c7" class="outline-3">
<h3 id="org61ee2c7">strcat function</h3>
<div class="outline-text-3" id="text-org61ee2c7">
<ul class="org-ul">
<li>this only copies the first character of c</li>
<li>had to rename strcat to xstrcat</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcat: concatenate t to end of s; s must be big enough </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">xstrcat</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">t</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    i = j = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (s[i] != <span style="color: #848ea9;">'\0'</span>)        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find end of s </span><span style="color: #009e73; font-style: italic;">*/</span>
        i++;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[i++] = t[j++]) != <span style="color: #848ea9;">'\0'</span>)   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy t </span><span style="color: #009e73; font-style: italic;">*/</span>
        ;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">n</span>[] = <span style="color: #848ea9;">"new"</span>;
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">c</span>[] = <span style="color: #848ea9;">"car"</span>;
    xstrcat(n, c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org37808de" class="outline-3">
<h3 id="org37808de">getbits function</h3>
<div class="outline-text-3" id="text-org37808de">
<ul class="org-ul">
<li>doesn't work like it should</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getbits: get n bits from position p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #d55e00;">getbits</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #56b4e9; font-weight: bold;">return</span> (x &gt;&gt; (p + 1 - n)) &amp; ~(~0 &lt;&lt; n);
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">ff</span>;
    <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 4;

    ff = getbits(x, 8, 4);
    printf(<span style="color: #848ea9;">"%d"</span>, ff);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd03a6b6" class="outline-3">
<h3 id="orgd03a6b6">bitcount function</h3>
<div class="outline-text-3" id="text-orgd03a6b6">
<ul class="org-ul">
<li>haven't looked at this</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">bitcount: count 1 bits in x </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">bitcount</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">b</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (b = 0; x != 0; x &gt;&gt;= 1)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (x &amp; 01)
            b++;
    <span style="color: #56b4e9; font-weight: bold;">return</span> b;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb0ece66" class="outline-2">
<h2 id="orgb0ece66">Chapter 3 - Control Flow</h2>
<div class="outline-text-2" id="text-orgb0ece66">
</div>
<div id="outline-container-org457915c" class="outline-3">
<h3 id="org457915c">binsearch function</h3>
<div class="outline-text-3" id="text-org457915c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find x in v[0] &lt;= v[1] &lt;= ... &lt;= v[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">low</span>, <span style="color: #e69f00; font-weight: bold;">high</span>, <span style="color: #e69f00; font-weight: bold;">mid</span>;

    low = 0;
    high = n - 1;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt;= high) {
        mid = (low + high) / 2;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (x &lt; v[mid])
            high = mid + 1;
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (x &gt; v[mid])
            low = mid + 1;
        <span style="color: #56b4e9; font-weight: bold;">else</span>                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">found match </span><span style="color: #009e73; font-style: italic;">*/</span>
            <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no match </span><span style="color: #009e73; font-style: italic;">*/</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fd7352" class="outline-3">
<h3 id="org0fd7352">switchex</h3>
<div class="outline-text-3" id="text-org0fd7352">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count digits, white space, others </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">nwhite</span>, <span style="color: #e69f00; font-weight: bold;">nother</span>, <span style="color: #e69f00; font-weight: bold;">ndigit</span>[10];

    nwhite = nother = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++)
        ndigit[i] = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF) {
        <span style="color: #56b4e9; font-weight: bold;">switch</span> (c) {
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'0'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'1'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'2'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'3'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'4'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'5'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'6'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'7'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'8'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'9'</span>:
            ndigit[c - <span style="color: #848ea9;">'0'</span>]++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">' '</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\t'</span>:
            nwhite++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">default</span>:
            nother++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        }
    }
    printf(<span style="color: #848ea9;">"digits ="</span>);
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++)
        printf(<span style="color: #848ea9;">" %d"</span>, ndigit[i]);
    printf(<span style="color: #848ea9;">", white space = %d, other = %d\n"</span>, nwhite, nother);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<pre class="example">
$ ./a.out
123 45
digits = 0 1 1 1 1 1 0 0 0 0, white space = 2, other = 0
</pre>
</div>
</div>

<div id="outline-container-org69796c3" class="outline-3">
<h3 id="org69796c3">atoi function</h3>
<div class="outline-text-3" id="text-org69796c3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert s to integer; version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; isspace(s[i]); i++);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    sign = (s[i] == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'+'</span> || s[i] == <span style="color: #848ea9;">'-'</span>)     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip sign </span><span style="color: #009e73; font-style: italic;">*/</span>
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; isdigit(s[i]); i++)
        n = 10 * n + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> sign * n;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org38a99a0" class="outline-3">
<h3 id="org38a99a0">shellsort function</h3>
<div class="outline-text-3" id="text-org38a99a0">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">shellsort: sort v[0]...v[n-1] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">shellsort</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gap</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>, <span style="color: #e69f00; font-weight: bold;">temp</span>;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (gap = n / 2; gap &gt; 0; gap /= 2)
        <span style="color: #56b4e9; font-weight: bold;">for</span> (i = gap; i &lt; n; i++)
            <span style="color: #56b4e9; font-weight: bold;">for</span> (j = i - gap; j &gt;= 0 &amp;&amp; v[j] &gt; v[j + gap]; j -= gap) {
                temp = v[j];
                v[j] = v[j + gap];
                v[j + gap] = temp;
            }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d14a00" class="outline-3">
<h3 id="org9d14a00">reverse function</h3>
<div class="outline-text-3" id="text-org9d14a00">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse: reverse string s in place </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">reverse</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0, j = strlen(s) - 1; i &lt; j; i++, j--) {
        c = s[i];
        s[i] = s[j];
        s[j] = c;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga859290" class="outline-3">
<h3 id="orga859290">itoa function</h3>
<div class="outline-text-3" id="text-orga859290">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">itoa: convert n to characters in s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">itoa</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">if</span> ((sign = n) &lt; 0)         <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">record sign </span><span style="color: #009e73; font-style: italic;">*/</span>
        n = -n;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make n positive </span><span style="color: #009e73; font-style: italic;">*/</span>
    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">do</span> {                        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">generate digits in reverse order </span><span style="color: #009e73; font-style: italic;">*/</span>
        s[i++] = n % 10 + <span style="color: #848ea9;">'0'</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get next digit </span><span style="color: #009e73; font-style: italic;">*/</span>
    } <span style="color: #56b4e9; font-weight: bold;">while</span> ((n /= 10) &gt; 0);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">delete it </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">if</span> (sign &lt; 0)
        s[i++] = <span style="color: #848ea9;">'-'</span>;
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    reverse(s);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0559c8a" class="outline-3">
<h3 id="org0559c8a">trim function</h3>
<div class="outline-text-3" id="text-org0559c8a">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">trim: remove trailing blanks, tabs, newlines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">trim</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (n = strlen(s) - 1; n &gt;= 0; n--)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (s[n] != <span style="color: #848ea9;">' '</span> &amp;&amp; s[n] != <span style="color: #848ea9;">'\t'</span> &amp;&amp; s[n] != <span style="color: #848ea9;">'\n'</span>)
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
    s[n + 1] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org0c14b43" class="outline-2">
<h2 id="org0c14b43">Chapter 4 - Functions and Program Structure</h2>
<div class="outline-text-2" id="text-org0c14b43">
</div>
<div id="outline-container-org62f0cda" class="outline-3">
<h3 id="org62f0cda">41 ; not sure what this does</h3>
<div class="outline-text-3" id="text-org62f0cda">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line length </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strindex</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">source</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">searchfor</span>[]);

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">pattern</span>[] = <span style="color: #848ea9;">"ould"</span>;        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pattern to search for </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find all lines matching pattern </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

    <span style="color: #56b4e9; font-weight: bold;">while</span> (xgetline(line, MAXLINE) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (strindex(line, pattern) &gt;= 0) {
            printf(<span style="color: #848ea9;">"%s"</span>, line);
            found++;
        }
    <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: get line into s, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (--lim &gt; 0 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>)
        s[i++] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
        s[i++] = c;
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strindex: return index of t in s, -1 if none </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strindex</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">t</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>, <span style="color: #e69f00; font-weight: bold;">k</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] != <span style="color: #848ea9;">'\0'</span>; i++) {
        <span style="color: #56b4e9; font-weight: bold;">for</span> (j = i, k = 0; t[k] != <span style="color: #848ea9;">'\0'</span> &amp;&amp; s[j] == t[k]; j++, k++);
        <span style="color: #56b4e9; font-weight: bold;">if</span> (k &gt; 0 &amp;&amp; t[k] == <span style="color: #848ea9;">'\0'</span>)
            <span style="color: #56b4e9; font-weight: bold;">return</span> i;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac41dbe" class="outline-3">
<h3 id="orgac41dbe">atof function</h3>
<div class="outline-text-3" id="text-orgac41dbe">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atof: convert string s to double </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>, <span style="color: #e69f00; font-weight: bold;">power</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; isspace(s[i]); i++);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    sign = (s[i] == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'+'</span> || s[i] == <span style="color: #848ea9;">'-'</span>)
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (val = 0.0; isdigit(s[i]); i++)
        val = 10.0 * val + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'.'</span>)
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (power = 1.0; isdigit(s[i]); i++) {
        val = 10.0 * val + (s[i] - <span style="color: #848ea9;">'0'</span>);
        power *= 10;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> sign * val / power;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaed8f34" class="outline-3">
<h3 id="orgaed8f34">calculator</h3>
<div class="outline-text-3" id="text-orgaed8f34">
<p>
need to include and change getline
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 100

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rudimentary calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">sum</span>, <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span>[]);
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

    sum = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0)
        printf(<span style="color: #848ea9;">"\t%g\n"</span>, sum += atof(line));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0251840" class="outline-3">
<h3 id="org0251840">atoi function rewrite</h3>
<div class="outline-text-3" id="text-org0251840">
<p>
Given atof, properly declared, we could write atoi (convert a string
to int) in terms of it:
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert string s to integer using atof </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[]);
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">int</span>) atof(s);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org48fc4d5" class="outline-3">
<h3 id="org48fc4d5"><span class="todo TODO">TODO</span> reverse polish calculator</h3>
<div class="outline-text-3" id="text-org48fc4d5">
<p>
push and pop?
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">for atof() </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXOP</span> 100       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max size of operand or operator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NUMBER</span> <span style="color: #848ea9;">'0'</span>      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">signal that a number was found </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> []);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span>);
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse Polish calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">op2</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[MAXOP];

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = getop(s)) != EOF) {
    <span style="color: #56b4e9; font-weight: bold;">switch</span> (type) {
    <span style="color: #56b4e9; font-weight: bold;">case</span> NUMBER:
      push(atof(s));
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'+'</span>:
      push(pop() + pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'*'</span>:
      push(pop() * pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'-'</span>:
      op2 = pop();
      push(pop() - op2);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'/'</span>:
      op2 = pop();
      <span style="color: #56b4e9; font-weight: bold;">if</span> (op2 != 0.0)
        push(pop() / op2);
      <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"error: zero divisor\n"</span>);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
      printf(<span style="color: #848ea9;">"\t%.8g\n"</span>, pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">default</span>:
      printf(<span style="color: #848ea9;">"error: unknown command %s\n"</span>, s);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org014071a" class="outline-3">
<h3 id="org014071a">push and pop functions</h3>
<div class="outline-text-3" id="text-org014071a">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXVAL</span> 100 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum depth of val stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">sp</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free stack position </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>[MAXVAL]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">value stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push: push f onto value stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">f</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &lt; MAXVAL)
    val[sp++] = f;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: stack full, can't push %g\n"</span>, f);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pop: pop and return top value from stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">return</span> val[--sp];
  <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: stack empty\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0.0;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb257232" class="outline-3">
<h3 id="orgb257232"><span class="todo TODO">TODO</span> complete cal</h3>
<div class="outline-text-3" id="text-orgb257232">
<p>
missing getopt()
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">for atof() </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXOP</span> 100       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max size of operand or operator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NUMBER</span> <span style="color: #848ea9;">'0'</span>      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">signal that a number was found </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> []);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span>);
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse Polish calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">op2</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[MAXOP];

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = getop(s)) != EOF) {
    <span style="color: #56b4e9; font-weight: bold;">switch</span> (type) {
    <span style="color: #56b4e9; font-weight: bold;">case</span> NUMBER:
      push(atof(s));
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'+'</span>:
      push(pop() + pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'*'</span>:
      push(pop() * pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'-'</span>:
      op2 = pop();
      push(pop() - op2);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'/'</span>:
      op2 = pop();
      <span style="color: #56b4e9; font-weight: bold;">if</span> (op2 != 0.0)
        push(pop() / op2);
      <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"error: zero divisor\n"</span>);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
      printf(<span style="color: #848ea9;">"\t%.8g\n"</span>, pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">default</span>:
      printf(<span style="color: #848ea9;">"error: unknown command %s\n"</span>, s);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXVAL</span> 100 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum depth of val stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">sp</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free stack position </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>[MAXVAL]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">value stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push: push f onto value stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">f</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &lt; MAXVAL)
    val[sp++] = f;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: stack full, can't push %g\n"</span>, f);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pop: pop and return top value from stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">return</span> val[--sp];
  <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: stack empty\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0.0;
  }
}

<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getop: get next character or numeric operand </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[0] = c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  s[1] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != <span style="color: #848ea9;">'.'</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> c; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (isdigit(c)) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect integer part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'.'</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect fraction part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  s[i] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> NUMBER;
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">BUFSIZE</span> 100

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">buf</span>[BUFSIZE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">buffer for ungetch </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">bufp</span> = 0;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position in buf </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get a (possibly pushed-back) character </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (bufp &gt; 0) ? buf[--bufp] : getchar();
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push character back on input </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (bufp &gt;= BUFSIZE)
    printf(<span style="color: #848ea9;">"ungetch: too many characters\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    buf[bufp++] = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org17b197c" class="outline-3">
<h3 id="org17b197c">getop function</h3>
<div class="outline-text-3" id="text-org17b197c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getop: get next character or numeric operand </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[0] = c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  s[1] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != <span style="color: #848ea9;">'.'</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> c; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (isdigit(c)) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect integer part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'.'</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect fraction part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  s[i] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> NUMBER;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb641ba" class="outline-3">
<h3 id="orgeb641ba">getch and ungetch funcions</h3>
<div class="outline-text-3" id="text-orgeb641ba">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">BUFSIZE</span> 100

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">buf</span>[BUFSIZE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">buffer for ungetch </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">bufp</span> = 0;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position in buf </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get a (possibly pushed-back) character </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (bufp &gt; 0) ? buf[--bufp] : getchar();
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push character back on input </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (bufp &gt;= BUFSIZE)
    printf(<span style="color: #848ea9;">"ungetch: too many characters\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    buf[bufp++] = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org56a0724" class="outline-3">
<h3 id="org56a0724">recursion example. printd function</h3>
<div class="outline-text-3" id="text-org56a0724">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">printd: print n in decimal </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">printd</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (n &lt; 0) {
    putchar(<span style="color: #848ea9;">'-'</span>);
    n = -n;
  }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (n / 10)
    printd(n / 10);
  putchar(n % 10 + <span style="color: #848ea9;">'0'</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdf8c0b" class="outline-3">
<h3 id="orgcdf8c0b">qsort function</h3>
<div class="outline-text-3" id="text-orgcdf8c0b">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
    <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>);

    <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right)          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
        <span style="color: #56b4e9; font-weight: bold;">return</span>;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
    swap(v, left, (left + right) / 2);  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">move partition elem </span><span style="color: #009e73; font-style: italic;">*/</span>
    last = left;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">to v[0] </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left + 1; i &lt;= right; i++) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">partition </span><span style="color: #009e73; font-style: italic;">*/</span>
        <span style="color: #56b4e9; font-weight: bold;">if</span> (v[i] &lt; v[left])
            swap(v, ++last, i);
    swap(v, left, last);        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">restore partition elem </span><span style="color: #009e73; font-style: italic;">*/</span>
    qsort(v, left, last - 1);
    qsort(v, last + 1, right);
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">swap: interchange v[i] and v[j] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

    temp = v[i];
    v[i] = v[j];
    v[j] = temp;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga45e5e0" class="outline-2">
<h2 id="orga45e5e0">Chapter 5 - Pointers and Arrays</h2>
<div class="outline-text-2" id="text-orga45e5e0">
</div>
<div id="outline-container-org33ff8bf" class="outline-3">
<h3 id="org33ff8bf">swap (with pointers)</h3>
<div class="outline-text-3" id="text-org33ff8bf">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">px</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">py</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">interchange *px and *py </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = *px;
  *px = *py;
  *py = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8835e3" class="outline-3">
<h3 id="orgc8835e3">getint</h3>
<div class="outline-text-3" id="text-orgc8835e3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getint: get next integer from input into *pn </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getint</span>(<span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pn</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (isspace(c = getch())) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != EOF &amp;&amp; c != <span style="color: #848ea9;">'+'</span> &amp;&amp; c != <span style="color: #848ea9;">'-'</span>) {
    ungetch(c); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">it is not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  }
  sign = (c == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'+'</span> || c == <span style="color: #848ea9;">'-'</span>)
    c = getch();
  <span style="color: #56b4e9; font-weight: bold;">for</span> (*pn = 0; isdigit(c), c = getch())
    *pn = 10 * *pn + (c - <span style="color: #848ea9;">'0'</span>);
  *pn *= sign;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc87b2b3" class="outline-3">
<h3 id="orgc87b2b3">strlen</h3>
<div class="outline-text-3" id="text-orgc87b2b3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; *s != <span style="color: #848ea9;">'\0'</span>, s++)
    n++;
  <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge334a61" class="outline-3">
<h3 id="orge334a61">alloc and afree</h3>
<div class="outline-text-3" id="text-orge334a61">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">ALLOCSIZE</span> 10000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">size of available space </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">allocbuf</span>[ALLOCSIZE]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">storage for alloc </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">allocp</span> = allocbuf; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">alloc</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">return pointer to n characters </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (allocbuf + ALLOCSIZE - allocp &gt;= n) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">it fits </span><span style="color: #009e73; font-style: italic;">*/</span>
    allocp += n;
    <span style="color: #56b4e9; font-weight: bold;">return</span> allocp - n; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">old p </span><span style="color: #009e73; font-style: italic;">*/</span>
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not enough room </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">afree</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">free storage pointed to by p </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p &gt;= allocbuf &amp;&amp; p &lt; allocbuf + ALLOCSIZE)
    allocp = p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a6f93e" class="outline-3">
<h3 id="org9a6f93e">strlen</h3>
<div class="outline-text-3" id="text-org9a6f93e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span> = s;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (*p != <span style="color: #848ea9;">'\0'</span>)
    p++;
  <span style="color: #56b4e9; font-weight: bold;">return</span> p - s;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd481e25" class="outline-3">
<h3 id="orgd481e25">strcpy (using arrays)</h3>
<div class="outline-text-3" id="text-orgd481e25">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; array subscript version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[i] = t[i]) != <span style="color: #848ea9;">'\0'</span>)
    i++;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgebc2feb" class="outline-3">
<h3 id="orgebc2feb">strcpy (using pointers)</h3>
<div class="outline-text-3" id="text-orgebc2feb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((*s = *t) != <span style="color: #848ea9;">'\0'</span>) {
    s++;
    t++;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd0a98b9" class="outline-3">
<h3 id="orgd0a98b9">strcpy (experienced programmers)</h3>
<div class="outline-text-3" id="text-orgd0a98b9">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((*s++ = *t++) != <span style="color: #848ea9;">'\0'</span>)
    ;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org504002b" class="outline-3">
<h3 id="org504002b">STRCPY (v3)</h3>
<div class="outline-text-3" id="text-org504002b">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version 3 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (*s++ = *t++)
    ;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org599f775" class="outline-3">
<h3 id="org599f775">strcmp (no pointers)</h3>
<div class="outline-text-3" id="text-org599f775">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcmp: return &lt;0 if s&lt;t, 0 if s==t, &gt;0 if s&gt;t </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] == t[i]; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'\0'</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">return</span> s[i] - t[i];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org07163ad" class="outline-3">
<h3 id="org07163ad">STRCMP (with pointers)</h3>
<div class="outline-text-3" id="text-org07163ad">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcmp: return &lt;0 if s&lt;t, 0 if s==t, &gt;0 if s&gt;t </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">for</span> ( ; *s == *t; s++, t++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (*s == <span style="color: #848ea9;">'\0'</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">return</span> *s - *t;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5bcd53a" class="outline-3">
<h3 id="org5bcd53a"><span class="todo TODO">TODO</span> program:  + readlines and writelines</h3>
<div class="outline-text-3" id="text-org5bcd53a">
<p>
The function getline is from Section 1.9.
</p>

<pre class="example">
55.c:39:33: error: lvalue required as left operand of assignment
     if (nlines &gt;= maxlines || p = alloc(len) == NULL)
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINES</span> 5000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max #lines to be sorted </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[MAXLINES]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pointers to text lines </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">sort input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of input lines read </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> ((nlines = readlines(lineptr, MAXLINES)) &gt;= 0) {
    qsort(lineptr, 0, nlines-1);
    writelines(lineptr, nlines);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: input too big to sort\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  }
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLEN</span> 1000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max length of any input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">alloc</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">readlines: read input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">maxlines</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>, <span style="color: #e69f00; font-weight: bold;">nlines</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLEN];

  nlines = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = getline(line, MAXLEN)) &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (nlines &gt;= maxlines || p == alloc(len) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
    <span style="color: #56b4e9; font-weight: bold;">else</span> {
      line[len-1] = <span style="color: #848ea9;">'\0'</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">delete newline </span><span style="color: #009e73; font-style: italic;">*/</span>
      strcpy(p, line);
      lineptr[nlines++] = p;
    }
  <span style="color: #56b4e9; font-weight: bold;">return</span> nlines;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">writelines: write output lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; nlines; i++)
    printf(<span style="color: #848ea9;">"%s\n"</span>, lineptr[i]);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3de280f" class="outline-3">
<h3 id="org3de280f">WRITELINES</h3>
<div class="outline-text-3" id="text-org3de280f">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">writelines: write output lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (nlines-- &gt; 0)
    printf(<span style="color: #848ea9;">"%s\n"</span>, *lineptr++);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge661ff3" class="outline-3">
<h3 id="orge661ff3">QSORT</h3>
<div class="outline-text-3" id="text-orge661ff3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>);

  <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span>;          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
  swap(v, left, (left + right)/2);
  last = left;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left+1; i &lt;= right; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (strcmp(v[i], v[left]) &lt; 0)
      swap(v, ++last, i);
  swap(v, left, last);
  qsort(v, left, last-1);
  qsort(v, last+1, right);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org94ac882" class="outline-3">
<h3 id="org94ac882">swap</h3>
<div class="outline-text-3" id="text-org94ac882">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">swap: interchange v[i] and v[j] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>)
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = v[i];
  v[i] = v[j];
  v[j] = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org06e4a28" class="outline-3">
<h3 id="org06e4a28">multi-dimensional arrays daytab, day_of_year, month_day</h3>
<div class="outline-text-3" id="text-org06e4a28">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">daytab</span>[2][13] = {
  {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
  {0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}
};

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">day_of_year: set day of year from month &amp; day </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">day_of_year</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">year</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">month</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">day</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">leap</span>;
  leap = year%4 == 0 &amp;&amp; year%100 != 0 || year%400 == 0;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt; month; i++)
    day += daytab[leap][i];
  <span style="color: #56b4e9; font-weight: bold;">return</span> day;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">month_day: set month, day from day of year </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">month_day</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">year</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">yearday</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pmonth</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pday</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">leap</span>;

  leap = year%4 == 0 &amp;&amp; year%100 != 0 || year%400 == 0;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; yearday &gt; daytab[leap][i]; i++)
    yearday -= daytab[leap][i];
  *pmonth = i;
  *pday = yearday;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9db114f" class="outline-3">
<h3 id="org9db114f">month_name</h3>
<div class="outline-text-3" id="text-org9db114f">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">month_name: return name of n-th month </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">month_name</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>[] = {
    <span style="color: #848ea9;">"Illegal month"</span>,
    <span style="color: #848ea9;">"January"</span>, <span style="color: #848ea9;">"February"</span>, <span style="color: #848ea9;">"March"</span>,
    <span style="color: #848ea9;">"April"</span>, <span style="color: #848ea9;">"May"</span>, <span style="color: #848ea9;">"June"</span>,
    <span style="color: #848ea9;">"July"</span>, <span style="color: #848ea9;">"August"</span>, <span style="color: #848ea9;">"September"</span>,
    <span style="color: #848ea9;">"October"</span>, <span style="color: #848ea9;">"November"</span>, <span style="color: #848ea9;">"December"</span>
  };

  <span style="color: #56b4e9; font-weight: bold;">return</span> (n &lt; 1 || n &gt; 12) ? name[0] : name[n];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d96c4a" class="outline-3">
<h3 id="org2d96c4a"><span class="done DONE">DONE</span> program: krecho v1</h3>
<div class="outline-text-3" id="text-org2d96c4a">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">echo command-line arguments; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt; argc; i++)
    printf(<span style="color: #848ea9;">"%s%s"</span>, argv[i], (i &lt; argc-1) ? <span style="color: #848ea9;">" "</span> : <span style="color: #848ea9;">""</span>);
  printf(<span style="color: #848ea9;">"\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5902351" class="outline-3">
<h3 id="org5902351"><span class="done DONE">DONE</span> program: krecho v2</h3>
<div class="outline-text-3" id="text-org5902351">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">echo command-line arguments; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0)
    printf(<span style="color: #848ea9;">"%s%s"</span>, *++argv, (argc &gt; 1) ? <span style="color: #848ea9;">" "</span> : <span style="color: #848ea9;">""</span>);
  printf(<span style="color: #848ea9;">"\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<p>
<code>printf((argc &gt; 1) ? "%s " : "%s", *++argv);</code>
</p>

<p>
Alternatively, we could write the printf statement as
</p>

<p>
This shows that the format argument of printf can be an expression too.
</p>
</div>
</div>

<div id="outline-container-orgf937914" class="outline-3">
<h3 id="orgf937914">main</h3>
<div class="outline-text-3" id="text-orgf937914">
<p>
uses getline
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find: print lines that match pattern from 1st arg </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc != 2)
    printf(<span style="color: #848ea9;">"Usage: find pattern\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0)
      <span style="color: #56b4e9; font-weight: bold;">if</span> (strstr(line, argv[1]) != <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
        printf(<span style="color: #848ea9;">"%s"</span>, line);
        found++;
      }
  <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5514534" class="outline-3">
<h3 id="org5514534">program:</h3>
<div class="outline-text-3" id="text-org5514534">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find: print lines that match pattern from 1st arg </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
  <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">lineno</span> = 0;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">except</span> = 0, <span style="color: #e69f00; font-weight: bold;">number</span> = 0, <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0 &amp;&amp; (*++argv)[0] == <span style="color: #848ea9;">'-'</span>)
    <span style="color: #56b4e9; font-weight: bold;">while</span> (c = *++argv[0])
      <span style="color: #56b4e9; font-weight: bold;">switch</span> (c) {
      <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'x'</span>:
        except = 1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'n'</span>:
        number = 1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      <span style="color: #56b4e9; font-weight: bold;">default</span>:
        printf(<span style="color: #848ea9;">"find: illegal option %c\n"</span>, c);
        argc = 0;
        found = -1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc != 1)
    printf(<span style="color: #848ea9;">"Usage: find -x -n pattern\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0) {
      lineno++;
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((strstr(line, *argv) != <span style="color: #d55e00; font-weight: bold;">NULL</span>) != except) {
        <span style="color: #56b4e9; font-weight: bold;">if</span> (number)
          printf(<span style="color: #848ea9;">"%ld:"</span>, lineno);
        printf(<span style="color: #848ea9;">"%s"</span>, line);
        found++;
      }
    }
  <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8e0c88" class="outline-3">
<h3 id="orgc8e0c88">program:</h3>
<div class="outline-text-3" id="text-orgc8e0c88">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINES</span> 5000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max #lines to be sorted </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[MAXLINES]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pointers to text lines </span><span style="color: #009e73; font-style: italic;">*/</span>


<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>,
           <span style="color: #0072b2; font-weight: bold;">int</span> (*<span style="color: #d55e00;">comp</span>)(<span style="color: #0072b2; font-weight: bold;">void</span> *, <span style="color: #0072b2; font-weight: bold;">void</span> *));
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">numcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">sort input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of input lines read </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numeric</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">1 if numeric sort </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc &gt; 1 &amp;&amp; strcmp(argv[1], <span style="color: #848ea9;">"-n"</span>) == 0)
    numeric = 1;
  <span style="color: #56b4e9; font-weight: bold;">if</span> ((nlines = readlines(lineptr, MAXLINES)) &gt;= 0) {
    qsort((<span style="color: #0072b2; font-weight: bold;">void</span>**) lineptr, 0, nlines-1,
          (<span style="color: #0072b2; font-weight: bold;">int</span> (*)(<span style="color: #0072b2; font-weight: bold;">void</span>*,<span style="color: #0072b2; font-weight: bold;">void</span>*))(numeric ? numcmp : strcmp));
    writelines(lineptr, nlines);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"input too big to sort\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org50e1f35" class="outline-3">
<h3 id="org50e1f35">qsort</h3>
<div class="outline-text-3" id="text-org50e1f35">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>,
           <span style="color: #0072b2; font-weight: bold;">int</span> (*<span style="color: #d55e00;">comp</span>)(<span style="color: #0072b2; font-weight: bold;">void</span> *, <span style="color: #0072b2; font-weight: bold;">void</span> *))
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span>, <span style="color: #0072b2; font-weight: bold;">int</span>);

  <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span>;          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
  swap(v, left, (left + right)/2);
  last = left;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left+1; i &lt;= right; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((*comp)(v[i], v[left]) &lt; 0)
      swap(v, ++last, i);
  swap(v, left, last);
  qsort(v, left, last-1, comp);
  qsort(v, last+1, right, comp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5b36b44" class="outline-3">
<h3 id="org5b36b44">NUMCMP</h3>
<div class="outline-text-3" id="text-org5b36b44">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">numcmp: compare s1 and s2 numerically </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">numcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s1</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s2</span>)
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">v1</span>, <span style="color: #e69f00; font-weight: bold;">v2</span>;

  v1 = atof(s1);
  v2 = atof(s2);
  <span style="color: #56b4e9; font-weight: bold;">if</span> (v1 &lt; v2)
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (v1 &gt; v2)
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8d1151" class="outline-3">
<h3 id="orga8d1151">swap</h3>
<div class="outline-text-3" id="text-orga8d1151">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>;)
{
  <span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = v[i];
  v[i] = v[j];
  v[j] = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org62b0335" class="outline-3">
<h3 id="org62b0335">recursive decent parser dcl, dirdcl,</h3>
<div class="outline-text-3" id="text-org62b0335">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">dcl: parse a declarator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ns</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (ns = 0; gettoken() == <span style="color: #848ea9;">'*'</span>; ) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count *'s </span><span style="color: #009e73; font-style: italic;">*/</span>
    ns++;
  dirdcl();
  <span style="color: #56b4e9; font-weight: bold;">while</span> (ns-- &gt; 0)
    strcat(out, <span style="color: #848ea9;">" pointer to"</span>);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">dirdcl: parse a direct declarator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dirdcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;

  <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype == <span style="color: #848ea9;">'('</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">( dcl ) </span><span style="color: #009e73; font-style: italic;">*/</span>
    dcl();
    <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype != <span style="color: #848ea9;">')'</span>)
      printf(<span style="color: #848ea9;">"error: missing )\n"</span>);
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype == NAME) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">variable name </span><span style="color: #009e73; font-style: italic;">*/</span>
    strcpy(name, token);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: expected name or (dcl)\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type=gettoken()) == PARENS || type == BRACKETS)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (type == PARENS)
      strcat(out, <span style="color: #848ea9;">" function returning"</span>);
    <span style="color: #56b4e9; font-weight: bold;">else</span> {
      strcat(out, <span style="color: #848ea9;">" array"</span>);
      strcat(out, token);
      strcat(out, <span style="color: #848ea9;">" of"</span>);
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafd59ca" class="outline-3">
<h3 id="orgafd59ca">program:</h3>
<div class="outline-text-3" id="text-orgafd59ca">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"krbook.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXTOKEN</span> 100

<span style="color: #56b4e9; font-weight: bold;">enum</span> { <span style="color: #e69f00; font-weight: bold;">NAME</span>, <span style="color: #e69f00; font-weight: bold;">PARENS</span>, <span style="color: #e69f00; font-weight: bold;">BRACKETS</span> };

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dirdcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">gettoken</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tokentype</span>;             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">type of last token </span><span style="color: #009e73; font-style: italic;">*/</span>         
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">token</span>[MAXTOKEN];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">last token string </span><span style="color: #009e73; font-style: italic;">*/</span>          
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">name</span>[MAXTOKEN];       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">identifier name </span><span style="color: #009e73; font-style: italic;">*/</span>            
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">datatype</span>[MAXTOKEN];   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">data type = char, int, etc. </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">out</span>[1000];

<span style="color: #d55e00;">main</span>() <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">convert declaration to words </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (gettoken() != EOF) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">1st token on line </span><span style="color: #009e73; font-style: italic;">*/</span>
    strcpy(datatype, token); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">is the datatype </span><span style="color: #009e73; font-style: italic;">*/</span>
    out[0] = <span style="color: #848ea9;">'\0'</span>;
    dcl(); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">parse rest of line </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype != <span style="color: #848ea9;">'\n'</span>)
      printf(<span style="color: #848ea9;">"syntax error\n"</span>);
    printf(<span style="color: #848ea9;">"%s: %s %s\n"</span>, name, out, datatype);
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc58b331" class="outline-3">
<h3 id="orgc58b331">GETTOKEN</h3>
<div class="outline-text-3" id="text-orgc58b331">
<p>
think that i'm missing some global variables
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">gettoken</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">return next token </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span> = token;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'('</span>) {
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((c = getch()) == <span style="color: #848ea9;">')'</span>) {
      strcpy(token, <span style="color: #848ea9;">"()"</span>);
      <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = PARENS;
    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
      ungetch(c);
      <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = <span style="color: #848ea9;">'('</span>;
    }
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'['</span>) {
    <span style="color: #56b4e9; font-weight: bold;">for</span> (*p++ = c; (*p++ = getch()) != <span style="color: #848ea9;">']'</span>; )
      ;
    *p = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = BRACKETS;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(c)) {
    <span style="color: #56b4e9; font-weight: bold;">for</span> (*p++ = c; isalnum(c = getch()); )
      *p++ = c;
    *p = <span style="color: #848ea9;">'\0'</span>;
    ungetch(c);
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = NAME;
  } <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgceaa4c6" class="outline-3">
<h3 id="orgceaa4c6">undcl</h3>
<div class="outline-text-3" id="text-orgceaa4c6">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">undcl: convert word descriptions to declarations </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">temp</span>[MAXTOKEN];

  <span style="color: #56b4e9; font-weight: bold;">while</span> (gettoken() != EOF) {
    strcpy(out, token);
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = gettoken()) != <span style="color: #848ea9;">'\n'</span>)
      <span style="color: #56b4e9; font-weight: bold;">if</span> (type == PARENS || type == BRACKETS)
        strcat(out, token);
      <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (type == <span style="color: #848ea9;">'*'</span>) {
        sprintf(temp, <span style="color: #848ea9;">"(*%s)"</span>, out);
        strcpy(out, temp);
      } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (type == NAME) {
        sprintf(temp, <span style="color: #848ea9;">"%s %s"</span>, token, out);
        strcpy(out, temp);
      } <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"invalid input at %s\n"</span>, token);
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgf789d0b" class="outline-2">
<h2 id="orgf789d0b">Chapter 6 - Structures</h2>
<div class="outline-text-2" id="text-orgf789d0b">
</div>
<div id="outline-container-org07b06cc" class="outline-3">
<h3 id="org07b06cc">makepoint</h3>
<div class="outline-text-3" id="text-org07b06cc">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">makepoint: make a point from x and y components </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #d55e00;">makepoint</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp.x = x;
  temp.y = y;
  <span style="color: #56b4e9; font-weight: bold;">return</span> temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org843bca2" class="outline-3">
<h3 id="org843bca2"></h3>
<div class="outline-text-3" id="text-org843bca2">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">screen</span>;
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">middle</span>;
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #d55e00;">makepoint</span>(<span style="color: #0072b2; font-weight: bold;">int</span>, <span style="color: #0072b2; font-weight: bold;">int</span>);

screen.pt1 = makepoint(0,0);
screen.pt2 = makepoint(XMAX, YMAX);
middle = makepoint((screen.pt1.x + screen.pt2.x)/2,
                   (screen.pt1.y + screen.pt2.y)/2);

</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb2f731" class="outline-3">
<h3 id="orgeb2f731">addpoint</h3>
<div class="outline-text-3" id="text-orgeb2f731">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">addpoints: add two points </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">addpoint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p1</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p2</span>)
{
  p1.x += p2.x;
  p1.y += p2.y;
  <span style="color: #56b4e9; font-weight: bold;">return</span> p1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org69a974e" class="outline-3">
<h3 id="org69a974e">ptinrect</h3>
<div class="outline-text-3" id="text-org69a974e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">ptinrect: return 1 if p in r, 0 if not </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">ptinrect</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">r</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> p.x &gt;= r.pt1.x &amp;&amp; p.x &lt; r.pt2.x
    &amp;&amp; p.y &gt;= r.pt1.y &amp;&amp; p.y &lt; r.pt2.y;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3621917" class="outline-3">
<h3 id="org3621917">canonrect</h3>
<div class="outline-text-3" id="text-org3621917">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #d55e00;">min</span>(<span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #e69f00; font-weight: bold;">b</span>) ((a) &lt; (b) ? (a) : (b))
<span style="color: #0072b2;">#define</span> <span style="color: #d55e00;">max</span>(<span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #e69f00; font-weight: bold;">b</span>) ((a) &gt; (b) ? (a) : (b))

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">canonrect: canonicalize coordinates of rectangle </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #d55e00;">canonrect</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">r</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp.pt1.x = min(r.pt1.x,r.pt2.x);
  temp.pt1.y = min(r.pt1.y,r.pt2.y);
  temp.pt2.x = max(r.pt1.x,r.pt2.x);
  temp.pt2.y = max(r.pt1.y,r.pt2.y);
  <span style="color: #56b4e9; font-weight: bold;">return</span> temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org61460a6" class="outline-3">
<h3 id="org61460a6">binsearch</h3>
<div class="outline-text-3" id="text-org61460a6">
<p>
won't compile
keytab?
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count C keywords </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];

  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((n = binsearch(word, keytab, NKEYS)) &gt;= 0)
        keytab[n].count++;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; n &lt; NKEYS; n++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (keytab[n].count &gt; 0)
      printf(<span style="color: #848ea9;">"%4d %s\n"</span>,
             keytab[n].count, keytab[n].word);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find word in tab[0]...tab[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> <span style="color: #e69f00; font-weight: bold;">tab</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">low</span>, <span style="color: #e69f00; font-weight: bold;">high</span>, <span style="color: #e69f00; font-weight: bold;">mid</span>;

  low = 0;
  high = n - 1;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt;= high) {
    mid = (low+high) / 2;
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(word, tab[mid].word)) &lt; 0)
      high = mid - 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &gt; 0)
      low = mid + 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org315f70a" class="outline-3">
<h3 id="org315f70a">GETWORD</h3>
<div class="outline-text-3" id="text-org315f70a">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getword: get next word or character from input </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">w</span> = word;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (isspace(c = getch()))
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    *w++ = c;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isalpha(c)) {
    *w = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> c;
  }
  <span style="color: #56b4e9; font-weight: bold;">for</span> ( ; --lim &gt; 0; w++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (!isalnum(*w = getch())) {
      ungetch(*w);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  *w = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> word[0];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb89b3c" class="outline-3">
<h3 id="orgdb89b3c">program: pointers to structures</h3>
<div class="outline-text-3" id="text-orgdb89b3c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"ch06.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count C keywords; pointer version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">p</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((p=binsearch(word, keytab, NKEYS)) != <span style="color: #d55e00; font-weight: bold;">NULL</span>)
        p-&gt;count++;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (p = keytab; p &lt; keytab + NKEYS; p++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (p-&gt;count &gt; 0)
      printf(<span style="color: #848ea9;">"%4d %s\n"</span>, p-&gt;count, p-&gt;word);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find word in tab[0]...tab[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, struck <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">tab</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">low</span> = &amp;tab[0];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">high</span> = &amp;tab[n];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">mid</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt; high) {
    mid = low + (high-low) / 2;
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(word, mid-&gt;word)) &lt; 0)
      high = mid;
    <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &gt; 0)
      low = mid + 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org432b10c" class="outline-3">
<h3 id="org432b10c">tnode</h3>
<div class="outline-text-3" id="text-org432b10c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">the tree node: </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to the text </span><span style="color: #009e73; font-style: italic;">*/</span>           
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of occurrences </span><span style="color: #009e73; font-style: italic;">*/</span>        
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">left</span>;   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">left child </span><span style="color: #009e73; font-style: italic;">*/</span>                   
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">right</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">right child </span><span style="color: #009e73; font-style: italic;">*/</span>                  
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org21db71e" class="outline-3">
<h3 id="org21db71e">program:</h3>
<div class="outline-text-3" id="text-org21db71e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"ch06.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100

<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">addtree</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *, <span style="color: #0072b2; font-weight: bold;">char</span> *);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">treeprint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">word frequency count </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">root</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];

  root = <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      root = addtree(root, word);
  treeprint(root);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org313f881" class="outline-3">
<h3 id="org313f881">treenode</h3>
<div class="outline-text-3" id="text-org313f881">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">addtree: add a node with w, at or below p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">treenode</span> *<span style="color: #d55e00;">addtree</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">w</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p == <span style="color: #d55e00; font-weight: bold;">NULL</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">a new word has arrived </span><span style="color: #009e73; font-style: italic;">*/</span>
    p = talloc();  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make a new node </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;word = strdup(w);
    p-&gt;count = 1;
    p-&gt;left = p-&gt;right = <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(w, p-&gt;word)) == 0)
    p-&gt;count++; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">repeated word </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &lt; 0) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">less than into left subtree </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;left = addtree(p-&gt;left, w);
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">greater than into right subtree </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;right = addtree(p-&gt;right, w);
  <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org975d208" class="outline-3">
<h3 id="org975d208">treeprint</h3>
<div class="outline-text-3" id="text-org975d208">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">treeprint: in-order print of tree p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">treeprint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">p</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p != <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
    treeprint(p-&gt;left);
    printf(<span style="color: #848ea9;">"%4d %s\n"</span>, p-&gt;count, p-&gt;word);
    treeprint(p-&gt;right);
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab72043" class="outline-3">
<h3 id="orgab72043">tnode strdup</h3>
<div class="outline-text-3" id="text-orgab72043">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">talloc: make a tnode </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span>));
}

<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make a duplicate of s </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>;

  p = (<span style="color: #0072b2; font-weight: bold;">char</span> *) malloc(strlen(s)+1); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">+1 for '\0' </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p != <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    strcpy(p, s);
  <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6b171d" class="outline-3">
<h3 id="orgd6b171d">nlist</h3>
<div class="outline-text-3" id="text-orgd6b171d">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> {          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">table entry: </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">next</span>;     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next entry in chain </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>;             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">defined name </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">defn</span>;             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">replacement text </span><span style="color: #009e73; font-style: italic;">*/</span>
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org1252167" class="outline-3">
<h3 id="org1252167">hash</h3>
<div class="outline-text-3" id="text-org1252167">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">hash: form hash value for string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #d55e00;">hash</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">hashval</span>;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (hashval = 0; *s != <span style="color: #848ea9;">'\0'</span>; s++)
    hashval = *s + 31 * hashval;
  <span style="color: #56b4e9; font-weight: bold;">return</span> hashval % HASHSIZE;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org929504f" class="outline-3">
<h3 id="org929504f">nlist</h3>
<div class="outline-text-3" id="text-org929504f">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lookup: look for s in hashtab </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">lookup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">np</span>;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (np = hashtab[hash(s)]; np != <span style="color: #d55e00; font-weight: bold;">NULL</span>; np = np-&gt;next)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (strcmp(s, np-&gt;name) == 0)
      <span style="color: #56b4e9; font-weight: bold;">return</span> np; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">found </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not found </span><span style="color: #009e73; font-style: italic;">*/</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org80e9034" class="outline-3">
<h3 id="org80e9034">nlist</h3>
<div class="outline-text-3" id="text-org80e9034">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">lookup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">install: put (name, defn) in hashtab </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">install</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">defn</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">np</span>;
  <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">hashval</span>;

  <span style="color: #56b4e9; font-weight: bold;">if</span> ((np = lookup(name)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not found </span><span style="color: #009e73; font-style: italic;">*/</span>
    np = (<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(*np));
    <span style="color: #56b4e9; font-weight: bold;">if</span> (np == <span style="color: #d55e00; font-weight: bold;">NULL</span> || (np-&gt;name = strdup(name)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
    hashval = hash(name);
    np-&gt;next = hashtab[hashval];
    hashtab[hashval] = np;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">already there </span><span style="color: #009e73; font-style: italic;">*/</span>
    free((<span style="color: #0072b2; font-weight: bold;">void</span> *) np-&gt;defn); <span style="color: #009e73; font-style: italic;">/*</span><span style="color: #009e73; font-style: italic;">free previous defn </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">if</span> ((np-&gt;defn = strdup(defn)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> np;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge082c19" class="outline-3">
<h3 id="orge082c19"></h3>
<div class="outline-text-3" id="text-orge082c19">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">typedef</span> <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #0072b2; font-weight: bold;">Treeptr</span>;

<span style="color: #56b4e9; font-weight: bold;">typedef</span> <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">the tree node: </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to the text </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of occurrences </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">left</span>;   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">left child </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">right</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">right child </span><span style="color: #009e73; font-style: italic;">*/</span>
} <span style="color: #0072b2; font-weight: bold;">Treenode</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd7b54b" class="outline-3">
<h3 id="orgbd7b54b"></h3>
<div class="outline-text-3" id="text-orgbd7b54b">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">Treeptr</span> <span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">Treeptr</span>) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(Treenode));
}
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org4a1e05d" class="outline-2">
<h2 id="org4a1e05d">Chapter 7 - Input and Output</h2>
<div class="outline-text-2" id="text-org4a1e05d">
</div>
<div id="outline-container-org8ac20e8" class="outline-3">
<h3 id="org8ac20e8">Program Lower</h3>
<div class="outline-text-3" id="text-org8ac20e8">
<ul class="org-ul">
<li><code>$ gcc lower.c</code></li>
<li><code>./a.out</code></li>
<li>enter char(s) and RET</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower: convert input to lower case </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        putchar(tolower(c));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org23e4231" class="outline-3">
<h3 id="org23e4231">ex printf myprint.c</h3>
<div class="outline-text-3" id="text-org23e4231">
<p>
printf("%.*s", max, s);
</p>

<ul class="org-ul">
<li>how to assign a string of characters to a variable?</li>
<li>define the max constant?</li>
<li>note: * is followed by and <code>int</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">max</span> 12

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[max] = <span style="color: #848ea9;">"hello, world"</span>;

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"%.*s\n"</span>, max, s);
    printf(<span style="color: #848ea9;">"%s\n"</span>, s);          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%s</span>
    printf(<span style="color: #848ea9;">"%10s\n"</span>, s);        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%10s</span>
    printf(<span style="color: #848ea9;">"%.10s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%.10s</span>
    printf(<span style="color: #848ea9;">"%-10s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-10s</span>
    printf(<span style="color: #848ea9;">"%.15s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%.15s</span>
    printf(<span style="color: #848ea9;">"%-15s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-15s</span>
    printf(<span style="color: #848ea9;">"%15.10s\n"</span>, s);     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%15.10s</span>
    printf(<span style="color: #848ea9;">"%-15.10s\n"</span>, s);    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-15.10s</span>
}
</pre>
</div>

<p>
output
</p>
<pre class="example">
hello,.world
hello,.world
hello,.world
hello,.wor
hello,.world
hello,.world
hello,.world...
.....hello,.wor
hello,.wor
</pre>
</div>
</div>

<div id="outline-container-org0c64832" class="outline-3">
<h3 id="org0c64832">minprintf</h3>
<div class="outline-text-3" id="text-org0c64832">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdarg.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">minprintf: minimal printf with variable argument list </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">minprintf</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">fmt</span>, ...)
{
    <span style="color: #0072b2; font-weight: bold;">va_list</span> <span style="color: #e69f00; font-weight: bold;">ap</span>;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to each unnamed arg in turn </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, *<span style="color: #e69f00; font-weight: bold;">sval</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ival</span>;
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">dval</span>;

    va_start(ap, fmt);          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make ap point to 1st unnamed arg </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">for</span> (p = fmt; *p; p++) {
        <span style="color: #56b4e9; font-weight: bold;">if</span> (*p != <span style="color: #848ea9;">'%'</span>) {
            putchar(*p);
            <span style="color: #56b4e9; font-weight: bold;">continue</span>;
        }
        <span style="color: #56b4e9; font-weight: bold;">switch</span> (*++p) {
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'d'</span>:
            ival = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">int</span>);
            printf(<span style="color: #848ea9;">"%d"</span>, ival);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'f'</span>:
            dval = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">double</span>);
            printf(<span style="color: #848ea9;">"%f"</span>, dval);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'s'</span>:
            <span style="color: #56b4e9; font-weight: bold;">for</span> (sval = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">char</span> *); *sval; sval++)
                putchar(*sval);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">default</span>:
            putchar(*p);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        }
    }
    va_end(ap);                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">clean up when done </span><span style="color: #009e73; font-style: italic;">*/</span>
}


<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
     <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span> = 7;
     <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">yy</span>[] = <span style="color: #848ea9;">"asdfasf"</span>;
     minprintf(<span style="color: #848ea9;">"%d\n"</span>,7);
     minprintf(<span style="color: #848ea9;">"%s\n"</span>,yy);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9834e4b" class="outline-3">
<h3 id="org9834e4b">program: calculator</h3>
<div class="outline-text-3" id="text-org9834e4b">
<ul class="org-ul">
<li>calculates a running sum</li>
<li>outputs numbers as float with percision 2.</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>() <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rudimentary calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">sum</span>, <span style="color: #e69f00; font-weight: bold;">v</span>;

  sum = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (scanf(<span style="color: #848ea9;">"%lf"</span>, &amp;v) == 1)
    printf(<span style="color: #848ea9;">"\t%.2f\n"</span>, sum += v);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ec1f1f" class="outline-3">
<h3 id="org7ec1f1f">program: krcatv1</h3>
<div class="outline-text-3" id="text-org7ec1f1f">
<ul class="org-ul">
<li>works ok</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">cat: concatenate files, version 1 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">fp</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *, <span style="color: #0072b2; font-weight: bold;">FILE</span> *);

    <span style="color: #56b4e9; font-weight: bold;">if</span> (argc == 1) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no args; copy standard input </span><span style="color: #009e73; font-style: italic;">*/</span>
      filecopy(stdin, stdout);
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">while</span>(--argc &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> ((fp = fopen(*++argv, <span style="color: #848ea9;">"r"</span>)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
          printf(<span style="color: #848ea9;">"cat: can't open %s\n"</span>, *argv);
          <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
        } <span style="color: #56b4e9; font-weight: bold;">else</span> {
          filecopy(fp, stdout);
          fclose(fp);
        }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">filecopy: copy file ifp to file ofp </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ifp</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ofp</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getc(ifp)) != EOF)
    putc(c, ofp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ae577f" class="outline-3">
<h3 id="org6ae577f">program: cat revised (error handling)</h3>
<div class="outline-text-3" id="text-org6ae577f">
<p>
warnings about the exit
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">cat: concatenate files, version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">fp</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *, <span style="color: #0072b2; font-weight: bold;">FILE</span> *);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">prog</span> = argv[0]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">program name for errors </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc == 1 ) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no args; copy standard input </span><span style="color: #009e73; font-style: italic;">*/</span>
    filecopy(stdin, stdout);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0)
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((fp = fopen(*++argv, <span style="color: #848ea9;">"r"</span>)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
        fprintf(stderr, <span style="color: #848ea9;">"%s: can't open %s\n"</span>,
                prog, *argv);
        exit(1);
      } <span style="color: #56b4e9; font-weight: bold;">else</span> {
        filecopy(fp, stdout);
        fclose(fp);
      }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (ferror(stdout)) {
    fprintf(stderr, <span style="color: #848ea9;">"%s: error writing stdout\n"</span>, prog);
    exit(2);
  }
  exit(0);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">adding from previous program </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">filecopy: copy file ifp to file ofp </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ifp</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ofp</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getc(ifp)) != EOF)
    putc(c, ofp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b3753f" class="outline-3">
<h3 id="org2b3753f">fputs and fgets</h3>
<div class="outline-text-3" id="text-org2b3753f">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fgets: get at most n chars from iop </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">fgets</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">iop</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">register</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">register</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">cs</span>;

  cs = s;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (--n &gt; 0 &amp;&amp; (c = getc(iop)) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((*cs++ = c) == <span style="color: #848ea9;">'\n'</span>)
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
  *cs = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> (c == EOF &amp;&amp; cs == s) ? <span style="color: #d55e00; font-weight: bold;">NULL</span> : s;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fputs: put string s on file iop </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">fputs</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">iop</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (c = *s++)
    putc(c, iop);
  <span style="color: #56b4e9; font-weight: bold;">return</span> ferror(iop) ? EOF : 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga1403d9" class="outline-3">
<h3 id="orga1403d9">getline using fgets</h3>
<div class="outline-text-3" id="text-orga1403d9">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: read a line, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (fgets(line, max, stdin) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> strlen(line);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3ca782f" class="outline-2">
<h2 id="org3ca782f">Chapter 8 - The UNIX System Interface</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
