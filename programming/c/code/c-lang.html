<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The C Programming Language</title>
<meta name="generator" content="Org mode" />
</head>
<body>
<div id="content">
<h1 class="title">The C Programming Language</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org361db18">Chapter 1 - A Tutorial Introduction</a>
<ul>
<li><a href="#org02af604">hello.c</a></li>
<li><a href="#orgba08383">The first C program hello world</a></li>
<li><a href="#org089a222">hello world</a></li>
<li><a href="#org3963879">fahrenheit-celsius</a></li>
<li><a href="#org82cec71">fahrenheit-celsius floating point</a></li>
<li><a href="#org02b6531">fahrenheit-celsius table (in one go?)</a></li>
<li><a href="#orge2be71b">fahrenheit-celsius constants</a></li>
<li><a href="#org6516e5e">file copy</a></li>
<li><a href="#orgda4f157">file copy 2</a></li>
<li><a href="#org04ae726">count chars 1</a></li>
<li><a href="#orgd53b011">count chars 2</a></li>
<li><a href="#org7b0b69c">count lines</a></li>
<li><a href="#org97e06d4">word counting</a></li>
<li><a href="#orgef4974c">arrays</a></li>
<li><a href="#org0ea7d01">functions</a></li>
<li><a href="#orgb7e5d16">character arrays</a></li>
<li><a href="#org5ccdadb">external variables and scope</a></li>
</ul>
</li>
<li><a href="#org16332b1">Chapter 2 - Types, Operators and Expressions</a>
<ul>
<li><a href="#org51e4964">function: strlen</a></li>
<li><a href="#orgc3646c5">function: atoi</a></li>
<li><a href="#org9da433e">function: lower</a></li>
<li><a href="#org6efbe47">function: rand</a></li>
<li><a href="#org0bf3c74">function: squeeze</a></li>
<li><a href="#org621dfd5">function: strcat</a></li>
<li><a href="#org6c0a960">function: getbits</a></li>
<li><a href="#org86ce606">function: bitcount</a></li>
</ul>
</li>
<li><a href="#org08c225a">Chapter 3 - Control Flow</a>
<ul>
<li><a href="#orgc4de3bd">function: binsearch</a></li>
<li><a href="#org088a1fa">program: count digits, white space, others (switch)</a></li>
<li><a href="#org01ec0fa">function: atoi</a></li>
<li><a href="#org9b5d66c">function: shellsort</a></li>
<li><a href="#org1c6a491">function: reverse</a></li>
<li><a href="#orgffef630">function: itoa</a></li>
<li><a href="#org2f59d66">function: trim</a></li>
</ul>
</li>
<li><a href="#org736b273">Chapter 4 - Functions and Program Structure</a>
<ul>
<li><a href="#orgd0ae48a">program: find all lines matching pattern</a></li>
<li><a href="#orgfb929ad">function: atof</a></li>
<li><a href="#org22d09f9">program: calculator</a></li>
<li><a href="#org4910d5a">function: atoi (rewrite)</a></li>
<li><a href="#org31931f8">program: reverse polish calculator</a></li>
<li><a href="#org6308984">functions: push &amp; pop</a></li>
<li><a href="#org6c3ef88">program: complete cal</a></li>
<li><a href="#org027bed8">function: getop</a></li>
<li><a href="#org8642f5c">funcions: getch &amp; ungetch</a></li>
<li><a href="#org9261f8e">function: printd (recursion example)</a></li>
<li><a href="#org3bb0785">functions: qsort &amp; swap</a></li>
</ul>
</li>
<li><a href="#org825c7b5">Chapter 5 - Pointers and Arrays</a>
<ul>
<li><a href="#org73d2d80">function: swap (with pointers)</a></li>
<li><a href="#org02c93cb">function: getint</a></li>
<li><a href="#org258bf5c">function: strlen</a></li>
<li><a href="#orgce0a000">functions: alloc &amp; afree</a></li>
<li><a href="#org9791fbb">function: strlen</a></li>
<li><a href="#orgf42f5eb">function: strcpy (using arrays)</a></li>
<li><a href="#org940831a">function: strcpy (using pointers)</a></li>
<li><a href="#orgeb4ebdc">function: strcpy (experienced programmers)</a></li>
<li><a href="#org6607a52">function: strcpy (v3)</a></li>
<li><a href="#org317c680">function: strcmp (no pointers)</a></li>
<li><a href="#org310aaa1">function: strcmp (with pointers)</a></li>
<li><a href="#org2be6ee4">program: sort input lines</a></li>
<li><a href="#orgfebfd5c">function: writelines</a></li>
<li><a href="#org1252086">function: qsort</a></li>
<li><a href="#orgdf38a0e">function: swap (using char*)</a></li>
<li><a href="#orgcc1f4e9">multi-dimensional array: daytab, functions: day_of_year &amp; month_day</a></li>
<li><a href="#org7c7521e">function: month_name</a></li>
<li><a href="#orge6bc22c">program: krecho v1</a></li>
<li><a href="#orgba43fa0">program: krecho v2</a></li>
<li><a href="#orgd1d2724">program: main</a></li>
<li><a href="#org9642ada">program: find: print lines that match pattern from 1st arg</a></li>
<li><a href="#orgbc53534">program: sort input lines</a></li>
<li><a href="#org5154945">function: qsort</a></li>
<li><a href="#org7eed212">function: numcmp</a></li>
<li><a href="#org48b5a4b">function: swap (using void*)</a></li>
<li><a href="#org2bc463a">functions: dcl &amp; dirdcl</a></li>
<li><a href="#org175d0d8">program: convert declaration to words</a></li>
<li><a href="#org28cc1cc">function: gettoken</a></li>
<li><a href="#org6e78a7d">program: undcl</a></li>
</ul>
</li>
<li><a href="#org05fa51f">Chapter 6 - Structures</a>
<ul>
<li><a href="#org1141698">function: makepoint</a></li>
<li><a href="#orgb53e277">program: using makepoint</a></li>
<li><a href="#org18e31c3">function: addpoint</a></li>
<li><a href="#orgcda6dcb">function: ptinrect</a></li>
<li><a href="#orgb638b9d">function: canonrect</a></li>
<li><a href="#org73b1198">program: keyword-counting (using array indices)</a></li>
<li><a href="#org195366d">function: getword</a></li>
<li><a href="#org7b65d7d">program: keyword-counting (using pointers)</a></li>
<li><a href="#org93c3d14">struct: tnode</a></li>
<li><a href="#orgf4a9332">program: word frequency count</a></li>
<li><a href="#org210f182">function: addtree</a></li>
<li><a href="#org36a351e">function: treeprint</a></li>
<li><a href="#org4f80e42">functions: talloc &amp; strdup</a></li>
<li><a href="#orgf10ab5f">struct: nlist</a></li>
<li><a href="#org704d52c">function: hash</a></li>
<li><a href="#org4ec908e">function: lookup</a></li>
<li><a href="#org89ad133">function: install</a></li>
<li><a href="#org357605e">struct: tnode / Treenode</a></li>
<li><a href="#orgca10ecb">function: talloc</a></li>
</ul>
</li>
<li><a href="#org124149e">Chapter 7 - Input and Output</a>
<ul>
<li><a href="#orgfe8042c">program: convert input to lower case</a></li>
<li><a href="#org7962a6d">program: ex printf myprint.c</a></li>
<li><a href="#org3f25718">program: minimal printf with variable argument list</a></li>
<li><a href="#orgf037b9b">program: calculator</a></li>
<li><a href="#orge1be2d5">program: krcatv1</a></li>
<li><a href="#org1dcbdca">program: cat revised (error handling)</a></li>
<li><a href="#orgc185bc8">functions: fputs &amp; fgets</a></li>
<li><a href="#org5efd2b1">function: getline (using fgets)</a></li>
</ul>
</li>
<li><a href="#org22f30e2">Chapter 8 - The UNIX System Interface</a></li>
</ul>
</div>
</div>

<div id="outline-container-org361db18" class="outline-2">
<h2 id="org361db18">Chapter 1 - A Tutorial Introduction</h2>
<div class="outline-text-2" id="text-org361db18">
</div>
<div id="outline-container-org02af604" class="outline-3">
<h3 id="org02af604">hello.c</h3>
<div class="outline-text-3" id="text-org02af604">
<ul class="org-ul">
<li><code>$ gcc hello.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, world\n"</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba08383" class="outline-3">
<h3 id="orgba08383">The first C program hello world</h3>
<div class="outline-text-3" id="text-orgba08383">
<ul class="org-ul">
<li><code>$ gcc hello2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, world\n"</span>);
}
</pre>
</div>

<ul class="org-ul">
<li>include information about standard library</li>
<li>define a function called <code>main</code> that received no argument values</li>
<li>statements of <code>main</code> are enclosed in braces</li>
<li>main calls library function <code>printf</code> to print this sequence of
characters <code>\n</code> represents the newline character</li>
</ul>
</div>
</div>

<div id="outline-container-org089a222" class="outline-3">
<h3 id="org089a222">hello world</h3>
<div class="outline-text-3" id="text-org089a222">
<ul class="org-ul">
<li><code>$ gcc hello3.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"hello, "</span>);
    printf(<span style="color: #848ea9;">"world"</span>);
    printf(<span style="color: #848ea9;">"\n"</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3963879" class="outline-3">
<h3 id="org3963879">fahrenheit-celsius</h3>
<div class="outline-text-3" id="text-org3963879">
<ul class="org-ul">
<li><code>$ gcc fc1.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table for fahr = 0, 20, ..., 300 </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>, <span style="color: #e69f00; font-weight: bold;">celsius</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lower</span>, <span style="color: #e69f00; font-weight: bold;">upper</span>, <span style="color: #e69f00; font-weight: bold;">step</span>;

    lower = 0;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of temperature scale </span><span style="color: #009e73; font-style: italic;">*/</span>
    upper = 300;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
    step = 20;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

    fahr = lower;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (fahr &lt;= upper) {
        celsius = 5 * (fahr - 32) / 9;
        printf(<span style="color: #848ea9;">"%d\t%d\n"</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org82cec71" class="outline-3">
<h3 id="org82cec71">fahrenheit-celsius floating point</h3>
<div class="outline-text-3" id="text-org82cec71">
<ul class="org-ul">
<li><code>$ gcc fc2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table for fahr = 0, 20, ..., 300;</span>
<span style="color: #009e73; font-style: italic;">   floating-point version </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>, <span style="color: #e69f00; font-weight: bold;">celsius</span>;
    <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">lower</span>, <span style="color: #e69f00; font-weight: bold;">upper</span>, <span style="color: #e69f00; font-weight: bold;">step</span>;

    lower = 0;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of temperature scale </span><span style="color: #009e73; font-style: italic;">*/</span>
    upper = 300;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
    step = 20;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

    fahr = lower;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (fahr &lt;= upper) {
        celsius = (5.0 / 9.0) * (fahr - 32.0);
        printf(<span style="color: #848ea9;">"%3.0f %6.1f\n"</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org02b6531" class="outline-3">
<h3 id="org02b6531">fahrenheit-celsius table (in one go?)</h3>
<div class="outline-text-3" id="text-org02b6531">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (fahr = 0; fahr &lt;= 300; fahr = fahr + 20)
        printf(<span style="color: #848ea9;">"%3d %6.1f\n"</span>, fahr, (5.0 / 9.0) * (fahr - 32));
}

</pre>
</div>
</div>
</div>

<div id="outline-container-orge2be71b" class="outline-3">
<h3 id="orge2be71b">fahrenheit-celsius constants</h3>
<div class="outline-text-3" id="text-orge2be71b">
<ul class="org-ul">
<li><code>$ gcc fc4.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">LOWER</span>  0                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower limit of table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">UPPER</span>  300              <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">upper limit </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">STEP</span>   20               <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">step size </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print Fahrenheit-Celsius table </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">fahr</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (fahr = LOWER; fahr &lt;= UPPER; fahr = fahr + STEP)
        printf(<span style="color: #848ea9;">"%3d %6.1f\n"</span>, fahr, (5.0 / 9.0) * (fahr - 32));
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6516e5e" class="outline-3">
<h3 id="org6516e5e">file copy</h3>
<div class="outline-text-3" id="text-org6516e5e">
<ul class="org-ul">
<li><code>$ gcc filecopy1.c</code></li>
<li><code>./a.out</code></li>
<li>enter characters</li>
<li>C-d to terminate</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy input to output; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    c = getchar();
    <span style="color: #56b4e9; font-weight: bold;">while</span> (c != EOF) {
        putchar(c);
        c = getchar();
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda4f157" class="outline-3">
<h3 id="orgda4f157">file copy 2</h3>
<div class="outline-text-3" id="text-orgda4f157">
<ul class="org-ul">
<li><code>$ gcc filecopy2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy input to output; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        putchar(c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org04ae726" class="outline-3">
<h3 id="org04ae726">count chars 1</h3>
<div class="outline-text-3" id="text-org04ae726">
<ul class="org-ul">
<li><code>$ gcc countchars1.c</code></li>
<li><code>./a.out</code></li>
<li>RET C-d to get number of characters. but get extra</li>
<li>includes newlines in count?</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count characters in input; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">nc</span>;

    nc = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getchar() != EOF)
        ++nc;
    printf(<span style="color: #848ea9;">"%ld\n"</span>, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd53b011" class="outline-3">
<h3 id="orgd53b011">count chars 2</h3>
<div class="outline-text-3" id="text-orgd53b011">
<ul class="org-ul">
<li><code>$ gcc countchars2.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count characters in input; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">nc</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (nc = 0; getchar() != EOF; ++nc);
    printf(<span style="color: #848ea9;">"%.0f\n"</span>, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b0b69c" class="outline-3">
<h3 id="org7b0b69c">count lines</h3>
<div class="outline-text-3" id="text-org7b0b69c">
<ul class="org-ul">
<li><code>$ gcc countlines.c</code></li>
<li><code>./a.out</code></li>
<li>C-d to get result</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count lines in input </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">nl</span>;

    nl = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
            ++nl;
    printf(<span style="color: #848ea9;">"%d\n"</span>, nl);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org97e06d4" class="outline-3">
<h3 id="org97e06d4">word counting</h3>
<div class="outline-text-3" id="text-org97e06d4">
<ul class="org-ul">
<li><code>$ gcc wordcount.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">IN</span>   1                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">inside a word </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">OUT</span>  0                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">outside a word </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count lines, words, and characters in input </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">nl</span>, <span style="color: #e69f00; font-weight: bold;">nw</span>, <span style="color: #e69f00; font-weight: bold;">nc</span>, <span style="color: #e69f00; font-weight: bold;">state</span>;

    state = OUT;
    nl = nw = nc = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF) {
        ++nc;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
            ++nl;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\n'</span> || c == <span style="color: #848ea9;">'\t'</span>)
            state = OUT;
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (state == OUT) {
            state = IN;
            ++nw;
        }
    }
    printf(<span style="color: #848ea9;">"%d %d %d\n"</span>, nl, nw, nc);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef4974c" class="outline-3">
<h3 id="orgef4974c">arrays</h3>
<div class="outline-text-3" id="text-orgef4974c">
<ul class="org-ul">
<li><code>$ gcc arrays.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count digits, white space, others </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">nwhite</span>, <span style="color: #e69f00; font-weight: bold;">nother</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ndigit</span>[10];

    nwhite = nother = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        ndigit[i] = 0;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (c &gt;= <span style="color: #848ea9;">'0'</span> &amp;&amp; c &lt;= <span style="color: #848ea9;">'9'</span>)
            ++ndigit[c - <span style="color: #848ea9;">'0'</span>];
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\n'</span> || c == <span style="color: #848ea9;">'\t'</span>)
            ++nwhite;
        <span style="color: #56b4e9; font-weight: bold;">else</span>
            ++nother;

    printf(<span style="color: #848ea9;">"digits ="</span>);
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        printf(<span style="color: #848ea9;">" %d"</span>, ndigit[i]);
    printf(<span style="color: #848ea9;">", white space = %d, other = %d\n"</span>, nwhite, nother);
}
</pre>
</div>

<pre class="example">
$ ./a.out
1       2       12 3
digits = 0 2 2 1 0 0 0 0 0 0, white space = 4, other = 0
</pre>
</div>
</div>

<div id="outline-container-org0ea7d01" class="outline-3">
<h3 id="org0ea7d01">functions</h3>
<div class="outline-text-3" id="text-org0ea7d01">
<ul class="org-ul">
<li><code>$ gcc functions.c</code></li>
<li><code>./a.out</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">power</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">m</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">test power function </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; ++i)
        printf(<span style="color: #848ea9;">"%d %d %d\n"</span>, i, power(2, i), power(-3, i));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">power: raise base to n-th power; n &gt;= 0 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">power</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">base</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">p</span>;

    p = 1;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt;= n; ++i)
        p = p * base;
    <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>

<pre class="example">
$ ./a.out
0 1 1
1 2 -3
2 4 9
3 8 -27
4 16 81
5 32 -243
6 64 729
7 128 -2187
8 256 6561
9 512 -19683
</pre>
</div>
</div>

<div id="outline-container-orgb7e5d16" class="outline-3">
<h3 id="orgb7e5d16">character arrays</h3>
<div class="outline-text-3" id="text-orgb7e5d16">
<ul class="org-ul">
<li><code>$ gcc characterarrays.c</code></li>
<li><code>./a.out</code></li>
<li>; need to change the name of the getline function. conflict</li>
<li>this just prints the longest line entered</li>
<li>changed the variables in the function prototype but this wasn't necessary</li>
</ul>

<div class="org-src-container">
<pre class="src src-c">
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line length </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s1</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim1</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">to</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">from</span>[]);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print the longest input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>;                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current line length </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum length seen so far </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];         <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current input line </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[MAXLINE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">longest line saved here </span><span style="color: #009e73; font-style: italic;">*/</span>

    max = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = xgetline(line, MAXLINE)) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (len &gt; max) {
            max = len;
            copy(longest, line);
        }
    <span style="color: #56b4e9; font-weight: bold;">if</span> (max &gt; 0)                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">there was a line </span><span style="color: #009e73; font-style: italic;">*/</span>
        printf(<span style="color: #848ea9;">"%s"</span>, longest);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: read a line into s, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; lim - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>; ++i)
        s[i] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>) {
        s[i] = c;
        ++i;
    }
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy: copy 'from' into 'to'; assume to is big enough </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">to</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">from</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((to[i] = from[i]) != <span style="color: #848ea9;">'\0'</span>)
        ++i;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ccdadb" class="outline-3">
<h3 id="org5ccdadb">external variables and scope</h3>
<div class="outline-text-3" id="text-org5ccdadb">
<ul class="org-ul">
<li>$ gcc scope.c</li>
<li>./a.out</li>
<li>had to rename the getline() function</li>
<li>change getchar to getchar()</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line size </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;                        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum length seen so far </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">current input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[MAXLINE];          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">longest line saved here </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">print longest input line; specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">longest</span>[];

    max = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = xgetline()) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (len &gt; max) {
            max = len;
            copy();
        }
    <span style="color: #56b4e9; font-weight: bold;">if</span> (max &gt; 0)                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">there was a line </span><span style="color: #009e73; font-style: italic;">*/</span>
        printf(<span style="color: #848ea9;">"%s"</span>, longest);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[];

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; MAXLINE - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>; ++i)
        line[i] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>) {
        line[i] = c;
        ++i;
    }
    line[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy: specialized version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">copy</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">extern</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #e69f00; font-weight: bold;">longest</span>[];

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((longest[i] = line[i]) != <span style="color: #848ea9;">'\0'</span>)
        ++i;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org16332b1" class="outline-2">
<h2 id="org16332b1">Chapter 2 - Types, Operators and Expressions</h2>
<div class="outline-text-2" id="text-org16332b1">
</div>
<div id="outline-container-org51e4964" class="outline-3">
<h3 id="org51e4964">function: strlen</h3>
<div class="outline-text-3" id="text-org51e4964">
<ul class="org-ul">
<li>change strlen to xstrlen. conflict</li>
<li>gcc strlen.c</li>
<li>custom main</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xstrlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (s[i] != <span style="color: #848ea9;">'\0'</span>)
        ++i;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span> = xstrlen(<span style="color: #848ea9;">"house"</span>);

    printf(<span style="color: #848ea9;">"%d\n"</span>, xx);

}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc3646c5" class="outline-3">
<h3 id="orgc3646c5">function: atoi</h3>
<div class="outline-text-3" id="text-orgc3646c5">
<ul class="org-ul">
<li>ascii to integer</li>
<li>not sure what is happening</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert s to integer </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">n</span>;

    n = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] &gt;= <span style="color: #848ea9;">'0'</span> &amp;&amp; s[i] &lt;= <span style="color: #848ea9;">'9'</span>; ++i)
        n = 10 * n + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>;

    xx = atoi(<span style="color: #848ea9;">"88"</span>);
    printf(<span style="color: #848ea9;">"%d\n"</span>, xx);

}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9da433e" class="outline-3">
<h3 id="org9da433e">function: lower</h3>
<div class="outline-text-3" id="text-org9da433e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower: convert c to lower case; ASCII only </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">lower</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>)
{
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c &gt;= <span style="color: #848ea9;">'A'</span> &amp;&amp; c &lt;= <span style="color: #848ea9;">'Z'</span>)
        <span style="color: #56b4e9; font-weight: bold;">return</span> c + <span style="color: #848ea9;">'a'</span> - <span style="color: #848ea9;">'A'</span>;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
        <span style="color: #56b4e9; font-weight: bold;">return</span> c;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">yy</span> = <span style="color: #848ea9;">'Z'</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>;

    xx = lower(yy);
    printf(<span style="color: #848ea9;">"%d"</span>, xx);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6efbe47" class="outline-3">
<h3 id="org6efbe47">function: rand</h3>
<div class="outline-text-3" id="text-org6efbe47">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">next</span> = 1;
<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rand: return pseudo-random integer on 0..32767 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">rand</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
    next = next * 1103515245 + 12345;
    <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">int</span>) (next / 65536) % 32768;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">srand: set seed for rand() </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">srand</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">seed</span>)
{
    next = seed;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++) {
        srand(i);

        xx = rand();
        printf(<span style="color: #848ea9;">"%d\n"</span>, xx);
    }

}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0bf3c74" class="outline-3">
<h3 id="org0bf3c74">function: squeeze</h3>
<div class="outline-text-3" id="text-org0bf3c74">
<ul class="org-ul">
<li>ascii automatically converted to integers?</li>
<li>this works but i don't understand how</li>
</ul>

<div class="org-src-container">
<pre class="src src-c">
<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">squeeze: delete all c from s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">squeeze</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = j = 0; s[i] != <span style="color: #848ea9;">'\0'</span>; i++)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] != c)
            s[j++] = s[i];
    s[j] = <span style="color: #848ea9;">'\0'</span>;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[] = <span style="color: #848ea9;">"house"</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span> = <span style="color: #848ea9;">'o'</span>;                <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">o is 111</span>
    squeeze(s, c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org621dfd5" class="outline-3">
<h3 id="org621dfd5">function: strcat</h3>
<div class="outline-text-3" id="text-org621dfd5">
<ul class="org-ul">
<li>this only copies the first character of c</li>
<li>had to rename strcat to xstrcat</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcat: concatenate t to end of s; s must be big enough </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">xstrcat</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">t</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    i = j = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (s[i] != <span style="color: #848ea9;">'\0'</span>)        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find end of s </span><span style="color: #009e73; font-style: italic;">*/</span>
        i++;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[i++] = t[j++]) != <span style="color: #848ea9;">'\0'</span>)   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">copy t </span><span style="color: #009e73; font-style: italic;">*/</span>
        ;
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">n</span>[] = <span style="color: #848ea9;">"new"</span>;
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">c</span>[] = <span style="color: #848ea9;">"car"</span>;
    xstrcat(n, c);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c0a960" class="outline-3">
<h3 id="org6c0a960">function: getbits</h3>
<div class="outline-text-3" id="text-org6c0a960">
<ul class="org-ul">
<li>doesn't work like it should</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getbits: get n bits from position p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #d55e00;">getbits</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #56b4e9; font-weight: bold;">return</span> (x &gt;&gt; (p + 1 - n)) &amp; ~(~0 &lt;&lt; n);
}

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">ff</span>;
    <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 4;

    ff = getbits(x, 8, 4);
    printf(<span style="color: #848ea9;">"%d"</span>, ff);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org86ce606" class="outline-3">
<h3 id="org86ce606">function: bitcount</h3>
<div class="outline-text-3" id="text-org86ce606">
<ul class="org-ul">
<li>haven't looked at this</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">bitcount: count 1 bits in x </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">bitcount</span>(<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">x</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">b</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (b = 0; x != 0; x &gt;&gt;= 1)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (x &amp; 01)
            b++;
    <span style="color: #56b4e9; font-weight: bold;">return</span> b;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org08c225a" class="outline-2">
<h2 id="org08c225a">Chapter 3 - Control Flow</h2>
<div class="outline-text-2" id="text-org08c225a">
</div>
<div id="outline-container-orgc4de3bd" class="outline-3">
<h3 id="orgc4de3bd">function: binsearch</h3>
<div class="outline-text-3" id="text-orgc4de3bd">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find x in v[0] &lt;= v[1] &lt;= ... &lt;= v[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">low</span>, <span style="color: #e69f00; font-weight: bold;">high</span>, <span style="color: #e69f00; font-weight: bold;">mid</span>;

    low = 0;
    high = n - 1;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt;= high) {
        mid = (low + high) / 2;
        <span style="color: #56b4e9; font-weight: bold;">if</span> (x &lt; v[mid])
            high = mid + 1;
        <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (x &gt; v[mid])
            low = mid + 1;
        <span style="color: #56b4e9; font-weight: bold;">else</span>                    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">found match </span><span style="color: #009e73; font-style: italic;">*/</span>
            <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;                  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no match </span><span style="color: #009e73; font-style: italic;">*/</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org088a1fa" class="outline-3">
<h3 id="org088a1fa">program: count digits, white space, others (switch)</h3>
<div class="outline-text-3" id="text-org088a1fa">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count digits, white space, others </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">nwhite</span>, <span style="color: #e69f00; font-weight: bold;">nother</span>, <span style="color: #e69f00; font-weight: bold;">ndigit</span>[10];

    nwhite = nother = 0;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++)
        ndigit[i] = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF) {
        <span style="color: #56b4e9; font-weight: bold;">switch</span> (c) {
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'0'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'1'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'2'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'3'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'4'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'5'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'6'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'7'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'8'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'9'</span>:
            ndigit[c - <span style="color: #848ea9;">'0'</span>]++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">' '</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\t'</span>:
            nwhite++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">default</span>:
            nother++;
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        }
    }
    printf(<span style="color: #848ea9;">"digits ="</span>);
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; 10; i++)
        printf(<span style="color: #848ea9;">" %d"</span>, ndigit[i]);
    printf(<span style="color: #848ea9;">", white space = %d, other = %d\n"</span>, nwhite, nother);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<pre class="example">
$ ./a.out
123 45
digits = 0 1 1 1 1 1 0 0 0 0, white space = 2, other = 0
</pre>
</div>
</div>

<div id="outline-container-org01ec0fa" class="outline-3">
<h3 id="org01ec0fa">function: atoi</h3>
<div class="outline-text-3" id="text-org01ec0fa">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert s to integer; version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; isspace(s[i]); i++);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    sign = (s[i] == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'+'</span> || s[i] == <span style="color: #848ea9;">'-'</span>)     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip sign </span><span style="color: #009e73; font-style: italic;">*/</span>
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; isdigit(s[i]); i++)
        n = 10 * n + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> sign * n;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b5d66c" class="outline-3">
<h3 id="org9b5d66c">function: shellsort</h3>
<div class="outline-text-3" id="text-org9b5d66c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">shellsort: sort v[0]...v[n-1] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">shellsort</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gap</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>, <span style="color: #e69f00; font-weight: bold;">temp</span>;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (gap = n / 2; gap &gt; 0; gap /= 2)
        <span style="color: #56b4e9; font-weight: bold;">for</span> (i = gap; i &lt; n; i++)
            <span style="color: #56b4e9; font-weight: bold;">for</span> (j = i - gap; j &gt;= 0 &amp;&amp; v[j] &gt; v[j + gap]; j -= gap) {
                temp = v[j];
                v[j] = v[j + gap];
                v[j + gap] = temp;
            }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c6a491" class="outline-3">
<h3 id="org1c6a491">function: reverse</h3>
<div class="outline-text-3" id="text-org1c6a491">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse: reverse string s in place </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">reverse</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0, j = strlen(s) - 1; i &lt; j; i++, j--) {
        c = s[i];
        s[i] = s[j];
        s[j] = c;
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffef630" class="outline-3">
<h3 id="orgffef630">function: itoa</h3>
<div class="outline-text-3" id="text-orgffef630">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">itoa: convert n to characters in s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">itoa</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">if</span> ((sign = n) &lt; 0)         <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">record sign </span><span style="color: #009e73; font-style: italic;">*/</span>
        n = -n;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make n positive </span><span style="color: #009e73; font-style: italic;">*/</span>
    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">do</span> {                        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">generate digits in reverse order </span><span style="color: #009e73; font-style: italic;">*/</span>
        s[i++] = n % 10 + <span style="color: #848ea9;">'0'</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get next digit </span><span style="color: #009e73; font-style: italic;">*/</span>
    } <span style="color: #56b4e9; font-weight: bold;">while</span> ((n /= 10) &gt; 0);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">delete it </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">if</span> (sign &lt; 0)
        s[i++] = <span style="color: #848ea9;">'-'</span>;
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    reverse(s);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f59d66" class="outline-3">
<h3 id="org2f59d66">function: trim</h3>
<div class="outline-text-3" id="text-org2f59d66">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">trim: remove trailing blanks, tabs, newlines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">trim</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (n = strlen(s) - 1; n &gt;= 0; n--)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (s[n] != <span style="color: #848ea9;">' '</span> &amp;&amp; s[n] != <span style="color: #848ea9;">'\t'</span> &amp;&amp; s[n] != <span style="color: #848ea9;">'\n'</span>)
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
    s[n + 1] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org736b273" class="outline-2">
<h2 id="org736b273">Chapter 4 - Functions and Program Structure</h2>
<div class="outline-text-2" id="text-org736b273">
</div>
<div id="outline-container-orgd0ae48a" class="outline-3">
<h3 id="orgd0ae48a">program: find all lines matching pattern</h3>
<div class="outline-text-3" id="text-orgd0ae48a">
<pre class="example">
41 ; not sure what this does
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum input line length </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strindex</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">source</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">searchfor</span>[]);

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">pattern</span>[] = <span style="color: #848ea9;">"ould"</span>;        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pattern to search for </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find all lines matching pattern </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

    <span style="color: #56b4e9; font-weight: bold;">while</span> (xgetline(line, MAXLINE) &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> (strindex(line, pattern) &gt;= 0) {
            printf(<span style="color: #848ea9;">"%s"</span>, line);
            found++;
        }
    <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: get line into s, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">xgetline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">i</span>;

    i = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (--lim &gt; 0 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span style="color: #848ea9;">'\n'</span>)
        s[i++] = c;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'\n'</span>)
        s[i++] = c;
    s[i] = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> i;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strindex: return index of t in s, -1 if none </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strindex</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[], <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">t</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">j</span>, <span style="color: #e69f00; font-weight: bold;">k</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] != <span style="color: #848ea9;">'\0'</span>; i++) {
        <span style="color: #56b4e9; font-weight: bold;">for</span> (j = i, k = 0; t[k] != <span style="color: #848ea9;">'\0'</span> &amp;&amp; s[j] == t[k]; j++, k++);
        <span style="color: #56b4e9; font-weight: bold;">if</span> (k &gt; 0 &amp;&amp; t[k] == <span style="color: #848ea9;">'\0'</span>)
            <span style="color: #56b4e9; font-weight: bold;">return</span> i;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb929ad" class="outline-3">
<h3 id="orgfb929ad">function: atof</h3>
<div class="outline-text-3" id="text-orgfb929ad">
<pre class="example">
ascii to float
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atof: convert string s to double </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>, <span style="color: #e69f00; font-weight: bold;">power</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; isspace(s[i]); i++);    <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    sign = (s[i] == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'+'</span> || s[i] == <span style="color: #848ea9;">'-'</span>)
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (val = 0.0; isdigit(s[i]); i++)
        val = 10.0 * val + (s[i] - <span style="color: #848ea9;">'0'</span>);
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'.'</span>)
        i++;
    <span style="color: #56b4e9; font-weight: bold;">for</span> (power = 1.0; isdigit(s[i]); i++) {
        val = 10.0 * val + (s[i] - <span style="color: #848ea9;">'0'</span>);
        power *= 10;
    }
    <span style="color: #56b4e9; font-weight: bold;">return</span> sign * val / power;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org22d09f9" class="outline-3">
<h3 id="org22d09f9">program: calculator</h3>
<div class="outline-text-3" id="text-org22d09f9">
<p>
need to include and change getline
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 100

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rudimentary calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">sum</span>, <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span>[]);
    <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

    sum = 0;
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0)
        printf(<span style="color: #848ea9;">"\t%g\n"</span>, sum += atof(line));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4910d5a" class="outline-3">
<h3 id="org4910d5a">function: atoi (rewrite)</h3>
<div class="outline-text-3" id="text-org4910d5a">
<pre class="example">
ascii to integer
</pre>

<p>
Given atof, properly declared, we could write atoi (convert a string
to int) in terms of it:
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">atoi: convert string s to integer using atof </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">atoi</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">atof</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[]);
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">int</span>) atof(s);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org31931f8" class="outline-3">
<h3 id="org31931f8">program: reverse polish calculator</h3>
<div class="outline-text-3" id="text-org31931f8">
<p>
push and pop?
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">for atof() </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXOP</span> 100       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max size of operand or operator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NUMBER</span> <span style="color: #848ea9;">'0'</span>      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">signal that a number was found </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> []);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span>);
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse Polish calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">op2</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[MAXOP];

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = getop(s)) != EOF) {
    <span style="color: #56b4e9; font-weight: bold;">switch</span> (type) {
    <span style="color: #56b4e9; font-weight: bold;">case</span> NUMBER:
      push(atof(s));
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'+'</span>:
      push(pop() + pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'*'</span>:
      push(pop() * pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'-'</span>:
      op2 = pop();
      push(pop() - op2);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'/'</span>:
      op2 = pop();
      <span style="color: #56b4e9; font-weight: bold;">if</span> (op2 != 0.0)
        push(pop() / op2);
      <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"error: zero divisor\n"</span>);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
      printf(<span style="color: #848ea9;">"\t%.8g\n"</span>, pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">default</span>:
      printf(<span style="color: #848ea9;">"error: unknown command %s\n"</span>, s);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6308984" class="outline-3">
<h3 id="org6308984">functions: push &amp; pop</h3>
<div class="outline-text-3" id="text-org6308984">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXVAL</span> 100 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum depth of val stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">sp</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free stack position </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>[MAXVAL]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">value stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push: push f onto value stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">f</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &lt; MAXVAL)
    val[sp++] = f;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: stack full, can't push %g\n"</span>, f);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pop: pop and return top value from stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">return</span> val[--sp];
  <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: stack empty\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0.0;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c3ef88" class="outline-3">
<h3 id="org6c3ef88">program: complete cal</h3>
<div class="outline-text-3" id="text-org6c3ef88">
<p>
missing getopt()
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>     <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">for atof() </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXOP</span> 100       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max size of operand or operator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NUMBER</span> <span style="color: #848ea9;">'0'</span>      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">signal that a number was found </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> []);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span>);
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">reverse Polish calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">op2</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[MAXOP];

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = getop(s)) != EOF) {
    <span style="color: #56b4e9; font-weight: bold;">switch</span> (type) {
    <span style="color: #56b4e9; font-weight: bold;">case</span> NUMBER:
      push(atof(s));
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'+'</span>:
      push(pop() + pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'*'</span>:
      push(pop() * pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'-'</span>:
      op2 = pop();
      push(pop() - op2);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'/'</span>:
      op2 = pop();
      <span style="color: #56b4e9; font-weight: bold;">if</span> (op2 != 0.0)
        push(pop() / op2);
      <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"error: zero divisor\n"</span>);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'\n'</span>:
      printf(<span style="color: #848ea9;">"\t%.8g\n"</span>, pop());
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    <span style="color: #56b4e9; font-weight: bold;">default</span>:
      printf(<span style="color: #848ea9;">"error: unknown command %s\n"</span>, s);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXVAL</span> 100 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">maximum depth of val stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">sp</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free stack position </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">val</span>[MAXVAL]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">value stack </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push: push f onto value stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">push</span>(<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">f</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &lt; MAXVAL)
    val[sp++] = f;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: stack full, can't push %g\n"</span>, f);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pop: pop and return top value from stack </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #d55e00;">pop</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (sp &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">return</span> val[--sp];
  <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: stack empty\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0.0;
  }
}

<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getop: get next character or numeric operand </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[0] = c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  s[1] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != <span style="color: #848ea9;">'.'</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> c; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (isdigit(c)) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect integer part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'.'</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect fraction part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  s[i] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> NUMBER;
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">BUFSIZE</span> 100

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">buf</span>[BUFSIZE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">buffer for ungetch </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">bufp</span> = 0;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position in buf </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get a (possibly pushed-back) character </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (bufp &gt; 0) ? buf[--bufp] : getchar();
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push character back on input </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (bufp &gt;= BUFSIZE)
    printf(<span style="color: #848ea9;">"ungetch: too many characters\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    buf[bufp++] = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org027bed8" class="outline-3">
<h3 id="org027bed8">function: getop</h3>
<div class="outline-text-3" id="text-org027bed8">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getop: get next character or numeric operand </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getop</span>(<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[0] = c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  s[1] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != <span style="color: #848ea9;">'.'</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> c; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (isdigit(c)) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect integer part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'.'</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">collect fraction part </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (isdigit(s[++i] = c = getch()))
      ;
  s[i] = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> NUMBER;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8642f5c" class="outline-3">
<h3 id="org8642f5c">funcions: getch &amp; ungetch</h3>
<div class="outline-text-3" id="text-org8642f5c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">BUFSIZE</span> 100

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">buf</span>[BUFSIZE];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">buffer for ungetch </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">bufp</span> = 0;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position in buf </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">get a (possibly pushed-back) character </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (bufp &gt; 0) ? buf[--bufp] : getchar();
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">push character back on input </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (bufp &gt;= BUFSIZE)
    printf(<span style="color: #848ea9;">"ungetch: too many characters\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    buf[bufp++] = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9261f8e" class="outline-3">
<h3 id="org9261f8e">function: printd (recursion example)</h3>
<div class="outline-text-3" id="text-org9261f8e">
<pre class="example">
print decimal
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">printd: print n in decimal </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">printd</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (n &lt; 0) {
    putchar(<span style="color: #848ea9;">'-'</span>);
    n = -n;
  }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (n / 10)
    printd(n / 10);
  putchar(n % 10 + <span style="color: #848ea9;">'0'</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bb0785" class="outline-3">
<h3 id="org3bb0785">functions: qsort &amp; swap</h3>
<div class="outline-text-3" id="text-org3bb0785">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
    <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>);

    <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right)          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
        <span style="color: #56b4e9; font-weight: bold;">return</span>;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
    swap(v, left, (left + right) / 2);  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">move partition elem </span><span style="color: #009e73; font-style: italic;">*/</span>
    last = left;                <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">to v[0] </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left + 1; i &lt;= right; i++) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">partition </span><span style="color: #009e73; font-style: italic;">*/</span>
        <span style="color: #56b4e9; font-weight: bold;">if</span> (v[i] &lt; v[left])
            swap(v, ++last, i);
    swap(v, left, last);        <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">restore partition elem </span><span style="color: #009e73; font-style: italic;">*/</span>
    qsort(v, left, last - 1);
    qsort(v, last + 1, right);
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">swap: interchange v[i] and v[j] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>)
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

    temp = v[i];
    v[i] = v[j];
    v[j] = temp;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org825c7b5" class="outline-2">
<h2 id="org825c7b5">Chapter 5 - Pointers and Arrays</h2>
<div class="outline-text-2" id="text-org825c7b5">
</div>
<div id="outline-container-org73d2d80" class="outline-3">
<h3 id="org73d2d80">function: swap (with pointers)</h3>
<div class="outline-text-3" id="text-org73d2d80">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">px</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">py</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">interchange *px and *py </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = *px;
  *px = *py;
  *py = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org02c93cb" class="outline-3">
<h3 id="org02c93cb">function: getint</h3>
<div class="outline-text-3" id="text-org02c93cb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getint: get next integer from input into *pn </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getint</span>(<span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pn</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">sign</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (isspace(c = getch())) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">skip white space </span><span style="color: #009e73; font-style: italic;">*/</span>
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isdigit(c) &amp;&amp; c != EOF &amp;&amp; c != <span style="color: #848ea9;">'+'</span> &amp;&amp; c != <span style="color: #848ea9;">'-'</span>) {
    ungetch(c); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">it is not a number </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  }
  sign = (c == <span style="color: #848ea9;">'-'</span>) ? -1 : 1;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'+'</span> || c == <span style="color: #848ea9;">'-'</span>)
    c = getch();
  <span style="color: #56b4e9; font-weight: bold;">for</span> (*pn = 0; isdigit(c), c = getch())
    *pn = 10 * *pn + (c - <span style="color: #848ea9;">'0'</span>);
  *pn *= sign;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    ungetch(c);
  <span style="color: #56b4e9; font-weight: bold;">return</span> c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org258bf5c" class="outline-3">
<h3 id="org258bf5c">function: strlen</h3>
<div class="outline-text-3" id="text-org258bf5c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; *s != <span style="color: #848ea9;">'\0'</span>, s++)
    n++;
  <span style="color: #56b4e9; font-weight: bold;">return</span> n;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce0a000" class="outline-3">
<h3 id="orgce0a000">functions: alloc &amp; afree</h3>
<div class="outline-text-3" id="text-orgce0a000">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">ALLOCSIZE</span> 10000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">size of available space </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">allocbuf</span>[ALLOCSIZE]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">storage for alloc </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">allocp</span> = allocbuf; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next free position </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">alloc</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">return pointer to n characters </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (allocbuf + ALLOCSIZE - allocp &gt;= n) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">it fits </span><span style="color: #009e73; font-style: italic;">*/</span>
    allocp += n;
    <span style="color: #56b4e9; font-weight: bold;">return</span> allocp - n; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">old p </span><span style="color: #009e73; font-style: italic;">*/</span>
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not enough room </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">afree</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">free storage pointed to by p </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p &gt;= allocbuf &amp;&amp; p &lt; allocbuf + ALLOCSIZE)
    allocp = p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9791fbb" class="outline-3">
<h3 id="org9791fbb">function: strlen</h3>
<div class="outline-text-3" id="text-org9791fbb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strlen: return length of string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strlen</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span> = s;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (*p != <span style="color: #848ea9;">'\0'</span>)
    p++;
  <span style="color: #56b4e9; font-weight: bold;">return</span> p - s;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf42f5eb" class="outline-3">
<h3 id="orgf42f5eb">function: strcpy (using arrays)</h3>
<div class="outline-text-3" id="text-orgf42f5eb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; array subscript version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((s[i] = t[i]) != <span style="color: #848ea9;">'\0'</span>)
    i++;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org940831a" class="outline-3">
<h3 id="org940831a">function: strcpy (using pointers)</h3>
<div class="outline-text-3" id="text-org940831a">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  i = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((*s = *t) != <span style="color: #848ea9;">'\0'</span>) {
    s++;
    t++;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb4ebdc" class="outline-3">
<h3 id="orgeb4ebdc">function: strcpy (experienced programmers)</h3>
<div class="outline-text-3" id="text-orgeb4ebdc">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((*s++ = *t++) != <span style="color: #848ea9;">'\0'</span>)
    ;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6607a52" class="outline-3">
<h3 id="org6607a52">function: strcpy (v3)</h3>
<div class="outline-text-3" id="text-org6607a52">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcpy: copy t to s; pointer version 3 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">strcpy</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (*s++ = *t++)
    ;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org317c680" class="outline-3">
<h3 id="org317c680">function: strcmp (no pointers)</h3>
<div class="outline-text-3" id="text-org317c680">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcmp: return &lt;0 if s&lt;t, 0 if s==t, &gt;0 if s&gt;t </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; s[i] == t[i]; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (s[i] == <span style="color: #848ea9;">'\0'</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">return</span> s[i] - t[i];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org310aaa1" class="outline-3">
<h3 id="org310aaa1">function: strcmp (with pointers)</h3>
<div class="outline-text-3" id="text-org310aaa1">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">strcmp: return &lt;0 if s&lt;t, 0 if s==t, &gt;0 if s&gt;t </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">strcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">t</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">for</span> ( ; *s == *t; s++, t++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (*s == <span style="color: #848ea9;">'\0'</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">return</span> *s - *t;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2be6ee4" class="outline-3">
<h3 id="org2be6ee4">program: sort input lines</h3>
<div class="outline-text-3" id="text-org2be6ee4">
<pre class="example">
+ readlines and writelines

The function getline is from Section 1.9.

55.c:39:33: error: lvalue required as left operand of assignment
    if (nlines &gt;= maxlines || p = alloc(len) == NULL)
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINES</span> 5000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max #lines to be sorted </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[MAXLINES]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pointers to text lines </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">sort input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of input lines read </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> ((nlines = readlines(lineptr, MAXLINES)) &gt;= 0) {
    qsort(lineptr, 0, nlines-1);
    writelines(lineptr, nlines);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"error: input too big to sort\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  }
}

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLEN</span> 1000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max length of any input line </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">alloc</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">readlines: read input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">maxlines</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>, <span style="color: #e69f00; font-weight: bold;">nlines</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLEN];

  nlines = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((len = getline(line, MAXLEN)) &gt; 0)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (nlines &gt;= maxlines || p == alloc(len) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
    <span style="color: #56b4e9; font-weight: bold;">else</span> {
      line[len-1] = <span style="color: #848ea9;">'\0'</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">delete newline </span><span style="color: #009e73; font-style: italic;">*/</span>
      strcpy(p, line);
      lineptr[nlines++] = p;
    }
  <span style="color: #56b4e9; font-weight: bold;">return</span> nlines;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">writelines: write output lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 0; i &lt; nlines; i++)
    printf(<span style="color: #848ea9;">"%s\n"</span>, lineptr[i]);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfebfd5c" class="outline-3">
<h3 id="orgfebfd5c">function: writelines</h3>
<div class="outline-text-3" id="text-orgfebfd5c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">writelines: write output lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (nlines-- &gt; 0)
    printf(<span style="color: #848ea9;">"%s\n"</span>, *lineptr++);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1252086" class="outline-3">
<h3 id="org1252086">function: qsort</h3>
<div class="outline-text-3" id="text-org1252086">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>);

  <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span>;          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
  swap(v, left, (left + right)/2);
  last = left;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left+1; i &lt;= right; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (strcmp(v[i], v[left]) &lt; 0)
      swap(v, ++last, i);
  swap(v, left, last);
  qsort(v, left, last-1);
  qsort(v, last+1, right);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf38a0e" class="outline-3">
<h3 id="orgdf38a0e">function: swap (using char*)</h3>
<div class="outline-text-3" id="text-orgdf38a0e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">swap: interchange v[i] and v[j] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>)
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = v[i];
  v[i] = v[j];
  v[j] = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc1f4e9" class="outline-3">
<h3 id="orgcc1f4e9">multi-dimensional array: daytab, functions: day_of_year &amp; month_day</h3>
<div class="outline-text-3" id="text-orgcc1f4e9">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">daytab</span>[2][13] = {
  {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
  {0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}
};

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">day_of_year: set day of year from month &amp; day </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">day_of_year</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">year</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">month</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">day</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">leap</span>;
  leap = year%4 == 0 &amp;&amp; year%100 != 0 || year%400 == 0;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt; month; i++)
    day += daytab[leap][i];
  <span style="color: #56b4e9; font-weight: bold;">return</span> day;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">month_day: set month, day from day of year </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">month_day</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">year</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">yearday</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pmonth</span>, <span style="color: #0072b2; font-weight: bold;">int</span> *<span style="color: #e69f00; font-weight: bold;">pday</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">leap</span>;

  leap = year%4 == 0 &amp;&amp; year%100 != 0 || year%400 == 0;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; yearday &gt; daytab[leap][i]; i++)
    yearday -= daytab[leap][i];
  *pmonth = i;
  *pday = yearday;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c7521e" class="outline-3">
<h3 id="org7c7521e">function: month_name</h3>
<div class="outline-text-3" id="text-org7c7521e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">month_name: return name of n-th month </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">month_name</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>[] = {
    <span style="color: #848ea9;">"Illegal month"</span>,
    <span style="color: #848ea9;">"January"</span>, <span style="color: #848ea9;">"February"</span>, <span style="color: #848ea9;">"March"</span>,
    <span style="color: #848ea9;">"April"</span>, <span style="color: #848ea9;">"May"</span>, <span style="color: #848ea9;">"June"</span>,
    <span style="color: #848ea9;">"July"</span>, <span style="color: #848ea9;">"August"</span>, <span style="color: #848ea9;">"September"</span>,
    <span style="color: #848ea9;">"October"</span>, <span style="color: #848ea9;">"November"</span>, <span style="color: #848ea9;">"December"</span>
  };

  <span style="color: #56b4e9; font-weight: bold;">return</span> (n &lt; 1 || n &gt; 12) ? name[0] : name[n];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6bc22c" class="outline-3">
<h3 id="orge6bc22c">program: krecho v1</h3>
<div class="outline-text-3" id="text-orge6bc22c">
<pre class="example">
kr echo
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">echo command-line arguments; 1st version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = 1; i &lt; argc; i++)
    printf(<span style="color: #848ea9;">"%s%s"</span>, argv[i], (i &lt; argc-1) ? <span style="color: #848ea9;">" "</span> : <span style="color: #848ea9;">""</span>);
  printf(<span style="color: #848ea9;">"\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba43fa0" class="outline-3">
<h3 id="orgba43fa0">program: krecho v2</h3>
<div class="outline-text-3" id="text-orgba43fa0">
<pre class="example">
kr echo
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">echo command-line arguments; 2nd version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0)
    printf(<span style="color: #848ea9;">"%s%s"</span>, *++argv, (argc &gt; 1) ? <span style="color: #848ea9;">" "</span> : <span style="color: #848ea9;">""</span>);
  printf(<span style="color: #848ea9;">"\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<p>
<code>printf((argc &gt; 1) ? "%s " : "%s", *++argv);</code>
</p>

<p>
Alternatively, we could write the printf statement as
</p>

<p>
This shows that the format argument of printf can be an expression too.
</p>
</div>
</div>

<div id="outline-container-orgd1d2724" class="outline-3">
<h3 id="orgd1d2724">program: main</h3>
<div class="outline-text-3" id="text-orgd1d2724">
<p>
uses getline
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find: print lines that match pattern from 1st arg </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc != 2)
    printf(<span style="color: #848ea9;">"Usage: find pattern\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0)
      <span style="color: #56b4e9; font-weight: bold;">if</span> (strstr(line, argv[1]) != <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
        printf(<span style="color: #848ea9;">"%s"</span>, line);
        found++;
      }
  <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9642ada" class="outline-3">
<h3 id="org9642ada">program: find: print lines that match pattern from 1st arg</h3>
<div class="outline-text-3" id="text-org9642ada">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINE</span> 1000

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">find: print lines that match pattern from 1st arg </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">line</span>[MAXLINE];
  <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">lineno</span> = 0;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #e69f00; font-weight: bold;">except</span> = 0, <span style="color: #e69f00; font-weight: bold;">number</span> = 0, <span style="color: #e69f00; font-weight: bold;">found</span> = 0;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0 &amp;&amp; (*++argv)[0] == <span style="color: #848ea9;">'-'</span>)
    <span style="color: #56b4e9; font-weight: bold;">while</span> (c = *++argv[0])
      <span style="color: #56b4e9; font-weight: bold;">switch</span> (c) {
      <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'x'</span>:
        except = 1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'n'</span>:
        number = 1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      <span style="color: #56b4e9; font-weight: bold;">default</span>:
        printf(<span style="color: #848ea9;">"find: illegal option %c\n"</span>, c);
        argc = 0;
        found = -1;
        <span style="color: #56b4e9; font-weight: bold;">break</span>;
      }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc != 1)
    printf(<span style="color: #848ea9;">"Usage: find -x -n pattern\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (getline(line, MAXLINE) &gt; 0) {
      lineno++;
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((strstr(line, *argv) != <span style="color: #d55e00; font-weight: bold;">NULL</span>) != except) {
        <span style="color: #56b4e9; font-weight: bold;">if</span> (number)
          printf(<span style="color: #848ea9;">"%ld:"</span>, lineno);
        printf(<span style="color: #848ea9;">"%s"</span>, line);
        found++;
      }
    }
  <span style="color: #56b4e9; font-weight: bold;">return</span> found;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc53534" class="outline-3">
<h3 id="orgbc53534">program: sort input lines</h3>
<div class="outline-text-3" id="text-orgbc53534">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXLINES</span> 5000 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">max #lines to be sorted </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[MAXLINES]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">pointers to text lines </span><span style="color: #009e73; font-style: italic;">*/</span>


<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">readlines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">writelines</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>);

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">lineptr</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>,
           <span style="color: #0072b2; font-weight: bold;">int</span> (*<span style="color: #d55e00;">comp</span>)(<span style="color: #0072b2; font-weight: bold;">void</span> *, <span style="color: #0072b2; font-weight: bold;">void</span> *));
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">numcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">sort input lines </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nlines</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of input lines read </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numeric</span> = 0; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">1 if numeric sort </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc &gt; 1 &amp;&amp; strcmp(argv[1], <span style="color: #848ea9;">"-n"</span>) == 0)
    numeric = 1;
  <span style="color: #56b4e9; font-weight: bold;">if</span> ((nlines = readlines(lineptr, MAXLINES)) &gt;= 0) {
    qsort((<span style="color: #0072b2; font-weight: bold;">void</span>**) lineptr, 0, nlines-1,
          (<span style="color: #0072b2; font-weight: bold;">int</span> (*)(<span style="color: #0072b2; font-weight: bold;">void</span>*,<span style="color: #0072b2; font-weight: bold;">void</span>*))(numeric ? numcmp : strcmp));
    writelines(lineptr, nlines);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> {
    printf(<span style="color: #848ea9;">"input too big to sort\n"</span>);
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5154945" class="outline-3">
<h3 id="org5154945">function: qsort</h3>
<div class="outline-text-3" id="text-org5154945">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">qsort: sort v[left]...v[right] into increasing order </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">qsort</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">left</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">right</span>,
           <span style="color: #0072b2; font-weight: bold;">int</span> (*<span style="color: #d55e00;">comp</span>)(<span style="color: #0072b2; font-weight: bold;">void</span> *, <span style="color: #0072b2; font-weight: bold;">void</span> *))
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #e69f00; font-weight: bold;">last</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span>, <span style="color: #0072b2; font-weight: bold;">int</span>);

  <span style="color: #56b4e9; font-weight: bold;">if</span> (left &gt;= right) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">do nothing if array contains </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span>;          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fewer than two elements </span><span style="color: #009e73; font-style: italic;">*/</span>
  swap(v, left, (left + right)/2);
  last = left;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (i = left+1; i &lt;= right; i++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((*comp)(v[i], v[left]) &lt; 0)
      swap(v, ++last, i);
  swap(v, left, last);
  qsort(v, left, last-1, comp);
  qsort(v, last+1, right, comp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7eed212" class="outline-3">
<h3 id="org7eed212">function: numcmp</h3>
<div class="outline-text-3" id="text-org7eed212">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">numcmp: compare s1 and s2 numerically </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">numcmp</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s1</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s2</span>)
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">v1</span>, <span style="color: #e69f00; font-weight: bold;">v2</span>;

  v1 = atof(s1);
  v2 = atof(s2);
  <span style="color: #56b4e9; font-weight: bold;">if</span> (v1 &lt; v2)
    <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (v1 &gt; v2)
    <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org48b5a4b" class="outline-3">
<h3 id="org48b5a4b">function: swap (using void*)</h3>
<div class="outline-text-3" id="text-org48b5a4b">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">swap</span>(<span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">v</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span>;)
{
  <span style="color: #0072b2; font-weight: bold;">void</span> *<span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp = v[i];
  v[i] = v[j];
  v[j] = temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2bc463a" class="outline-3">
<h3 id="org2bc463a">functions: dcl &amp; dirdcl</h3>
<div class="outline-text-3" id="text-org2bc463a">
<pre class="example">
recursive decent parser
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">dcl: parse a declarator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ns</span>;

  <span style="color: #56b4e9; font-weight: bold;">for</span> (ns = 0; gettoken() == <span style="color: #848ea9;">'*'</span>; ) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count *'s </span><span style="color: #009e73; font-style: italic;">*/</span>
    ns++;
  dirdcl();
  <span style="color: #56b4e9; font-weight: bold;">while</span> (ns-- &gt; 0)
    strcat(out, <span style="color: #848ea9;">" pointer to"</span>);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">dirdcl: parse a direct declarator </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dirdcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;

  <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype == <span style="color: #848ea9;">'('</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">( dcl ) </span><span style="color: #009e73; font-style: italic;">*/</span>
    dcl();
    <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype != <span style="color: #848ea9;">')'</span>)
      printf(<span style="color: #848ea9;">"error: missing )\n"</span>);
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype == NAME) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">variable name </span><span style="color: #009e73; font-style: italic;">*/</span>
    strcpy(name, token);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    printf(<span style="color: #848ea9;">"error: expected name or (dcl)\n"</span>);
  <span style="color: #56b4e9; font-weight: bold;">while</span> ((type=gettoken()) == PARENS || type == BRACKETS)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (type == PARENS)
      strcat(out, <span style="color: #848ea9;">" function returning"</span>);
    <span style="color: #56b4e9; font-weight: bold;">else</span> {
      strcat(out, <span style="color: #848ea9;">" array"</span>);
      strcat(out, token);
      strcat(out, <span style="color: #848ea9;">" of"</span>);
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org175d0d8" class="outline-3">
<h3 id="org175d0d8">program: convert declaration to words</h3>
<div class="outline-text-3" id="text-org175d0d8">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"krbook.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXTOKEN</span> 100

<span style="color: #56b4e9; font-weight: bold;">enum</span> { <span style="color: #e69f00; font-weight: bold;">NAME</span>, <span style="color: #e69f00; font-weight: bold;">PARENS</span>, <span style="color: #e69f00; font-weight: bold;">BRACKETS</span> };

<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">dirdcl</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">gettoken</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tokentype</span>;             <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">type of last token </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">token</span>[MAXTOKEN];      <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">last token string </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">name</span>[MAXTOKEN];       <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">identifier name </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">datatype</span>[MAXTOKEN];   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">data type = char, int, etc. </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">out</span>[1000];

<span style="color: #d55e00;">main</span>() <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">convert declaration to words </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #56b4e9; font-weight: bold;">while</span> (gettoken() != EOF) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">1st token on line </span><span style="color: #009e73; font-style: italic;">*/</span>
    strcpy(datatype, token); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">is the datatype </span><span style="color: #009e73; font-style: italic;">*/</span>
    out[0] = <span style="color: #848ea9;">'\0'</span>;
    dcl(); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">parse rest of line </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">if</span> (tokentype != <span style="color: #848ea9;">'\n'</span>)
      printf(<span style="color: #848ea9;">"syntax error\n"</span>);
    printf(<span style="color: #848ea9;">"%s: %s %s\n"</span>, name, out, datatype);
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org28cc1cc" class="outline-3">
<h3 id="org28cc1cc">function: gettoken</h3>
<div class="outline-text-3" id="text-org28cc1cc">
<p>
think that i'm missing some global variables
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">gettoken</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">return next token </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span> = token;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getch()) == <span style="color: #848ea9;">' '</span> || c == <span style="color: #848ea9;">'\t'</span>)
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'('</span>) {
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((c = getch()) == <span style="color: #848ea9;">')'</span>) {
      strcpy(token, <span style="color: #848ea9;">"()"</span>);
      <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = PARENS;
    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
      ungetch(c);
      <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = <span style="color: #848ea9;">'('</span>;
    }
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (c == <span style="color: #848ea9;">'['</span>) {
    <span style="color: #56b4e9; font-weight: bold;">for</span> (*p++ = c; (*p++ = getch()) != <span style="color: #848ea9;">']'</span>; )
      ;
    *p = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = BRACKETS;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(c)) {
    <span style="color: #56b4e9; font-weight: bold;">for</span> (*p++ = c; isalnum(c = getch()); )
      *p++ = c;
    *p = <span style="color: #848ea9;">'\0'</span>;
    ungetch(c);
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = NAME;
  } <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> tokentype = c;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e78a7d" class="outline-3">
<h3 id="org6e78a7d">program: undcl</h3>
<div class="outline-text-3" id="text-org6e78a7d">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">undcl: convert word descriptions to declarations </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">temp</span>[MAXTOKEN];

  <span style="color: #56b4e9; font-weight: bold;">while</span> (gettoken() != EOF) {
    strcpy(out, token);
    <span style="color: #56b4e9; font-weight: bold;">while</span> ((type = gettoken()) != <span style="color: #848ea9;">'\n'</span>)
      <span style="color: #56b4e9; font-weight: bold;">if</span> (type == PARENS || type == BRACKETS)
        strcat(out, token);
      <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (type == <span style="color: #848ea9;">'*'</span>) {
        sprintf(temp, <span style="color: #848ea9;">"(*%s)"</span>, out);
        strcpy(out, temp);
      } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (type == NAME) {
        sprintf(temp, <span style="color: #848ea9;">"%s %s"</span>, token, out);
        strcpy(out, temp);
      } <span style="color: #56b4e9; font-weight: bold;">else</span>
        printf(<span style="color: #848ea9;">"invalid input at %s\n"</span>, token);
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org05fa51f" class="outline-2">
<h2 id="org05fa51f">Chapter 6 - Structures</h2>
<div class="outline-text-2" id="text-org05fa51f">
</div>
<div id="outline-container-org1141698" class="outline-3">
<h3 id="org1141698">function: makepoint</h3>
<div class="outline-text-3" id="text-org1141698">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">makepoint: make a point from x and y components </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #d55e00;">makepoint</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp.x = x;
  temp.y = y;
  <span style="color: #56b4e9; font-weight: bold;">return</span> temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb53e277" class="outline-3">
<h3 id="orgb53e277">program: using makepoint</h3>
<div class="outline-text-3" id="text-orgb53e277">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">XMAX</span> 80
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">YMAX</span> 24

<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> {
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span>;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span>;
};

<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> {
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">pt1</span>;
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">pt2</span>;
};

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">void</span>) {
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">screen</span>;
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">middle</span>;
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #d55e00;">makepoint</span>(<span style="color: #0072b2; font-weight: bold;">int</span>, <span style="color: #0072b2; font-weight: bold;">int</span>);

  screen.pt1 = makepoint(0,0);
  screen.pt2 = makepoint(XMAX, YMAX);
  middle = makepoint((screen.pt1.x + screen.pt2.x)/2,
                     (screen.pt1.y + screen.pt2.y)/2);

  printf(<span style="color: #848ea9;">"x:%d y:%d\n"</span>,middle.x, middle.y);

  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org18e31c3" class="outline-3">
<h3 id="org18e31c3">function: addpoint</h3>
<div class="outline-text-3" id="text-org18e31c3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">addpoints: add two points </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #d55e00;">addpoint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p1</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p2</span>)
{
  p1.x += p2.x;
  p1.y += p2.y;
  <span style="color: #56b4e9; font-weight: bold;">return</span> p1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcda6dcb" class="outline-3">
<h3 id="orgcda6dcb">function: ptinrect</h3>
<div class="outline-text-3" id="text-orgcda6dcb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">ptinrect: return 1 if p in r, 0 if not </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">ptinrect</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">point</span> <span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">r</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> p.x &gt;= r.pt1.x &amp;&amp; p.x &lt; r.pt2.x
    &amp;&amp; p.y &gt;= r.pt1.y &amp;&amp; p.y &lt; r.pt2.y;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb638b9d" class="outline-3">
<h3 id="orgb638b9d">function: canonrect</h3>
<div class="outline-text-3" id="text-orgb638b9d">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#define</span> <span style="color: #d55e00;">min</span>(<span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #e69f00; font-weight: bold;">b</span>) ((a) &lt; (b) ? (a) : (b))
<span style="color: #0072b2;">#define</span> <span style="color: #d55e00;">max</span>(<span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #e69f00; font-weight: bold;">b</span>) ((a) &gt; (b) ? (a) : (b))

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">canonrect: canonicalize coordinates of rectangle </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #d55e00;">canonrect</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">r</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">rect</span> <span style="color: #e69f00; font-weight: bold;">temp</span>;

  temp.pt1.x = min(r.pt1.x,r.pt2.x);
  temp.pt1.y = min(r.pt1.y,r.pt2.y);
  temp.pt2.x = max(r.pt1.x,r.pt2.x);
  temp.pt2.y = max(r.pt1.y,r.pt2.y);
  <span style="color: #56b4e9; font-weight: bold;">return</span> temp;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org73b1198" class="outline-3">
<h3 id="org73b1198">program: keyword-counting (using array indices)</h3>
<div class="outline-text-3" id="text-org73b1198">
<pre class="example">
won't compile
keytab?
</pre>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NKEYS</span> (<span style="color: #56b4e9; font-weight: bold;">sizeof</span> keytab / <span style="color: #56b4e9; font-weight: bold;">sizeof</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span>))

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">int getword(char *, int); </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">int binsearch(char *, struct key *, int); </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">declare and initialize structure </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> {
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;
} <span style="color: #e69f00; font-weight: bold;">keytab</span>[] = {
              <span style="color: #848ea9;">"auto"</span>, 0,
              <span style="color: #848ea9;">"break"</span>, 0,
              <span style="color: #848ea9;">"case"</span>, 0,
              <span style="color: #848ea9;">"char"</span>, 0,
              <span style="color: #848ea9;">"const"</span>, 0,
              <span style="color: #848ea9;">"continue"</span>, 0,
              <span style="color: #848ea9;">"default"</span>, 0,
              <span style="color: #848ea9;">"unsigned"</span>, 0,
              <span style="color: #848ea9;">"void"</span>, 0,
              <span style="color: #848ea9;">"volatile"</span>, 0,
              <span style="color: #848ea9;">"while"</span>, 0
};

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count C keywords </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];

  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((n = binsearch(word, keytab, NKEYS)) &gt;= 0)
        keytab[n].count++;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (n = 0; n &lt; NKEYS; n++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (keytab[n].count &gt; 0)
      printf(<span style="color: #848ea9;">"%4d %s\n"</span>,
             keytab[n].count, keytab[n].word);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find word in tab[0]...tab[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> <span style="color: #e69f00; font-weight: bold;">tab</span>[], <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">low</span>, <span style="color: #e69f00; font-weight: bold;">high</span>, <span style="color: #e69f00; font-weight: bold;">mid</span>;

  low = 0;
  high = n - 1;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt;= high) {
    mid = (low+high) / 2;
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(word, tab[mid].word)) &lt; 0)
      high = mid - 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &gt; 0)
      low = mid + 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> -1;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org195366d" class="outline-3">
<h3 id="org195366d">function: getword</h3>
<div class="outline-text-3" id="text-org195366d">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getword: get next word or character from input </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">lim</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>, <span style="color: #d55e00;">getch</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">ungetch</span>(<span style="color: #0072b2; font-weight: bold;">int</span>);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">w</span> = word;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (isspace(c = getch()))
    ;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (c != EOF)
    *w++ = c;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (!isalpha(c)) {
    *w = <span style="color: #848ea9;">'\0'</span>;
    <span style="color: #56b4e9; font-weight: bold;">return</span> c;
  }
  <span style="color: #56b4e9; font-weight: bold;">for</span> ( ; --lim &gt; 0; w++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (!isalnum(*w = getch())) {
      ungetch(*w);
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
    }
  *w = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> word[0];
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b65d7d" class="outline-3">
<h3 id="org7b65d7d">program: keyword-counting (using pointers)</h3>
<div class="outline-text-3" id="text-org7b65d7d">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"ch06.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100
<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">NKEYS</span> (<span style="color: #56b4e9; font-weight: bold;">sizeof</span> keytab / <span style="color: #56b4e9; font-weight: bold;">sizeof</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span>))

<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> {
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;
} <span style="color: #e69f00; font-weight: bold;">keytab</span>[] = {
              <span style="color: #848ea9;">"auto"</span>, 0,
              <span style="color: #848ea9;">"break"</span>, 0,
              <span style="color: #848ea9;">"case"</span>, 0,
              <span style="color: #848ea9;">"char"</span>, 0,
              <span style="color: #848ea9;">"const"</span>, 0,
              <span style="color: #848ea9;">"continue"</span>, 0,
              <span style="color: #848ea9;">"default"</span>, 0,
              <span style="color: #848ea9;">"unsigned"</span>, 0,
              <span style="color: #848ea9;">"void"</span>, 0,
              <span style="color: #848ea9;">"volatile"</span>, 0,
              <span style="color: #848ea9;">"while"</span>, 0
};

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">count C keywords; pointer version </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">p</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((p=binsearch(word, keytab, NKEYS)) != <span style="color: #d55e00; font-weight: bold;">NULL</span>)
        p-&gt;count++;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (p = keytab; p &lt; keytab + NKEYS; p++)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (p-&gt;count &gt; 0)
      printf(<span style="color: #848ea9;">"%4d %s\n"</span>, p-&gt;count, p-&gt;word);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">binsearch: find word in tab[0]...tab[n-1] </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #d55e00;">binsearch</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>, <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">tab</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">low</span> = &amp;tab[0];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">high</span> = &amp;tab[n];
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">key</span> *<span style="color: #e69f00; font-weight: bold;">mid</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (low &lt; high) {
    mid = low + (high-low) / 2;
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(word, mid-&gt;word)) &lt; 0)
      high = mid;
    <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &gt; 0)
      low = mid + 1;
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">return</span> mid;
  }
  <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org93c3d14" class="outline-3">
<h3 id="org93c3d14">struct: tnode</h3>
<div class="outline-text-3" id="text-org93c3d14">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> {          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">the tree node: </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to the text </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of occurrences </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">left</span>;   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">left child </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">right</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">right child </span><span style="color: #009e73; font-style: italic;">*/</span>
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4a9332" class="outline-3">
<h3 id="orgf4a9332">program: word frequency count</h3>
<div class="outline-text-3" id="text-orgf4a9332">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;string.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">"ch06.h"</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">MAXWORD</span> 100

<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">addtree</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *, <span style="color: #0072b2; font-weight: bold;">char</span> *);
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">treeprint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *);
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getword</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *, <span style="color: #0072b2; font-weight: bold;">int</span>);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">word frequency count </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">root</span>;
  <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">word</span>[MAXWORD];

  root = <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (getword(word, MAXWORD) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (isalpha(word[0]))
      root = addtree(root, word);
  treeprint(root);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org210f182" class="outline-3">
<h3 id="org210f182">function: addtree</h3>
<div class="outline-text-3" id="text-org210f182">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">addtree: add a node with w, at or below p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">treenode</span> *<span style="color: #d55e00;">addtree</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">w</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cond</span>;
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p == <span style="color: #d55e00; font-weight: bold;">NULL</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">a new word has arrived </span><span style="color: #009e73; font-style: italic;">*/</span>
    p = talloc();  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make a new node </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;word = strdup(w);
    p-&gt;count = 1;
    p-&gt;left = p-&gt;right = <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> ((cond = strcmp(w, p-&gt;word)) == 0)
    p-&gt;count++; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">repeated word </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (cond &lt; 0) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">less than into left subtree </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;left = addtree(p-&gt;left, w);
  <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">greater than into right subtree </span><span style="color: #009e73; font-style: italic;">*/</span>
    p-&gt;right = addtree(p-&gt;right, w);
  <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org36a351e" class="outline-3">
<h3 id="org36a351e">function: treeprint</h3>
<div class="outline-text-3" id="text-org36a351e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">treeprint: in-order print of tree p </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">treeprint</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">p</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p != <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
    treeprint(p-&gt;left);
    printf(<span style="color: #848ea9;">"%4d %s\n"</span>, p-&gt;count, p-&gt;word);
    treeprint(p-&gt;right);
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f80e42" class="outline-3">
<h3 id="org4f80e42">functions: talloc &amp; strdup</h3>
<div class="outline-text-3" id="text-org4f80e42">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdlib.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">talloc: make a tnode </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span>));
}

<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make a duplicate of s </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>;

  p = (<span style="color: #0072b2; font-weight: bold;">char</span> *) malloc(strlen(s)+1); <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">+1 for '\0' </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">if</span> (p != <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    strcpy(p, s);
  <span style="color: #56b4e9; font-weight: bold;">return</span> p;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf10ab5f" class="outline-3">
<h3 id="orgf10ab5f">struct: nlist</h3>
<div class="outline-text-3" id="text-orgf10ab5f">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> {          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">table entry: </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">next</span>;   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">next entry in chain </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">defined name </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">defn</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">replacement text </span><span style="color: #009e73; font-style: italic;">*/</span>
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org704d52c" class="outline-3">
<h3 id="org704d52c">function: hash</h3>
<div class="outline-text-3" id="text-org704d52c">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">hash: form hash value for string s </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #d55e00;">hash</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">hashval</span>;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (hashval = 0; *s != <span style="color: #848ea9;">'\0'</span>; s++)
    hashval = *s + 31 * hashval;
  <span style="color: #56b4e9; font-weight: bold;">return</span> hashval % HASHSIZE;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4ec908e" class="outline-3">
<h3 id="org4ec908e">function: lookup</h3>
<div class="outline-text-3" id="text-org4ec908e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lookup: look for s in hashtab </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">lookup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">np</span>;
  <span style="color: #56b4e9; font-weight: bold;">for</span> (np = hashtab[hash(s)]; np != <span style="color: #d55e00; font-weight: bold;">NULL</span>; np = np-&gt;next)
    <span style="color: #56b4e9; font-weight: bold;">if</span> (strcmp(s, np-&gt;name) == 0)
      <span style="color: #56b4e9; font-weight: bold;">return</span> np; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">found </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not found </span><span style="color: #009e73; font-style: italic;">*/</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org89ad133" class="outline-3">
<h3 id="org89ad133">function: install</h3>
<div class="outline-text-3" id="text-org89ad133">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">lookup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">strdup</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *);

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">install: put (name, defn) in hashtab </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #d55e00;">install</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">name</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">defn</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *<span style="color: #e69f00; font-weight: bold;">np</span>;
  <span style="color: #0072b2; font-weight: bold;">unsigned</span> <span style="color: #e69f00; font-weight: bold;">hashval</span>;

  <span style="color: #56b4e9; font-weight: bold;">if</span> ((np = lookup(name)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) { <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">not found </span><span style="color: #009e73; font-style: italic;">*/</span>
    np = (<span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">nlist</span> *) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(*np));
    <span style="color: #56b4e9; font-weight: bold;">if</span> (np == <span style="color: #d55e00; font-weight: bold;">NULL</span> || (np-&gt;name = strdup(name)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
      <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
    hashval = hash(name);
    np-&gt;next = hashtab[hashval];
    hashtab[hashval] = np;
  } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">already there </span><span style="color: #009e73; font-style: italic;">*/</span>
    free((<span style="color: #0072b2; font-weight: bold;">void</span> *) np-&gt;defn); <span style="color: #009e73; font-style: italic;">/*</span><span style="color: #009e73; font-style: italic;">free previous defn </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">if</span> ((np-&gt;defn = strdup(defn)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">NULL</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> np;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org357605e" class="outline-3">
<h3 id="org357605e">struct: tnode / Treenode</h3>
<div class="outline-text-3" id="text-org357605e">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #56b4e9; font-weight: bold;">typedef</span> <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #0072b2; font-weight: bold;">Treeptr</span>;

<span style="color: #56b4e9; font-weight: bold;">typedef</span> <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> {  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">the tree node: </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">word</span>;           <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to the text </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">count</span>;            <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">number of occurrences </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">left</span>;   <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">left child </span><span style="color: #009e73; font-style: italic;">*/</span>
  <span style="color: #56b4e9; font-weight: bold;">struct</span> <span style="color: #0072b2; font-weight: bold;">tnode</span> *<span style="color: #e69f00; font-weight: bold;">right</span>;  <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">right child </span><span style="color: #009e73; font-style: italic;">*/</span>
} <span style="color: #0072b2; font-weight: bold;">Treenode</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca10ecb" class="outline-3">
<h3 id="orgca10ecb">function: talloc</h3>
<div class="outline-text-3" id="text-orgca10ecb">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2; font-weight: bold;">Treeptr</span> <span style="color: #d55e00;">talloc</span>(<span style="color: #0072b2; font-weight: bold;">void</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #0072b2; font-weight: bold;">Treeptr</span>) malloc(<span style="color: #56b4e9; font-weight: bold;">sizeof</span>(Treenode));
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org124149e" class="outline-2">
<h2 id="org124149e">Chapter 7 - Input and Output</h2>
<div class="outline-text-2" id="text-org124149e">
</div>
<div id="outline-container-orgfe8042c" class="outline-3">
<h3 id="orgfe8042c">program: convert input to lower case</h3>
<div class="outline-text-3" id="text-orgfe8042c">
<ul class="org-ul">
<li><code>$ gcc lower.c</code></li>
<li><code>./a.out</code></li>
<li>enter char(s) and RET</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;ctype.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">lower: convert input to lower case </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>()
{
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

    <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getchar()) != EOF)
        putchar(tolower(c));
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7962a6d" class="outline-3">
<h3 id="org7962a6d">program: ex printf myprint.c</h3>
<div class="outline-text-3" id="text-org7962a6d">
<p>
printf("%.*s", max, s);
</p>

<ul class="org-ul">
<li>how to assign a string of characters to a variable?</li>
<li>define the max constant?</li>
<li>note: * is followed by and <code>int</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #0072b2;">#define</span> <span style="color: #e69f00; font-weight: bold;">max</span> 12

<span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">s</span>[max] = <span style="color: #848ea9;">"hello, world"</span>;

<span style="color: #d55e00;">main</span>()
{
    printf(<span style="color: #848ea9;">"%.*s\n"</span>, max, s);
    printf(<span style="color: #848ea9;">"%s\n"</span>, s);          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%s</span>
    printf(<span style="color: #848ea9;">"%10s\n"</span>, s);        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%10s</span>
    printf(<span style="color: #848ea9;">"%.10s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%.10s</span>
    printf(<span style="color: #848ea9;">"%-10s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-10s</span>
    printf(<span style="color: #848ea9;">"%.15s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%.15s</span>
    printf(<span style="color: #848ea9;">"%-15s\n"</span>, s);       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-15s</span>
    printf(<span style="color: #848ea9;">"%15.10s\n"</span>, s);     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%15.10s</span>
    printf(<span style="color: #848ea9;">"%-15.10s\n"</span>, s);    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">%-15.10s</span>
}
</pre>
</div>

<p>
output
</p>
<pre class="example">
hello,.world
hello,.world
hello,.world
hello,.wor
hello,.world
hello,.world
hello,.world...
.....hello,.wor
hello,.wor
</pre>
</div>
</div>

<div id="outline-container-org3f25718" class="outline-3">
<h3 id="org3f25718">program: minimal printf with variable argument list</h3>
<div class="outline-text-3" id="text-org3f25718">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdarg.h&gt;</span>
<span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">minprintf: minimal printf with variable argument list </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">minprintf</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">fmt</span>, ...)
{
    <span style="color: #0072b2; font-weight: bold;">va_list</span> <span style="color: #e69f00; font-weight: bold;">ap</span>;                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">points to each unnamed arg in turn </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">p</span>, *<span style="color: #e69f00; font-weight: bold;">sval</span>;
    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ival</span>;
    <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">dval</span>;

    va_start(ap, fmt);          <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">make ap point to 1st unnamed arg </span><span style="color: #009e73; font-style: italic;">*/</span>
    <span style="color: #56b4e9; font-weight: bold;">for</span> (p = fmt; *p; p++) {
        <span style="color: #56b4e9; font-weight: bold;">if</span> (*p != <span style="color: #848ea9;">'%'</span>) {
            putchar(*p);
            <span style="color: #56b4e9; font-weight: bold;">continue</span>;
        }
        <span style="color: #56b4e9; font-weight: bold;">switch</span> (*++p) {
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'d'</span>:
            ival = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">int</span>);
            printf(<span style="color: #848ea9;">"%d"</span>, ival);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'f'</span>:
            dval = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">double</span>);
            printf(<span style="color: #848ea9;">"%f"</span>, dval);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">case</span> <span style="color: #848ea9;">'s'</span>:
            <span style="color: #56b4e9; font-weight: bold;">for</span> (sval = va_arg(ap, <span style="color: #0072b2; font-weight: bold;">char</span> *); *sval; sval++)
                putchar(*sval);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        <span style="color: #56b4e9; font-weight: bold;">default</span>:
            putchar(*p);
            <span style="color: #56b4e9; font-weight: bold;">break</span>;
        }
    }
    va_end(ap);                 <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">clean up when done </span><span style="color: #009e73; font-style: italic;">*/</span>
}


<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">main</span>()
{
     <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">xx</span> = 7;
     <span style="color: #0072b2; font-weight: bold;">char</span> <span style="color: #e69f00; font-weight: bold;">yy</span>[] = <span style="color: #848ea9;">"asdfasf"</span>;
     minprintf(<span style="color: #848ea9;">"%d\n"</span>,7);
     minprintf(<span style="color: #848ea9;">"%s\n"</span>,yy);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf037b9b" class="outline-3">
<h3 id="orgf037b9b">program: calculator</h3>
<div class="outline-text-3" id="text-orgf037b9b">
<ul class="org-ul">
<li>calculates a running sum</li>
<li>outputs numbers as float with percision 2.</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #d55e00;">main</span>() <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">rudimentary calculator </span><span style="color: #009e73; font-style: italic;">*/</span>
{
  <span style="color: #0072b2; font-weight: bold;">double</span> <span style="color: #e69f00; font-weight: bold;">sum</span>, <span style="color: #e69f00; font-weight: bold;">v</span>;

  sum = 0;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (scanf(<span style="color: #848ea9;">"%lf"</span>, &amp;v) == 1)
    printf(<span style="color: #848ea9;">"\t%.2f\n"</span>, sum += v);
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1be2d5" class="outline-3">
<h3 id="orge1be2d5">program: krcatv1</h3>
<div class="outline-text-3" id="text-orge1be2d5">
<ul class="org-ul">
<li>works ok</li>
</ul>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">cat: concatenate files, version 1 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">fp</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *, <span style="color: #0072b2; font-weight: bold;">FILE</span> *);

    <span style="color: #56b4e9; font-weight: bold;">if</span> (argc == 1) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no args; copy standard input </span><span style="color: #009e73; font-style: italic;">*/</span>
      filecopy(stdin, stdout);
    <span style="color: #56b4e9; font-weight: bold;">else</span>
      <span style="color: #56b4e9; font-weight: bold;">while</span>(--argc &gt; 0)
        <span style="color: #56b4e9; font-weight: bold;">if</span> ((fp = fopen(*++argv, <span style="color: #848ea9;">"r"</span>)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
          printf(<span style="color: #848ea9;">"cat: can't open %s\n"</span>, *argv);
          <span style="color: #56b4e9; font-weight: bold;">return</span> 1;
        } <span style="color: #56b4e9; font-weight: bold;">else</span> {
          filecopy(fp, stdout);
          fclose(fp);
        }
  <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">filecopy: copy file ifp to file ofp </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ifp</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ofp</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getc(ifp)) != EOF)
    putc(c, ofp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1dcbdca" class="outline-3">
<h3 id="org1dcbdca">program: cat revised (error handling)</h3>
<div class="outline-text-3" id="text-org1dcbdca">
<p>
warnings about the exit
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #0072b2;">#include</span> <span style="color: #848ea9;">&lt;stdio.h&gt;</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">cat: concatenate files, version 2 </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">argc</span>, <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">argv</span>[])
{
  <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">fp</span>;
  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *, <span style="color: #0072b2; font-weight: bold;">FILE</span> *);
  <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">prog</span> = argv[0]; <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">program name for errors </span><span style="color: #009e73; font-style: italic;">*/</span>

  <span style="color: #56b4e9; font-weight: bold;">if</span> (argc == 1 ) <span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">no args; copy standard input </span><span style="color: #009e73; font-style: italic;">*/</span>
    filecopy(stdin, stdout);
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">while</span> (--argc &gt; 0)
      <span style="color: #56b4e9; font-weight: bold;">if</span> ((fp = fopen(*++argv, <span style="color: #848ea9;">"r"</span>)) == <span style="color: #d55e00; font-weight: bold;">NULL</span>) {
        fprintf(stderr, <span style="color: #848ea9;">"%s: can't open %s\n"</span>,
                prog, *argv);
        exit(1);
      } <span style="color: #56b4e9; font-weight: bold;">else</span> {
        filecopy(fp, stdout);
        fclose(fp);
      }
  <span style="color: #56b4e9; font-weight: bold;">if</span> (ferror(stdout)) {
    fprintf(stderr, <span style="color: #848ea9;">"%s: error writing stdout\n"</span>, prog);
    exit(2);
  }
  exit(0);
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">adding from previous program </span><span style="color: #009e73; font-style: italic;">*/</span>

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">filecopy: copy file ifp to file ofp </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">filecopy</span>(<span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ifp</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">ofp</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> ((c = getc(ifp)) != EOF)
    putc(c, ofp);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc185bc8" class="outline-3">
<h3 id="orgc185bc8">functions: fputs &amp; fgets</h3>
<div class="outline-text-3" id="text-orgc185bc8">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fgets: get at most n chars from iop </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #d55e00;">fgets</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">n</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">iop</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">register</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;
  <span style="color: #56b4e9; font-weight: bold;">register</span> <span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">cs</span>;

  cs = s;
  <span style="color: #56b4e9; font-weight: bold;">while</span> (--n &gt; 0 &amp;&amp; (c = getc(iop)) != EOF)
    <span style="color: #56b4e9; font-weight: bold;">if</span> ((*cs++ = c) == <span style="color: #848ea9;">'\n'</span>)
      <span style="color: #56b4e9; font-weight: bold;">break</span>;
  *cs = <span style="color: #848ea9;">'\0'</span>;
  <span style="color: #56b4e9; font-weight: bold;">return</span> (c == EOF &amp;&amp; cs == s) ? <span style="color: #d55e00; font-weight: bold;">NULL</span> : s;
}

<span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">fputs: put string s on file iop </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">fputs</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">s</span>, <span style="color: #0072b2; font-weight: bold;">FILE</span> *<span style="color: #e69f00; font-weight: bold;">iop</span>)
{
  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">c</span>;

  <span style="color: #56b4e9; font-weight: bold;">while</span> (c = *s++)
    putc(c, iop);
  <span style="color: #56b4e9; font-weight: bold;">return</span> ferror(iop) ? EOF : 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5efd2b1" class="outline-3">
<h3 id="org5efd2b1">function: getline (using fgets)</h3>
<div class="outline-text-3" id="text-org5efd2b1">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #009e73; font-style: italic;">/* </span><span style="color: #009e73; font-style: italic;">getline: read a line, return length </span><span style="color: #009e73; font-style: italic;">*/</span>
<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getline</span>(<span style="color: #0072b2; font-weight: bold;">char</span> *<span style="color: #e69f00; font-weight: bold;">line</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">max</span>)
{
  <span style="color: #56b4e9; font-weight: bold;">if</span> (fgets(line, max, stdin) == <span style="color: #d55e00; font-weight: bold;">NULL</span>)
    <span style="color: #56b4e9; font-weight: bold;">return</span> 0;
  <span style="color: #56b4e9; font-weight: bold;">else</span>
    <span style="color: #56b4e9; font-weight: bold;">return</span> strlen(line);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org22f30e2" class="outline-2">
<h2 id="org22f30e2">Chapter 8 - The UNIX System Interface</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
