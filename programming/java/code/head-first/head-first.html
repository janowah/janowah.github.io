<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Head First Java</title>
<meta name="generator" content="Org mode" />
</head>
<body>
<div id="content">
<h1 class="title">Head First Java</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1c59f1b">01 Breaking the Surface: <i>a quick dip</i></a>
<ul>
<li><a href="#org29c2d5a"><code>BeerSong.java</code></a></li>
<li><a href="#orgcf716be"><code>PhraseOMatic.java</code></a></li>
</ul>
</li>
<li><a href="#org34a3a4b">02 A Trip to Objectville: <i>yes, there will be objects</i></a>
<ul>
<li><a href="#org41d8671"><code>Player.java</code></a></li>
<li><a href="#org8f55099"><code>GuessGame.java</code></a></li>
<li><a href="#org5768333"><code>GameLauncher.java</code></a></li>
</ul>
</li>
<li><a href="#org706983a">03 Know Your Variables: <i>primitives and references</i></a>
<ul>
<li><a href="#org530135d"><code>Dog.java</code></a></li>
</ul>
</li>
<li><a href="#org9d34c7c">04 How Objects Behave: <i>object state affects method behavior</i></a>
<ul>
<li><a href="#org0b2b678"><code>Foo.java</code></a></li>
<li><a href="#org1bc10a5"><code>GoodDogTestDrive.java</code></a></li>
<li><a href="#org2faf47b"><code>PoorDogTestDrive.java</code></a></li>
</ul>
</li>
<li><a href="#org289cada">05 Extra-Strength Methods: <i>flow control, operations, and more</i></a>
<ul>
<li><a href="#orgfa3be64"><code>Game.java</code></a></li>
<li><a href="#org922d2a3"><code>GameHelper.java</code></a></li>
<li><a href="#orge4bb9ca"><code>SimpleDotCom.java</code></a></li>
<li><a href="#orga352749"><code>SimpleDotComTester.java</code></a></li>
</ul>
</li>
<li><a href="#org7542608"><span class="todo TODO">TODO</span> 06 Using the Java Library: <i>so you donâ€™t have to write it all yourself</i></a>
<ul>
<li><a href="#org0cf48ee"><code>DotCom.java</code></a></li>
<li><a href="#org4f298d7"><code>DotComBust.java</code></a></li>
<li><a href="#org24fafd0"><code>GameHelper.java</code></a></li>
</ul>
</li>
<li><a href="#orga858eba">07 Better Living in Objectville: <i>planning for the future</i></a>
<ul>
<li><a href="#orgfa044ad"><code>TestBoat.java</code></a></li>
</ul>
</li>
<li><a href="#orgf4707eb">08 Serious Polymorphism: <i>exploiting abstract classes and interfaces</i></a>
<ul>
<li><a href="#org9145132"><code>Of76.java</code></a></li>
</ul>
</li>
<li><a href="#org6988e22">09 Life and Death of an Object: <i>constructors and memory management</i></a>
<ul>
<li><a href="#org28f0cb8"><code>TestLifeSupportSim.java</code></a></li>
</ul>
</li>
<li><a href="#org52e4332">10 Numbers Matter: <i>math, formatting, wrappers, and statics</i></a>
<ul>
<li><a href="#org4db1e8e"><code>FullMoons.java</code></a></li>
</ul>
</li>
<li><a href="#org71e0c12">11 Risky Behavior: <i>exception handling</i></a>
<ul>
<li><a href="#orgbd9514f"><code>MiniMiniMusicApp.java</code></a></li>
<li><a href="#org1b18c0e"><code>MiniMiniMusicCmdLine.java</code></a></li>
</ul>
</li>
<li><a href="#org7cdd8f3">12 A Very Graphic Story: <i>intro to GUI, event handling, and inner classes</i></a>
<ul>
<li><a href="#orgd9267c8"><code>Animate.java</code></a></li>
<li><a href="#orgab8b24b"><code>MiniMusicPlayer3.java</code></a></li>
<li><a href="#org322c46b"><code>SimpleAnimation.java</code></a></li>
<li><a href="#org2b90dc9"><code>TwoButtons.java</code></a></li>
</ul>
</li>
<li><a href="#org0741a28">13 Work on Your Swing: <i>layout managers and components</i></a>
<ul>
<li><a href="#orge2b711b"><code>BeatBox.java</code></a></li>
</ul>
</li>
<li><a href="#org41bdcf3"><span class="todo TODO">TODO</span> 14 Saving Objects: <i>serialization and I/O</i></a>
<ul>
<li><a href="#orge5d0205"><code>chap14/BeatBoxSaveOnly.java</code></a></li>
<li><a href="#orgbc5af05"><code>chap14/DungeonTest.java</code></a></li>
<li><a href="#org9e09f7b"><code>chap14/GameCharacter.java</code></a></li>
<li><a href="#org6287ef8"><code>chap14/GameSaverTest.java</code></a></li>
<li><a href="#org93334a4"><code>chap14/QuizCard.java</code></a></li>
<li><a href="#org9ac4fa8"><code>chap14/QuizCardBuilder.java</code></a></li>
<li><a href="#orgfbc9543"><code>chap14/QuizCardReader.java</code></a></li>
</ul>
</li>
<li><a href="#org82c90e9"><span class="todo TODO">TODO</span> 15 Make a Connection: <i>networking sockets and multithreading</i></a>
<ul>
<li><a href="#org8529d28"><code>chap15/DailyAdviceClient.java</code></a></li>
<li><a href="#org54e7c85"><code>chap15/DailyAdviceServer.java</code></a></li>
<li><a href="#orgd6ba790"><code>chap15/MyRunnable.java</code></a></li>
<li><a href="#org3ba0725"><code>chap15/RunThreads.java</code></a></li>
<li><a href="#org8d42b51"><code>chap15/RyanAndMonicaJob.java</code></a></li>
<li><a href="#orgb4a86d5"><code>chap15/SimpleChatClient.java</code></a></li>
<li><a href="#orgef7466c"><code>chap15/SimpleChatClientA.java</code></a></li>
<li><a href="#org3169c70"><code>chap15/VerySimpleChatServer.java</code></a></li>
</ul>
</li>
<li><a href="#org64b0f87">16 Data Structures: <i>collections and generics</i></a>
<ul>
<li><a href="#orge8855d3"><code>chap16/Jukebox1.java</code></a></li>
<li><a href="#org9eeb054"><code>chap16/Jukebox3.java</code></a></li>
<li><a href="#org2e98357"><code>chap16/Jukebox5.java</code></a></li>
<li><a href="#org2caebec"><code>chap16/Jukebox6.java</code></a></li>
<li><a href="#org6a06859"><code>chap16/Jukebox8.java</code></a></li>
<li><a href="#org1e09699"><code>chap16/Song.java</code></a></li>
<li><a href="#orgaeb72d4"><code>SongList.txt</code></a></li>
<li><a href="#orgf65b703"><code>SongListMore.txt</code></a></li>
</ul>
</li>
<li><a href="#orgafbc5ac">17 Release Your Code: <i>packaging and deployment</i></a></li>
<li><a href="#orgf9f795a">18 Distributed Computing: <i>RMI with a dash of servlets, EJB, and Jini</i></a>
<ul>
<li><a href="#orgd5d0979"><code>PhraseOMatic2.java</code></a></li>
<li><a href="#org1f57057"><code>KathyServlet.java</code></a></li>
<li><a href="#org0790034"><code>ServiceServer.java</code> (the remote interface)</a></li>
<li><a href="#orged4184e"><code>Service.java</code> (what the GUI services implement)</a></li>
<li><a href="#org9094326"><code>ServiceServerImpl.java</code> (the remote implementation)</a></li>
<li><a href="#org2bf5df9"><code>ServiceBrowser.java</code> (the client)</a></li>
<li><a href="#org466f2f5"><code>DiceService.java</code> (a universal service, implements Service)</a></li>
<li><a href="#org833e76d"><code>MiniMusicService.java</code> (a universal service, implements Service)</a></li>
<li><a href="#orgf1689cc"><code>DayOfTheWeekService.java</code> (a universal service, implements Service)</a></li>
</ul>
</li>
<li><a href="#org68c69b7"><span class="todo TODO">TODO</span> A Appendix A: <i>Final code kitchen</i></a>
<ul>
<li><a href="#org6e82ac8"><code>AppendixA/BeatBoxFinal.java</code></a></li>
<li><a href="#orgcfc65a7"><code>AppendixA/MusicServer.java</code></a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org1c59f1b" class="outline-2">
<h2 id="org1c59f1b">01 Breaking the Surface: <i>a quick dip</i></h2>
<div class="outline-text-2" id="text-org1c59f1b">
</div>
<div id="outline-container-org29c2d5a" class="outline-3">
<h3 id="org29c2d5a"><code>BeerSong.java</code></h3>
<div class="outline-text-3" id="text-org29c2d5a">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap01;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">BeerSong</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">beerNum</span> = 99;
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">word</span> = <span style="color: #848ea9;">"bottles"</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (beerNum &gt; 0) {
<span class="linenr">11: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (beerNum == 1) {
<span class="linenr">12: </span>        word = <span style="color: #848ea9;">"bottle"</span>;
<span class="linenr">13: </span>      }
<span class="linenr">14: </span>
<span class="linenr">15: </span>      System.out.println(beerNum + <span style="color: #848ea9;">" "</span> + word + <span style="color: #848ea9;">" of beer on the wall"</span>);
<span class="linenr">16: </span>      System.out.println(beerNum + <span style="color: #848ea9;">" "</span> + word + <span style="color: #848ea9;">" of beer"</span>);
<span class="linenr">17: </span>      System.out.println(<span style="color: #848ea9;">"Take one down."</span>);
<span class="linenr">18: </span>      System.out.println(<span style="color: #848ea9;">"Pass it around."</span>);
<span class="linenr">19: </span>      beerNum = beerNum - 1;
<span class="linenr">20: </span>
<span class="linenr">21: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (beerNum &gt; 0) {
<span class="linenr">22: </span>        System.out.println(beerNum +  <span style="color: #848ea9;">" "</span> + word + <span style="color: #848ea9;">" of beer on the wall"</span>);
<span class="linenr">23: </span>      } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">24: </span>        System.out.println(<span style="color: #848ea9;">"No more bottles of beer on the wall"</span>);
<span class="linenr">25: </span>      }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>  }
<span class="linenr">28: </span>
<span class="linenr">29: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf716be" class="outline-3">
<h3 id="orgcf716be"><code>PhraseOMatic.java</code></h3>
<div class="outline-text-3" id="text-orgcf716be">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap01;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">PhraseOMatic</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListOne</span> = {<span style="color: #848ea9;">"24/7"</span>, <span style="color: #848ea9;">"multi-Tier"</span>, <span style="color: #848ea9;">"30,000 foot"</span>, <span style="color: #848ea9;">"B-to-B"</span>,
<span class="linenr"> 8: </span>                            <span style="color: #848ea9;">"win-win"</span>, <span style="color: #848ea9;">"front-end"</span>, <span style="color: #848ea9;">"web-based"</span>, <span style="color: #848ea9;">"pervasive"</span>,
<span class="linenr"> 9: </span>                            <span style="color: #848ea9;">"smart"</span>, <span style="color: #848ea9;">"six-sigma"</span>, <span style="color: #848ea9;">"critical-path"</span>, <span style="color: #848ea9;">"dynamic"</span>};
<span class="linenr">10: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListTwo</span> = {<span style="color: #848ea9;">"empowered"</span>, <span style="color: #848ea9;">"sticky"</span>, <span style="color: #848ea9;">"value-added"</span>, <span style="color: #848ea9;">"oriented"</span>,
<span class="linenr">11: </span>                            <span style="color: #848ea9;">"centric"</span>, <span style="color: #848ea9;">"distributed"</span>, <span style="color: #848ea9;">"clustered"</span>, <span style="color: #848ea9;">"branded"</span>,
<span class="linenr">12: </span>                            <span style="color: #848ea9;">"outside-the-box"</span>, <span style="color: #848ea9;">"positioned"</span>, <span style="color: #848ea9;">"networked"</span>, 
<span class="linenr">13: </span>                            <span style="color: #848ea9;">"focused"</span>, <span style="color: #848ea9;">"leveraged"</span>, <span style="color: #848ea9;">"aligned"</span>, <span style="color: #848ea9;">"targeted"</span>,
<span class="linenr">14: </span>                            <span style="color: #848ea9;">"shared"</span>, <span style="color: #848ea9;">"cooperative"</span>, <span style="color: #848ea9;">"accelerated"</span>};
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListThree</span> = {<span style="color: #848ea9;">"process"</span>, <span style="color: #848ea9;">"tipping-point"</span>, <span style="color: #848ea9;">"solution"</span>,
<span class="linenr">16: </span>                              <span style="color: #848ea9;">"architecture"</span>, <span style="color: #848ea9;">"core competency"</span>, <span style="color: #848ea9;">"strategy"</span>,
<span class="linenr">17: </span>                              <span style="color: #848ea9;">"mindshare"</span>, <span style="color: #848ea9;">"portal"</span>, <span style="color: #848ea9;">"space"</span>, <span style="color: #848ea9;">"vision"</span>, <span style="color: #848ea9;">"paradigm"</span>,
<span class="linenr">18: </span>                              <span style="color: #848ea9;">"mission"</span>};
<span class="linenr">19: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">oneLength</span> = wordListOne.length;
<span class="linenr">20: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">twoLength</span> = wordListTwo.length;
<span class="linenr">21: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">threeLength</span> = wordListThree.length;
<span class="linenr">22: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand1</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * oneLength);
<span class="linenr">23: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand2</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * twoLength);
<span class="linenr">24: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand3</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * threeLength);
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">phrase</span> = wordListOne[rand1] + <span style="color: #848ea9;">" "</span> + wordListTwo[rand2] + <span style="color: #848ea9;">" "</span>
<span class="linenr">27: </span>        + wordListThree[rand3];
<span class="linenr">28: </span>    System.out.println(<span style="color: #848ea9;">"What we need is a "</span> + phrase);
<span class="linenr">29: </span>  }
<span class="linenr">30: </span>
<span class="linenr">31: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org34a3a4b" class="outline-2">
<h2 id="org34a3a4b">02 A Trip to Objectville: <i>yes, there will be objects</i></h2>
<div class="outline-text-2" id="text-org34a3a4b">
</div>
<div id="outline-container-org41d8671" class="outline-3">
<h3 id="org41d8671"><code>Player.java</code></h3>
<div class="outline-text-3" id="text-org41d8671">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap02;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Player</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">number</span> = 0;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">guess</span>() {
<span class="linenr"> 8: </span>    number = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 10);
<span class="linenr"> 9: </span>    System.out.println(<span style="color: #848ea9;">"I'm guessing "</span> + number);
<span class="linenr">10: </span>  }
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f55099" class="outline-3">
<h3 id="org8f55099"><code>GuessGame.java</code></h3>
<div class="outline-text-3" id="text-org8f55099">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap02;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GuessGame</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #0072b2; font-weight: bold;">Player</span> <span style="color: #e69f00; font-weight: bold;">p1</span>;
<span class="linenr"> 6: </span>  <span style="color: #0072b2; font-weight: bold;">Player</span> <span style="color: #e69f00; font-weight: bold;">p2</span>;
<span class="linenr"> 7: </span>  <span style="color: #0072b2; font-weight: bold;">Player</span> <span style="color: #e69f00; font-weight: bold;">p3</span>;
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">startGame</span>() {
<span class="linenr">10: </span>
<span class="linenr">11: </span>    p1 = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Player</span>();
<span class="linenr">12: </span>    p2 = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Player</span>();
<span class="linenr">13: </span>    p3 = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Player</span>();
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">guessp1</span> = 0;
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">guessp2</span> = 0;
<span class="linenr">16: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">guessp3</span> = 0;
<span class="linenr">17: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">p1isRight</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">18: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">p2isRight</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">19: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">p3isRight</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">20: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">targetNumber</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 10);
<span class="linenr">21: </span>    System.out.println(<span style="color: #848ea9;">"I'm thinking of a number between 0 and 9..."</span>);
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (<span style="color: #d55e00; font-weight: bold;">true</span>) {
<span class="linenr">24: </span>      System.out.println(<span style="color: #848ea9;">"Number to guess is "</span> + targetNumber);
<span class="linenr">25: </span>
<span class="linenr">26: </span>      p1.guess();
<span class="linenr">27: </span>      p2.guess();
<span class="linenr">28: </span>      p3.guess();
<span class="linenr">29: </span>
<span class="linenr">30: </span>      guessp1 = p1.number;
<span class="linenr">31: </span>      System.out.println(<span style="color: #848ea9;">"Player one guessed "</span> + guessp1);
<span class="linenr">32: </span>      guessp2 = p2.number;
<span class="linenr">33: </span>      System.out.println(<span style="color: #848ea9;">"Player two guessed "</span> + guessp2);
<span class="linenr">34: </span>      guessp3 = p3.number;
<span class="linenr">35: </span>      System.out.println(<span style="color: #848ea9;">"Player three guessed "</span> + guessp3);
<span class="linenr">36: </span>
<span class="linenr">37: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (guessp1 == targetNumber) {
<span class="linenr">38: </span>        p1isRight = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">39: </span>      }
<span class="linenr">40: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (guessp2 == targetNumber) {
<span class="linenr">41: </span>        p2isRight = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">42: </span>      }
<span class="linenr">43: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (guessp3 == targetNumber) {
<span class="linenr">44: </span>        p3isRight = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">45: </span>      }
<span class="linenr">46: </span>
<span class="linenr">47: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (p1isRight || p2isRight || p3isRight) {
<span class="linenr">48: </span>        System.out.println(<span style="color: #848ea9;">"We have a winner!"</span>);
<span class="linenr">49: </span>        System.out.println(<span style="color: #848ea9;">"Player one got it right? "</span> + p1isRight);
<span class="linenr">50: </span>        System.out.println(<span style="color: #848ea9;">"Player two got it right? "</span> + p2isRight);
<span class="linenr">51: </span>        System.out.println(<span style="color: #848ea9;">"Player three got it right? "</span> + p3isRight);
<span class="linenr">52: </span>        System.out.println(<span style="color: #848ea9;">"Game is over"</span>);
<span class="linenr">53: </span>        <span style="color: #56b4e9; font-weight: bold;">break</span>;
<span class="linenr">54: </span>      } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">55: </span>        System.out.println(<span style="color: #848ea9;">"Players will have to try again."</span>);
<span class="linenr">56: </span>      }
<span class="linenr">57: </span>    }
<span class="linenr">58: </span>  }
<span class="linenr">59: </span>
<span class="linenr">60: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5768333" class="outline-3">
<h3 id="org5768333"><code>GameLauncher.java</code></h3>
<div class="outline-text-3" id="text-org5768333">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap02;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GameLauncher</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">GuessGame</span> <span style="color: #e69f00; font-weight: bold;">game</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GuessGame</span>();
<span class="linenr"> 7: </span>    game.startGame();
<span class="linenr"> 8: </span>  }
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org706983a" class="outline-2">
<h2 id="org706983a">03 Know Your Variables: <i>primitives and references</i></h2>
<div class="outline-text-2" id="text-org706983a">
</div>
<div id="outline-container-org530135d" class="outline-3">
<h3 id="org530135d"><code>Dog.java</code></h3>
<div class="outline-text-3" id="text-org530135d">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap03;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Dog</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">name</span>;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">Dog</span> <span style="color: #e69f00; font-weight: bold;">dog1</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Dog</span>();
<span class="linenr"> 9: </span>    dog1.bark();
<span class="linenr">10: </span>    dog1.name = <span style="color: #848ea9;">"Bart"</span>;
<span class="linenr">11: </span>
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">Dog</span>[] <span style="color: #e69f00; font-weight: bold;">myDogs</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Dog</span>[3];
<span class="linenr">13: </span>    myDogs[0] = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Dog</span>();
<span class="linenr">14: </span>    myDogs[1] = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Dog</span>();
<span class="linenr">15: </span>    myDogs[2] = dog1;
<span class="linenr">16: </span>
<span class="linenr">17: </span>    myDogs[0].name = <span style="color: #848ea9;">"Fred"</span>;
<span class="linenr">18: </span>    myDogs[1].name = <span style="color: #848ea9;">"Marge"</span>;
<span class="linenr">19: </span>
<span class="linenr">20: </span>    System.out.print(<span style="color: #848ea9;">"last dogs name is "</span>);
<span class="linenr">21: </span>    System.out.println(myDogs[2].name);
<span class="linenr">22: </span>
<span class="linenr">23: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0;
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (x &lt; myDogs.<span style="color: #0072b2; font-weight: bold;">length</span>) {
<span class="linenr">25: </span>      myDogs[x].bark();
<span class="linenr">26: </span>      x = x + 1;
<span class="linenr">27: </span>    }
<span class="linenr">28: </span>  }
<span class="linenr">29: </span>
<span class="linenr">30: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">bark</span>() {
<span class="linenr">31: </span>    System.out.println(name + <span style="color: #848ea9;">" says Ruff!"</span>);
<span class="linenr">32: </span>  }
<span class="linenr">33: </span>
<span class="linenr">34: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">eat</span>() {
<span class="linenr">35: </span>  }
<span class="linenr">36: </span>
<span class="linenr">37: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">chaseCat</span>() {
<span class="linenr">38: </span>  }
<span class="linenr">39: </span>
<span class="linenr">40: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9d34c7c" class="outline-2">
<h2 id="org9d34c7c">04 How Objects Behave: <i>object state affects method behavior</i></h2>
<div class="outline-text-2" id="text-org9d34c7c">
</div>
<div id="outline-container-org0b2b678" class="outline-3">
<h3 id="org0b2b678"><code>Foo.java</code></h3>
<div class="outline-text-3" id="text-org0b2b678">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap04</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this shouldn't compile</span>
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Foo</span> {
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0; <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">added initialization after verified that it doesn't</span>
<span class="linenr"> 7: </span>               <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">compile without it -Tyler Boone</span>
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">z</span> = x + 3;
<span class="linenr"> 9: </span>  }
<span class="linenr">10: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1bc10a5" class="outline-3">
<h3 id="org1bc10a5"><code>GoodDogTestDrive.java</code></h3>
<div class="outline-text-3" id="text-org1bc10a5">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap04;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GoodDogTestDrive</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">GoodDog</span> <span style="color: #e69f00; font-weight: bold;">one</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GoodDog</span>();
<span class="linenr"> 7: </span>    one.setSize(70);
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">GoodDog</span> <span style="color: #e69f00; font-weight: bold;">two</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GoodDog</span>();
<span class="linenr"> 9: </span>    two.setSize(8);
<span class="linenr">10: </span>    System.out.println(<span style="color: #848ea9;">"Dog one: "</span> + one.getSize());
<span class="linenr">11: </span>    System.out.println(<span style="color: #848ea9;">"Dog two: "</span> + two.getSize());
<span class="linenr">12: </span>    one.bark();
<span class="linenr">13: </span>    two.bark();
<span class="linenr">14: </span>  }
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GoodDog</span> {
<span class="linenr">18: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">size</span>;
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getSize</span>() {
<span class="linenr">21: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> size;
<span class="linenr">22: </span>  }
<span class="linenr">23: </span>
<span class="linenr">24: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setSize</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">s</span>) { 
<span class="linenr">25: </span>    size = s;
<span class="linenr">26: </span>  }
<span class="linenr">27: </span>
<span class="linenr">28: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">bark</span>() {
<span class="linenr">29: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (size &gt; 60) {
<span class="linenr">30: </span>      System.out.println(<span style="color: #848ea9;">"Wooof! Wooof!"</span>);
<span class="linenr">31: </span>    } <span style="color: #56b4e9; font-weight: bold;">else</span> <span style="color: #56b4e9; font-weight: bold;">if</span> (size &gt; 60) {
<span class="linenr">32: </span>      System.out.println(<span style="color: #848ea9;">"Ruff! Ruff!"</span>);
<span class="linenr">33: </span>    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">34: </span>      System.out.println(<span style="color: #848ea9;">"Yip! Yip!"</span>);
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>  }
<span class="linenr">37: </span>
<span class="linenr">38: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2faf47b" class="outline-3">
<h3 id="org2faf47b"><code>PoorDogTestDrive.java</code></h3>
<div class="outline-text-3" id="text-org2faf47b">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap04;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">PoorDogTestDrive</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">PoorDog</span> <span style="color: #e69f00; font-weight: bold;">one</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PoorDog</span>();
<span class="linenr"> 7: </span>    System.out.println(<span style="color: #848ea9;">"Dog size is "</span> + one.getSize());
<span class="linenr"> 8: </span>    System.out.println(<span style="color: #848ea9;">"Dog name is "</span> + one.getName());
<span class="linenr"> 9: </span>  }
<span class="linenr">10: </span>}
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">PoorDog</span> {
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">size</span>;
<span class="linenr">14: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">name</span>;
<span class="linenr">15: </span>
<span class="linenr">16: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getSize</span>() {
<span class="linenr">17: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> size;
<span class="linenr">18: </span>  }
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getName</span>() {
<span class="linenr">21: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> name;
<span class="linenr">22: </span>  }
<span class="linenr">23: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org289cada" class="outline-2">
<h2 id="org289cada">05 Extra-Strength Methods: <i>flow control, operations, and more</i></h2>
<div class="outline-text-2" id="text-org289cada">
</div>
<div id="outline-container-orgfa3be64" class="outline-3">
<h3 id="orgfa3be64"><code>Game.java</code></h3>
<div class="outline-text-3" id="text-orgfa3be64">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap05;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">import helpers.GameHelper;</span>
<span class="linenr"> 4: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">import GameHelper;</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Scanner</span>;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Game</span> {
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">11: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numOfGuesses</span> = 0;
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">GameHelper</span> <span style="color: #e69f00; font-weight: bold;">helper</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GameHelper</span>();
<span class="linenr">13: </span>
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">SimpleDotCom</span> <span style="color: #e69f00; font-weight: bold;">theDotCom</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleDotCom</span>();
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">randomNum</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 5);
<span class="linenr">16: </span>
<span class="linenr">17: </span>    <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">locations</span> = {randomNum, randomNum + 1, randomNum + 2};
<span class="linenr">18: </span>    theDotCom.setLocationCells(locations);
<span class="linenr">19: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">isAlive</span> = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">20: </span>
<span class="linenr">21: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (isAlive == <span style="color: #d55e00; font-weight: bold;">true</span>) {
<span class="linenr">22: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">guess</span> = helper.getUserInput(<span style="color: #848ea9;">"enter a number"</span>);
<span class="linenr">23: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">result</span> = theDotCom.checkYourself(guess);
<span class="linenr">24: </span>      numOfGuesses++;
<span class="linenr">25: </span>
<span class="linenr">26: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (result.equals(<span style="color: #848ea9;">"kill"</span>)) {
<span class="linenr">27: </span>        isAlive = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">28: </span>        System.out.println(<span style="color: #848ea9;">"You took "</span> + numOfGuesses + <span style="color: #848ea9;">" guesses"</span>);
<span class="linenr">29: </span>      }
<span class="linenr">30: </span>    }
<span class="linenr">31: </span>  }
<span class="linenr">32: </span>
<span class="linenr">33: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org922d2a3" class="outline-3">
<h3 id="org922d2a3"><code>GameHelper.java</code></h3>
<div class="outline-text-3" id="text-org922d2a3">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap05;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">IOException</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">InputStreamReader</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GameHelper</span> {
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #56b4e9; font-weight: bold;">final</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">alphabet</span> = <span style="color: #848ea9;">"abcdefg"</span>;
<span class="linenr">11: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gridLength</span> = 7;
<span class="linenr">12: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gridSize</span> = 49;
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> [] <span style="color: #e69f00; font-weight: bold;">grid</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[gridSize];
<span class="linenr">14: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comCount</span> = 0;
<span class="linenr">15: </span>
<span class="linenr">16: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getUserInput</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">prompt</span>) {
<span class="linenr">17: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">inputLine</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">18: </span>    System.out.print(prompt + <span style="color: #848ea9;">"  "</span>);
<span class="linenr">19: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">20: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">is</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(
<span class="linenr">21: </span>          <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span>(System.in));
<span class="linenr">22: </span>      inputLine = is.readLine();
<span class="linenr">23: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (inputLine.length() == 0) {
<span class="linenr">24: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">25: </span>      }
<span class="linenr">26: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr">27: </span>      System.out.println(<span style="color: #848ea9;">"IOException: "</span> + e);
<span class="linenr">28: </span>    }
<span class="linenr">29: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> inputLine.toLowerCase();
<span class="linenr">30: </span>  }
<span class="linenr">31: </span>
<span class="linenr">32: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #d55e00;">placeDotCom</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comSize</span>) { <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">line 19</span>
<span class="linenr">33: </span>    <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">alphaCells</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt;();
<span class="linenr">34: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> [] <span style="color: #e69f00; font-weight: bold;">alphacoords</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">String</span> [comSize];     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">holds 'f6' type coords</span>
<span class="linenr">35: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">temp</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;                               <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">temporary String for concat</span>
<span class="linenr">36: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> [] <span style="color: #e69f00; font-weight: bold;">coords</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[comSize];                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">current candidate coords</span>
<span class="linenr">37: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">attempts</span> = 0;                                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">current attempts counter</span>
<span class="linenr">38: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">success</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;                          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">flag = found a good location ?</span>
<span class="linenr">39: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">location</span> = 0;                                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">current starting location</span>
<span class="linenr">40: </span>
<span class="linenr">41: </span>    comCount++;                                       <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">nth dot com to place</span>
<span class="linenr">42: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">incr</span> = 1;                                     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">set horizontal increment</span>
<span class="linenr">43: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> ((comCount % 2) == 1) {                        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">if odd dot com  (place vertically)</span>
<span class="linenr">44: </span>      incr = gridLength;                              <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">set vertical increment</span>
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>
<span class="linenr">47: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (!success &amp; attempts++ &lt; 200) {             <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">main search loop  (32)</span>
<span class="linenr">48: </span>      location = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * gridSize);    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">get random starting point</span>
<span class="linenr">49: </span>      <span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">System.out.print(" try " + location);</span>
<span class="linenr">50: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0;                                      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">nth position in dotcom to place</span>
<span class="linenr">51: </span>      success = <span style="color: #d55e00; font-weight: bold;">true</span>;                                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">assume success</span>
<span class="linenr">52: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> (success &amp;&amp; x &lt; <span style="color: #0072b2; font-weight: bold;">comSize</span>) {                <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">look for adjacent unused spots</span>
<span class="linenr">53: </span>        <span style="color: #56b4e9; font-weight: bold;">if</span> (grid[location] == 0) {                    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">if not already used</span>
<span class="linenr">54: </span>          coords[x++] = location;                     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">save location</span>
<span class="linenr">55: </span>          location += incr;                           <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">try 'next' adjacent</span>
<span class="linenr">56: </span>          <span style="color: #56b4e9; font-weight: bold;">if</span> (location &gt;= gridSize) {                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">out of bounds - 'bottom'</span>
<span class="linenr">57: </span>            success = <span style="color: #d55e00; font-weight: bold;">false</span>;                          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">failure</span>
<span class="linenr">58: </span>          }
<span class="linenr">59: </span>          <span style="color: #56b4e9; font-weight: bold;">if</span> (x &gt; 0 &amp; (location % gridLength == 0)) { <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">out of bounds - right edge</span>
<span class="linenr">60: </span>            success = <span style="color: #d55e00; font-weight: bold;">false</span>;                          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">failure</span>
<span class="linenr">61: </span>          }
<span class="linenr">62: </span>        } <span style="color: #56b4e9; font-weight: bold;">else</span> {                                      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">found already used location</span>
<span class="linenr">63: </span>          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">System.out.print(" used " + location);  </span>
<span class="linenr">64: </span>          success = <span style="color: #d55e00; font-weight: bold;">false</span>;                            <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">failure</span>
<span class="linenr">65: </span>        }
<span class="linenr">66: </span>      }
<span class="linenr">67: </span>    }                                                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end while</span>
<span class="linenr">68: </span>
<span class="linenr">69: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0;                                        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">turn good location into alpha coords</span>
<span class="linenr">70: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">row</span> = 0;
<span class="linenr">71: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">column</span> = 0;
<span class="linenr">72: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">System.out.println("\n");</span>
<span class="linenr">73: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (x &lt; <span style="color: #0072b2; font-weight: bold;">comSize</span>) {
<span class="linenr">74: </span>      grid[coords[x]] = 1;                            <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">mark master grid pts. as 'used'</span>
<span class="linenr">75: </span>      row = (<span style="color: #0072b2; font-weight: bold;">int</span>) (coords[x] / gridLength);           <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">get row value</span>
<span class="linenr">76: </span>      column = coords[x] % gridLength;                <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">get numeric column value</span>
<span class="linenr">77: </span>      temp = String.valueOf(alphabet.charAt(column)); <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">convert to alpha</span>
<span class="linenr">78: </span>
<span class="linenr">79: </span>      alphaCells.add(temp.concat(Integer.toString(row)));
<span class="linenr">80: </span>      x++;
<span class="linenr">81: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">System.out.print("  coord "+x+" = " + alphaCells.get(x-1));</span>
<span class="linenr">82: </span>
<span class="linenr">83: </span>    }
<span class="linenr">84: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">System.out.println("\n");</span>
<span class="linenr">85: </span>
<span class="linenr">86: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> alphaCells;
<span class="linenr">87: </span>  }
<span class="linenr">88: </span>
<span class="linenr">89: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge4bb9ca" class="outline-3">
<h3 id="orge4bb9ca"><code>SimpleDotCom.java</code></h3>
<div class="outline-text-3" id="text-orge4bb9ca">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap05;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimpleDotCom</span> {
<span class="linenr"> 4: </span>  <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">locationCells</span>;
<span class="linenr"> 5: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numOfHits</span> = 0;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setLocationCells</span>(<span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">locs</span>) {
<span class="linenr"> 8: </span>    locationCells = locs;
<span class="linenr"> 9: </span>  }
<span class="linenr">10: </span>
<span class="linenr">11: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">checkYourself</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">stringGuess</span>) {
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">guess</span> = Integer.parseInt(stringGuess);
<span class="linenr">13: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">result</span> = <span style="color: #848ea9;">"miss"</span>;
<span class="linenr">14: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">cell</span>: locationCells) {
<span class="linenr">15: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (guess == cell) {
<span class="linenr">16: </span>        result = <span style="color: #848ea9;">"hit"</span>;
<span class="linenr">17: </span>        numOfHits++;
<span class="linenr">18: </span>        <span style="color: #56b4e9; font-weight: bold;">break</span>;
<span class="linenr">19: </span>      }
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (numOfHits == locationCells.length) {
<span class="linenr">22: </span>      result = <span style="color: #848ea9;">"kill"</span>;
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>    System.out.println(result);
<span class="linenr">25: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> result;
<span class="linenr">26: </span>  }
<span class="linenr">27: </span>
<span class="linenr">28: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga352749" class="outline-3">
<h3 id="orga352749"><code>SimpleDotComTester.java</code></h3>
<div class="outline-text-3" id="text-orga352749">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap05;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimpleDotComTester</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">SimpleDotCom</span> <span style="color: #e69f00; font-weight: bold;">dot</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleDotCom</span>();
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">locations</span> = {2, 3, 4};
<span class="linenr"> 8: </span>    dot.setLocationCells(locations);
<span class="linenr"> 9: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">userGuess</span> = <span style="color: #848ea9;">"2"</span>;
<span class="linenr">10: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">result</span> = dot.checkYourself(userGuess);
<span class="linenr">11: </span>  }
<span class="linenr">12: </span>
<span class="linenr">13: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7542608" class="outline-2">
<h2 id="org7542608"><span class="todo TODO">TODO</span> 06 Using the Java Library: <i>so you donâ€™t have to write it all yourself</i></h2>
<div class="outline-text-2" id="text-org7542608">
</div>
<div id="outline-container-org0cf48ee" class="outline-3">
<h3 id="org0cf48ee"><code>DotCom.java</code></h3>
<div class="outline-text-3" id="text-org0cf48ee">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap06;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DotCom</span> {
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">locationCells</span>;
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setLocationCells</span>(<span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">loc</span>) {
<span class="linenr">10: </span>    locationCells = loc;
<span class="linenr">11: </span>  }
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">checkYourself</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">userInput</span>) {
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">result</span> = <span style="color: #848ea9;">"miss"</span>;
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">index</span> = locationCells.indexOf(userInput);
<span class="linenr">16: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (index &gt;= 0) {
<span class="linenr">17: </span>      locationCells.remove(index);
<span class="linenr">18: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (locationCells.isEmpty()) {
<span class="linenr">19: </span>        result = <span style="color: #848ea9;">"kill"</span>;
<span class="linenr">20: </span>      } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">21: </span>        result = <span style="color: #848ea9;">"hit"</span>;
<span class="linenr">22: </span>      }
<span class="linenr">23: </span>    }
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> result;
<span class="linenr">25: </span>  }
<span class="linenr">26: </span>
<span class="linenr">27: </span>  <span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">TODO:  all the following code was added and should have been included in the book</span>
<span class="linenr">28: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">name</span>;
<span class="linenr">29: </span>
<span class="linenr">30: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setName</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">string</span>) {
<span class="linenr">31: </span>    name = string;
<span class="linenr">32: </span>  }
<span class="linenr">33: </span>
<span class="linenr">34: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f298d7" class="outline-3">
<h3 id="org4f298d7"><code>DotComBust.java</code></h3>
<div class="outline-text-3" id="text-org4f298d7">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap06;</span>
<span class="linenr"> 2: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">import helpers.GameHelper;</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Iterator</span>;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DotComBust</span> {
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">GameHelper</span> <span style="color: #e69f00; font-weight: bold;">helper</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GameHelper</span>();
<span class="linenr">10: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">DotCom</span>&gt; <span style="color: #e69f00; font-weight: bold;">dotComsList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">DotCom</span>&gt;();
<span class="linenr">11: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numOfGuesses</span> = 0;
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpGame</span>() {
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">DotCom</span> <span style="color: #e69f00; font-weight: bold;">one</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DotCom</span>();
<span class="linenr">15: </span>    one.setName(<span style="color: #848ea9;">"Pets.com"</span>);
<span class="linenr">16: </span>    <span style="color: #0072b2; font-weight: bold;">DotCom</span> <span style="color: #e69f00; font-weight: bold;">two</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DotCom</span>();
<span class="linenr">17: </span>    two.setName(<span style="color: #848ea9;">"eToys.com"</span>);
<span class="linenr">18: </span>    <span style="color: #0072b2; font-weight: bold;">DotCom</span> <span style="color: #e69f00; font-weight: bold;">three</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DotCom</span>();
<span class="linenr">19: </span>    three.setName(<span style="color: #848ea9;">"Go2.com"</span>);
<span class="linenr">20: </span>    dotComsList.add(one);
<span class="linenr">21: </span>    dotComsList.add(two);
<span class="linenr">22: </span>    dotComsList.add(three);
<span class="linenr">23: </span>
<span class="linenr">24: </span>    System.out.println(<span style="color: #848ea9;">"Your goal is to sink three dot coms."</span>);
<span class="linenr">25: </span>    System.out.println(<span style="color: #848ea9;">"Pets.com, eToys.com, Go2.com"</span>);
<span class="linenr">26: </span>    System.out.println(<span style="color: #848ea9;">"Try to sink them all in the fewest number of guesses"</span>);
<span class="linenr">27: </span>
<span class="linenr">28: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">DotCom</span> <span style="color: #e69f00; font-weight: bold;">dotComSet</span> : dotComsList) {
<span class="linenr">29: </span>      <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">newLocation</span> = helper.placeDotCom(3);
<span class="linenr">30: </span>      dotComSet.setLocationCells(newLocation);
<span class="linenr">31: </span>    }
<span class="linenr">32: </span>  }
<span class="linenr">33: </span>
<span class="linenr">34: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">startPlaying</span>() {
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">while</span> (!dotComsList.isEmpty()) {
<span class="linenr">36: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">userGuess</span> = helper.getUserInput(<span style="color: #848ea9;">"Enter a guess"</span>);
<span class="linenr">37: </span>      checkUserGuess(userGuess);
<span class="linenr">38: </span>    }
<span class="linenr">39: </span>    finishGame();
<span class="linenr">40: </span>  }
<span class="linenr">41: </span>
<span class="linenr">42: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">checkUserGuess</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">userGuess</span>) {
<span class="linenr">43: </span>    numOfGuesses++;
<span class="linenr">44: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">result</span> = <span style="color: #848ea9;">"miss"</span>;
<span class="linenr">45: </span>
<span class="linenr">46: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">DotCom</span> <span style="color: #e69f00; font-weight: bold;">dotComToTest</span> : dotComsList) {
<span class="linenr">47: </span>      result = dotComToTest.checkYourself(userGuess);
<span class="linenr">48: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (result.equals(<span style="color: #848ea9;">"hit"</span>)) {
<span class="linenr">49: </span>        <span style="color: #56b4e9; font-weight: bold;">break</span>;
<span class="linenr">50: </span>      }
<span class="linenr">51: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (result.equals(<span style="color: #848ea9;">"kill"</span>)) {
<span class="linenr">52: </span>        dotComsList.remove(dotComToTest);
<span class="linenr">53: </span>        <span style="color: #56b4e9; font-weight: bold;">break</span>;
<span class="linenr">54: </span>      }
<span class="linenr">55: </span>    }
<span class="linenr">56: </span>    System.out.println(result);
<span class="linenr">57: </span>  }
<span class="linenr">58: </span>
<span class="linenr">59: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">finishGame</span>() {
<span class="linenr">60: </span>    System.out.println(<span style="color: #848ea9;">"All Dot Coms are dead!  Your stock is now worthless"</span>);
<span class="linenr">61: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (numOfGuesses &lt;= 18) {
<span class="linenr">62: </span>      System.out.println(<span style="color: #848ea9;">"It only took you "</span> + numOfGuesses + <span style="color: #848ea9;">" guesses"</span>);
<span class="linenr">63: </span>      System.out.println(<span style="color: #848ea9;">"You got out before your options sank."</span>);
<span class="linenr">64: </span>    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">65: </span>      System.out.println(<span style="color: #848ea9;">"Took you long enough. "</span> + numOfGuesses + <span style="color: #848ea9;">" guesses."</span>);
<span class="linenr">66: </span>      System.out.println(<span style="color: #848ea9;">"Fish are dancing with your options."</span>);
<span class="linenr">67: </span>    }
<span class="linenr">68: </span>  }
<span class="linenr">69: </span>
<span class="linenr">70: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">71: </span>    <span style="color: #0072b2; font-weight: bold;">DotComBust</span> <span style="color: #e69f00; font-weight: bold;">game</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DotComBust</span>();
<span class="linenr">72: </span>    game.setUpGame();
<span class="linenr">73: </span>    game.startPlaying();
<span class="linenr">74: </span>  }
<span class="linenr">75: </span>
<span class="linenr">76: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org24fafd0" class="outline-3">
<h3 id="org24fafd0"><code>GameHelper.java</code></h3>
<div class="outline-text-3" id="text-org24fafd0">
<p>
chapter 5
</p>
</div>
</div>
</div>

<div id="outline-container-orga858eba" class="outline-2">
<h2 id="orga858eba">07 Better Living in Objectville: <i>planning for the future</i></h2>
<div class="outline-text-2" id="text-orga858eba">
</div>
<div id="outline-container-orgfa044ad" class="outline-3">
<h3 id="orgfa044ad"><code>TestBoat.java</code></h3>
<div class="outline-text-3" id="text-orgfa044ad">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap07;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">TestBoat</span> {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">Boat</span> <span style="color: #e69f00; font-weight: bold;">b1</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Boat</span>();
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">Sailboat</span> <span style="color: #e69f00; font-weight: bold;">b2</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sailboat</span>();
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">Rowboat</span> <span style="color: #e69f00; font-weight: bold;">b3</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Rowboat</span>();
<span class="linenr"> 9: </span>    b2.setLength(32);
<span class="linenr">10: </span>    b1.move();
<span class="linenr">11: </span>    b3.move();
<span class="linenr">12: </span>    b2.move();
<span class="linenr">13: </span>  }
<span class="linenr">14: </span>}
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Boat</span> {
<span class="linenr">17: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">length</span>;
<span class="linenr">18: </span>
<span class="linenr">19: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setLength</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">len</span>) {
<span class="linenr">20: </span>    length = len;
<span class="linenr">21: </span>  }
<span class="linenr">22: </span>
<span class="linenr">23: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getLength</span>() {
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> length;
<span class="linenr">25: </span>  }
<span class="linenr">26: </span>
<span class="linenr">27: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">move</span>() {
<span class="linenr">28: </span>    System.out.print(<span style="color: #848ea9;">"drift "</span>);
<span class="linenr">29: </span>  }
<span class="linenr">30: </span>
<span class="linenr">31: </span>}
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Rowboat</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Boat</span> {
<span class="linenr">34: </span>
<span class="linenr">35: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">rowTheBoat</span>() {
<span class="linenr">36: </span>    System.out.print(<span style="color: #848ea9;">"stroke natasha"</span>);
<span class="linenr">37: </span>  }
<span class="linenr">38: </span>
<span class="linenr">39: </span>}
<span class="linenr">40: </span>
<span class="linenr">41: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Sailboat</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Boat</span> {
<span class="linenr">42: </span>
<span class="linenr">43: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">move</span>() {
<span class="linenr">44: </span>    System.out.print(<span style="color: #848ea9;">"hoist sail "</span>);
<span class="linenr">45: </span>  }
<span class="linenr">46: </span>
<span class="linenr">47: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf4707eb" class="outline-2">
<h2 id="orgf4707eb">08 Serious Polymorphism: <i>exploiting abstract classes and interfaces</i></h2>
<div class="outline-text-2" id="text-orgf4707eb">
</div>
<div id="outline-container-org9145132" class="outline-3">
<h3 id="org9145132"><code>Of76.java</code></h3>
<div class="outline-text-3" id="text-org9145132">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap08;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Of76</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Clowns</span> {
<span class="linenr"> 4: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 5: </span>    <span style="color: #0072b2; font-weight: bold;">Nose</span>[] <span style="color: #e69f00; font-weight: bold;">i</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Nose</span>[3];
<span class="linenr"> 6: </span>    i[0] = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Acts</span>();
<span class="linenr"> 7: </span>    i[1] = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Clowns</span>();
<span class="linenr"> 8: </span>    i[2] = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Of76</span>();
<span class="linenr"> 9: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0; x &lt; 3; x++) {
<span class="linenr">10: </span>      System.out.println(i[x].iMethod() + <span style="color: #848ea9;">" "</span> + i[x].getClass());
<span class="linenr">11: </span>    }
<span class="linenr">12: </span>  }
<span class="linenr">13: </span>}
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #56b4e9; font-weight: bold;">interface</span> <span style="color: #0072b2; font-weight: bold;">Nose</span> {
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">iMethod</span>();
<span class="linenr">18: </span>
<span class="linenr">19: </span>}
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #56b4e9; font-weight: bold;">abstract</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Picasso</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Nose</span> {
<span class="linenr">22: </span>
<span class="linenr">23: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">iMethod</span>() {
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> 7;
<span class="linenr">25: </span>  }
<span class="linenr">26: </span>
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Clowns</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Picasso</span> {
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
<span class="linenr">32: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Acts</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Picasso</span> {
<span class="linenr">33: </span>
<span class="linenr">34: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">iMethod</span>() {
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> 5;
<span class="linenr">36: </span>  }
<span class="linenr">37: </span>
<span class="linenr">38: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6988e22" class="outline-2">
<h2 id="org6988e22">09 Life and Death of an Object: <i>constructors and memory management</i></h2>
<div class="outline-text-2" id="text-org6988e22">
</div>
<div id="outline-container-org28f0cb8" class="outline-3">
<h3 id="org28f0cb8"><code>TestLifeSupportSim.java</code></h3>
<div class="outline-text-3" id="text-org28f0cb8">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap09;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">TestLifeSupportSim</span> {
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SimUnit</span>&gt; <span style="color: #e69f00; font-weight: bold;">aList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SimUnit</span>&gt;();
<span class="linenr">10: </span>    <span style="color: #0072b2; font-weight: bold;">V2Radiator</span> <span style="color: #e69f00; font-weight: bold;">v2</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">V2Radiator</span>(aList);
<span class="linenr">11: </span>    <span style="color: #0072b2; font-weight: bold;">V3Radiator</span> <span style="color: #e69f00; font-weight: bold;">v3</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">V3Radiator</span>(aList);
<span class="linenr">12: </span>
<span class="linenr">13: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">z</span> = 0; z &lt; 20; z++) {
<span class="linenr">14: </span>      <span style="color: #0072b2; font-weight: bold;">RetentionBot</span> <span style="color: #e69f00; font-weight: bold;">ret</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">RetentionBot</span>(aList);
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>
<span class="linenr">17: </span>    <span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">adding this to make sure the power is correct:</span>
<span class="linenr">18: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">totalPower</span> = 0;
<span class="linenr">19: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">o</span> : aList) {
<span class="linenr">20: </span>      totalPower += ((<span style="color: #0072b2; font-weight: bold;">SimUnit</span>) o).powerUse();
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>    System.out.println(<span style="color: #848ea9;">"Total power: "</span> + totalPower);
<span class="linenr">23: </span>  }
<span class="linenr">24: </span>
<span class="linenr">25: </span>}
<span class="linenr">26: </span>
<span class="linenr">27: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">V2Radiator</span> {
<span class="linenr">28: </span>
<span class="linenr">29: </span>  <span style="color: #d55e00;">V2Radiator</span>(<span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SimUnit</span>&gt; <span style="color: #e69f00; font-weight: bold;">list</span>) {
<span class="linenr">30: </span>    System.out.println(<span style="color: #848ea9;">"making a v2 radiator"</span>);
<span class="linenr">31: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0; x &lt; 5; x++) {
<span class="linenr">32: </span>      list.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimUnit</span>(<span style="color: #848ea9;">"V2Radiator"</span>));
<span class="linenr">33: </span>    }
<span class="linenr">34: </span>  }
<span class="linenr">35: </span>
<span class="linenr">36: </span>}
<span class="linenr">37: </span>
<span class="linenr">38: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">V3Radiator</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">V2Radiator</span> {
<span class="linenr">39: </span>
<span class="linenr">40: </span>  <span style="color: #d55e00;">V3Radiator</span>(<span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SimUnit</span>&gt; <span style="color: #e69f00; font-weight: bold;">list</span>) {
<span class="linenr">41: </span>    <span style="color: #56b4e9; font-weight: bold;">super</span>(list);
<span class="linenr">42: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">g</span> = 0; g &lt; 10; g++) {
<span class="linenr">43: </span>      list.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimUnit</span>(<span style="color: #848ea9;">"V3Radiator"</span>));
<span class="linenr">44: </span>    }
<span class="linenr">45: </span>  }
<span class="linenr">46: </span>
<span class="linenr">47: </span>}
<span class="linenr">48: </span>
<span class="linenr">49: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">RetentionBot</span> {
<span class="linenr">50: </span>
<span class="linenr">51: </span>  <span style="color: #d55e00;">RetentionBot</span>(<span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SimUnit</span>&gt; <span style="color: #e69f00; font-weight: bold;">rlist</span>) {
<span class="linenr">52: </span>    rlist.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimUnit</span>(<span style="color: #848ea9;">"Retention"</span>));
<span class="linenr">53: </span>  }
<span class="linenr">54: </span>
<span class="linenr">55: </span>}
<span class="linenr">56: </span>
<span class="linenr">57: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimUnit</span> {
<span class="linenr">58: </span>
<span class="linenr">59: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">botType</span>;
<span class="linenr">60: </span>
<span class="linenr">61: </span>  <span style="color: #d55e00;">SimUnit</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">type</span>) {
<span class="linenr">62: </span>    botType = type;
<span class="linenr">63: </span>  }
<span class="linenr">64: </span>
<span class="linenr">65: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">powerUse</span>() {
<span class="linenr">66: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (<span style="color: #848ea9;">"Retention"</span>.equals(botType)) {
<span class="linenr">67: </span>      <span style="color: #56b4e9; font-weight: bold;">return</span> 2;
<span class="linenr">68: </span>    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">69: </span>      <span style="color: #56b4e9; font-weight: bold;">return</span> 4;
<span class="linenr">70: </span>    }
<span class="linenr">71: </span>
<span class="linenr">72: </span>  }
<span class="linenr">73: </span>
<span class="linenr">74: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org52e4332" class="outline-2">
<h2 id="org52e4332">10 Numbers Matter: <i>math, formatting, wrappers, and statics</i></h2>
<div class="outline-text-2" id="text-org52e4332">
</div>
<div id="outline-container-org4db1e8e" class="outline-3">
<h3 id="org4db1e8e"><code>FullMoons.java</code></h3>
<div class="outline-text-3" id="text-org4db1e8e">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap10;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Calendar</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.System.<span style="color: #0072b2; font-weight: bold;">out</span>;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">FullMoons</span> {
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">DAY_IM</span> = 1000 * 60 * 60 * 24;
<span class="linenr">10: </span>
<span class="linenr">11: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">Calendar</span> <span style="color: #e69f00; font-weight: bold;">c</span> = Calendar.getInstance();
<span class="linenr">13: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">c.set(2004, 0, 7, 15, 40);</span>
<span class="linenr">14: </span>    c.set(2020, 0, 7, 15, 40);
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">day1</span> = c.getTimeInMillis();
<span class="linenr">16: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0; x &lt; 60; x++) {
<span class="linenr">17: </span>      day1 += (DAY_IM * 29.52); <span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">TODO: added this last semi-colon</span>
<span class="linenr">18: </span>      c.setTimeInMillis(day1);
<span class="linenr">19: </span>      out.println(String.format(<span style="color: #848ea9;">"full moon on %tc"</span>, c));
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>  }
<span class="linenr">22: </span>
<span class="linenr">23: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org71e0c12" class="outline-2">
<h2 id="org71e0c12">11 Risky Behavior: <i>exception handling</i></h2>
<div class="outline-text-2" id="text-org71e0c12">
</div>
<div id="outline-container-orgbd9514f" class="outline-3">
<h3 id="orgbd9514f"><code>MiniMiniMusicApp.java</code></h3>
<div class="outline-text-3" id="text-orgbd9514f">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap11;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiEvent</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiMessage</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiSystem</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequence</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequencer</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ShortMessage</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Track</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicApp</span> {   <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this is the first one</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicApp</span> <span style="color: #e69f00; font-weight: bold;">mini</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicApp</span>();
<span class="linenr">15: </span>    mini.play();
<span class="linenr">16: </span>  }
<span class="linenr">17: </span>
<span class="linenr">18: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">play</span>() {
<span class="linenr">19: </span>
<span class="linenr">20: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">21: </span>
<span class="linenr">22: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make (and open) a sequencer, make a sequence and track</span>
<span class="linenr">23: </span>
<span class="linenr">24: </span>      <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span> = MidiSystem.getSequencer();         
<span class="linenr">25: </span>      sequencer.open();
<span class="linenr">26: </span>
<span class="linenr">27: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">seq</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ, 4);
<span class="linenr">28: </span>      <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span> = seq.createTrack();     
<span class="linenr">29: </span>
<span class="linenr">30: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now make two midi events (containing a midi message)</span>
<span class="linenr">31: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">32: </span>
<span class="linenr">33: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">first make the message</span>
<span class="linenr">34: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">then stick the message into a midi event </span>
<span class="linenr">35: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">and add the event to the track</span>
<span class="linenr">36: </span>
<span class="linenr">37: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">38: </span>      a.setMessage(144, 1, 44, 100);
<span class="linenr">39: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">noteOn</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, 1); <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">&lt;-- means at tick one, the above event happens</span>
<span class="linenr">40: </span>      track.add(noteOn);
<span class="linenr">41: </span>
<span class="linenr">42: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">b</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">43: </span>      b.setMessage(128, 1, 44, 100);
<span class="linenr">44: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">noteOff</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(b, 16); <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">&lt;-- means at tick one, the above event happens</span>
<span class="linenr">45: </span>      track.add(noteOff);
<span class="linenr">46: </span>
<span class="linenr">47: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the events to the track</span>
<span class="linenr">48: </span>
<span class="linenr">49: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the sequence to the sequencer, set timing, and start</span>
<span class="linenr">50: </span>      sequencer.setSequence(seq);
<span class="linenr">51: </span>
<span class="linenr">52: </span>      sequencer.start();
<span class="linenr">53: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new</span>
<span class="linenr">54: </span>      Thread.sleep(1000);
<span class="linenr">55: </span>      sequencer.close();
<span class="linenr">56: </span>      System.exit(0);
<span class="linenr">57: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">58: </span>      ex.printStackTrace();
<span class="linenr">59: </span>    }
<span class="linenr">60: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close play</span>
<span class="linenr">61: </span>
<span class="linenr">62: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b18c0e" class="outline-3">
<h3 id="org1b18c0e"><code>MiniMiniMusicCmdLine.java</code></h3>
<div class="outline-text-3" id="text-org1b18c0e">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap11;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiEvent</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiMessage</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiSystem</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequence</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequencer</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ShortMessage</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Track</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicCmdLine</span> {   <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this is the first one</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicCmdLine</span> <span style="color: #e69f00; font-weight: bold;">mini</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MiniMiniMusicCmdLine</span>();
<span class="linenr">16: </span>    <span style="color: #56b4e9; font-weight: bold;">if</span> (args.length &lt; 2) {
<span class="linenr">17: </span>      System.out.println(<span style="color: #848ea9;">"Don't forget the instrument and note args"</span>);
<span class="linenr">18: </span>    } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">19: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">instrument</span> = Integer.parseInt(args[0]);
<span class="linenr">20: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">note</span> = Integer.parseInt(args[1]);
<span class="linenr">21: </span>      mini.play(instrument, note);
<span class="linenr">22: </span>    }
<span class="linenr">23: </span>  }
<span class="linenr">24: </span>
<span class="linenr">25: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">play</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">instrument</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">note</span>) {
<span class="linenr">26: </span>
<span class="linenr">27: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">28: </span>
<span class="linenr">29: </span>      <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">player</span> = MidiSystem.getSequencer();         
<span class="linenr">30: </span>      player.open();
<span class="linenr">31: </span>
<span class="linenr">32: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">seq</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ, 4);         
<span class="linenr">33: </span>      <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span> = seq.createTrack();  
<span class="linenr">34: </span>
<span class="linenr">35: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">36: </span>
<span class="linenr">37: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">first</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">38: </span>      first.setMessage(192, 1, instrument, 0);
<span class="linenr">39: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">changeInstrument</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(first, 1); 
<span class="linenr">40: </span>      track.add(changeInstrument);
<span class="linenr">41: </span>
<span class="linenr">42: </span>
<span class="linenr">43: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">44: </span>      a.setMessage(144, 1, note, 100);
<span class="linenr">45: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">noteOn</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, 1); 
<span class="linenr">46: </span>      track.add(noteOn);
<span class="linenr">47: </span>
<span class="linenr">48: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">b</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">49: </span>      b.setMessage(128, 1, note, 100);
<span class="linenr">50: </span>      <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">noteOff</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(b, 16); 
<span class="linenr">51: </span>      track.add(noteOff);
<span class="linenr">52: </span>      player.setSequence(seq); 
<span class="linenr">53: </span>      player.start();
<span class="linenr">54: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new</span>
<span class="linenr">55: </span>      Thread.sleep(5000);
<span class="linenr">56: </span>      player.close();
<span class="linenr">57: </span>      System.exit(0);
<span class="linenr">58: </span>
<span class="linenr">59: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">60: </span>      ex.printStackTrace();
<span class="linenr">61: </span>    }
<span class="linenr">62: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close play</span>
<span class="linenr">63: </span>
<span class="linenr">64: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7cdd8f3" class="outline-2">
<h2 id="org7cdd8f3">12 A Very Graphic Story: <i>intro to GUI, event handling, and inner classes</i></h2>
<div class="outline-text-2" id="text-org7cdd8f3">
</div>
<div id="outline-container-orgd9267c8" class="outline-3">
<h3 id="orgd9267c8"><code>Animate.java</code></h3>
<div class="outline-text-3" id="text-orgd9267c8">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap12;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Color</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Animate</span> {
<span class="linenr">11: </span>
<span class="linenr">12: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 1;
<span class="linenr">13: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span> = 1;
<span class="linenr">14: </span>
<span class="linenr">15: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">16: </span>    <span style="color: #0072b2; font-weight: bold;">Animate</span> <span style="color: #e69f00; font-weight: bold;">gui</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Animate</span>();
<span class="linenr">17: </span>    gui.go();
<span class="linenr">18: </span>  }
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">21: </span>
<span class="linenr">22: </span>    <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>();
<span class="linenr">23: </span>    frame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr">24: </span>    <span style="color: #0072b2; font-weight: bold;">MyDrawP</span> <span style="color: #e69f00; font-weight: bold;">drawP</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDrawP</span>();
<span class="linenr">25: </span>    frame.getContentPane().add(drawP);
<span class="linenr">26: </span>    frame.setSize(500,270);
<span class="linenr">27: </span>    frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">28: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 124; i++,x++,y++) {
<span class="linenr">29: </span>      x++;
<span class="linenr">30: </span>      drawP.repaint();
<span class="linenr">31: </span>      <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">32: </span>        Thread.sleep(50);
<span class="linenr">33: </span>      } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">34: </span>      }
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>  }
<span class="linenr">37: </span>
<span class="linenr">38: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDrawP</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> {
<span class="linenr">39: </span>
<span class="linenr">40: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">paintComponent</span>(<span style="color: #0072b2; font-weight: bold;">Graphics</span> <span style="color: #e69f00; font-weight: bold;">g</span>) {
<span class="linenr">41: </span>      g.setColor(Color.white);
<span class="linenr">42: </span>      g.fillRect(0,0,500,250);
<span class="linenr">43: </span>      g.setColor(Color.blue);
<span class="linenr">44: </span>      g.fillRect(x,y,500 - x * 2, 250 - y * 2);
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>
<span class="linenr">47: </span>  }
<span class="linenr">48: </span>
<span class="linenr">49: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab8b24b" class="outline-3">
<h3 id="orgab8b24b"><code>MiniMusicPlayer3.java</code></h3>
<div class="outline-text-3" id="text-orgab8b24b">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap12;</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Color</span>;
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics</span>;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics2D</span>;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ControllerEventListener</span>;
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiEvent</span>;
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiMessage</span>;
<span class="linenr"> 10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiSystem</span>;
<span class="linenr"> 11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequence</span>;
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequencer</span>;
<span class="linenr"> 13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ShortMessage</span>;
<span class="linenr"> 14: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Track</span>;
<span class="linenr"> 15: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr"> 16: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr"> 17: </span>
<span class="linenr"> 18: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this one plays random music with it, but only because there is a listener.</span>
<span class="linenr"> 19: </span>
<span class="linenr"> 20: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MiniMusicPlayer3</span> {
<span class="linenr"> 21: </span>
<span class="linenr"> 22: </span>  <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">f</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"My First Music Video"</span>);
<span class="linenr"> 23: </span>  <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #e69f00; font-weight: bold;">ml</span>;
<span class="linenr"> 24: </span>
<span class="linenr"> 25: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 26: </span>    <span style="color: #0072b2; font-weight: bold;">MiniMusicPlayer3</span> <span style="color: #e69f00; font-weight: bold;">mini</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MiniMusicPlayer3</span>();
<span class="linenr"> 27: </span>    mini.go();
<span class="linenr"> 28: </span>  }
<span class="linenr"> 29: </span>
<span class="linenr"> 30: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpGui</span>() {
<span class="linenr"> 31: </span>    ml = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span>();
<span class="linenr"> 32: </span>    f.setContentPane(ml);
<span class="linenr"> 33: </span>    f.setBounds(30, 30, 300, 300);
<span class="linenr"> 34: </span>    f.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 35: </span>  }
<span class="linenr"> 36: </span>
<span class="linenr"> 37: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 38: </span>    setUpGui();
<span class="linenr"> 39: </span>
<span class="linenr"> 40: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 41: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make (and open) a sequencer, make a sequence and track</span>
<span class="linenr"> 42: </span>      <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span> = MidiSystem.getSequencer();         
<span class="linenr"> 43: </span>      sequencer.open();
<span class="linenr"> 44: </span>
<span class="linenr"> 45: </span>      sequencer.addControllerEventListener(ml, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[] {127});
<span class="linenr"> 46: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">seq</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ, 4);
<span class="linenr"> 47: </span>      <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span> = seq.createTrack();     
<span class="linenr"> 48: </span>
<span class="linenr"> 49: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now make two midi events (containing a midi message)</span>
<span class="linenr"> 50: </span>
<span class="linenr"> 51: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">r</span> = 0;
<span class="linenr"> 52: </span>      <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 60; i += 4) {
<span class="linenr"> 53: </span>
<span class="linenr"> 54: </span>        r = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 50) + 1);
<span class="linenr"> 55: </span>
<span class="linenr"> 56: </span>        track.add(makeEvent(144,1,r,100,i));
<span class="linenr"> 57: </span>
<span class="linenr"> 58: </span>        track.add(makeEvent(176,1,127,0,i));
<span class="linenr"> 59: </span>
<span class="linenr"> 60: </span>        track.add(makeEvent(128,1,r,100,i + 2));
<span class="linenr"> 61: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end loop</span>
<span class="linenr"> 62: </span>
<span class="linenr"> 63: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the events to the track            </span>
<span class="linenr"> 64: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the sequence to the sequencer, set timing, and start</span>
<span class="linenr"> 65: </span>
<span class="linenr"> 66: </span>      sequencer.setSequence(seq);
<span class="linenr"> 67: </span>
<span class="linenr"> 68: </span>      sequencer.start();
<span class="linenr"> 69: </span>      sequencer.setTempoInBPM(120);
<span class="linenr"> 70: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr"> 71: </span>      ex.printStackTrace();
<span class="linenr"> 72: </span>    }
<span class="linenr"> 73: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close go</span>
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span>
<span class="linenr"> 76: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #d55e00;">makeEvent</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comd</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">chan</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">two</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tick</span>) {
<span class="linenr"> 77: </span>    <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr"> 78: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 79: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr"> 80: </span>      a.setMessage(comd, chan, one, two);
<span class="linenr"> 81: </span>      event = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, tick);
<span class="linenr"> 82: </span>
<span class="linenr"> 83: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr"> 84: </span>    }
<span class="linenr"> 85: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> event;
<span class="linenr"> 86: </span>  }
<span class="linenr"> 87: </span>
<span class="linenr"> 88: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ControllerEventListener</span> {
<span class="linenr"> 89: </span>
<span class="linenr"> 90: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">only if we got an event do we want to paint</span>
<span class="linenr"> 91: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">msg</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr"> 92: </span>
<span class="linenr"> 93: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">controlChange</span>(<span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">event</span>) {
<span class="linenr"> 94: </span>      msg = <span style="color: #d55e00; font-weight: bold;">true</span>;       
<span class="linenr"> 95: </span>      repaint();         
<span class="linenr"> 96: </span>    }
<span class="linenr"> 97: </span>
<span class="linenr"> 98: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">paintComponent</span>(<span style="color: #0072b2; font-weight: bold;">Graphics</span> <span style="color: #e69f00; font-weight: bold;">g</span>) {
<span class="linenr"> 99: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (msg) {
<span class="linenr">100: </span>
<span class="linenr">101: </span>        <span style="color: #0072b2; font-weight: bold;">Graphics2D</span> <span style="color: #e69f00; font-weight: bold;">g2</span> = (<span style="color: #0072b2; font-weight: bold;">Graphics2D</span>) g;
<span class="linenr">102: </span>
<span class="linenr">103: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">r</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">104: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gr</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">105: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">b</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">106: </span>
<span class="linenr">107: </span>        g.setColor(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Color</span>(r,gr,b));
<span class="linenr">108: </span>
<span class="linenr">109: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ht</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 120) + 10);
<span class="linenr">110: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">width</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 120) + 10);
<span class="linenr">111: </span>
<span class="linenr">112: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 40) + 10);
<span class="linenr">113: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 40) + 10);
<span class="linenr">114: </span>
<span class="linenr">115: </span>        g.fillRect(x,y,ht, width);
<span class="linenr">116: </span>        msg = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">117: </span>
<span class="linenr">118: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close if</span>
<span class="linenr">119: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">120: </span>  }  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">121: </span>
<span class="linenr">122: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org322c46b" class="outline-3">
<h3 id="org322c46b"><code>SimpleAnimation.java</code></h3>
<div class="outline-text-3" id="text-org322c46b">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap12;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Color</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimpleAnimation</span> {
<span class="linenr">11: </span>
<span class="linenr">12: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 70;
<span class="linenr">13: </span>  <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span> = 70;
<span class="linenr">14: </span>
<span class="linenr">15: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">16: </span>    <span style="color: #0072b2; font-weight: bold;">SimpleAnimation</span> <span style="color: #e69f00; font-weight: bold;">gui</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleAnimation</span>();
<span class="linenr">17: </span>    gui.go();
<span class="linenr">18: </span>  }
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">21: </span>    <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>();
<span class="linenr">22: </span>    frame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr">23: </span>    <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #e69f00; font-weight: bold;">drawPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span>();
<span class="linenr">24: </span>    frame.getContentPane().add(drawPanel);
<span class="linenr">25: </span>    frame.setSize(300,300);
<span class="linenr">26: </span>    frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">27: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 130; i++) {
<span class="linenr">28: </span>      x++;
<span class="linenr">29: </span>      y++;
<span class="linenr">30: </span>      drawPanel.repaint();
<span class="linenr">31: </span>      <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">32: </span>        Thread.sleep(50);
<span class="linenr">33: </span>      } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">34: </span>      }
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close go() method</span>
<span class="linenr">37: </span>
<span class="linenr">38: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> {
<span class="linenr">39: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">paintComponent</span>(<span style="color: #0072b2; font-weight: bold;">Graphics</span> <span style="color: #e69f00; font-weight: bold;">g</span>) {
<span class="linenr">40: </span>      g.setColor(Color.white);
<span class="linenr">41: </span>      g.fillRect(0, 0, <span style="color: #56b4e9; font-weight: bold;">this</span>.getWidth(), <span style="color: #56b4e9; font-weight: bold;">this</span>.getHeight());
<span class="linenr">42: </span>      g.setColor(Color.green);
<span class="linenr">43: </span>      g.fillOval(x,y,40,40);
<span class="linenr">44: </span>    }
<span class="linenr">45: </span>
<span class="linenr">46: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">47: </span>
<span class="linenr">48: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close outer class</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b90dc9" class="outline-3">
<h3 id="org2b90dc9"><code>TwoButtons.java</code></h3>
<div class="outline-text-3" id="text-org2b90dc9">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap12;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">BorderLayout</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Color</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JButton</span>;
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr">12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JLabel</span>;
<span class="linenr">13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">TwoButtons</span> {
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span>;
<span class="linenr">18: </span>  <span style="color: #0072b2; font-weight: bold;">JLabel</span> <span style="color: #e69f00; font-weight: bold;">label</span>;
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">21: </span>    <span style="color: #0072b2; font-weight: bold;">TwoButtons</span> <span style="color: #e69f00; font-weight: bold;">gui</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">TwoButtons</span>();
<span class="linenr">22: </span>    gui.go();
<span class="linenr">23: </span>  }
<span class="linenr">24: </span>
<span class="linenr">25: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">26: </span>    frame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>();
<span class="linenr">27: </span>    frame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr">28: </span>
<span class="linenr">29: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">labelButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Change Label"</span>);
<span class="linenr">30: </span>    labelButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">LabelButtonListener</span>());
<span class="linenr">31: </span>
<span class="linenr">32: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">colorButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Change Circle"</span>);
<span class="linenr">33: </span>    colorButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ColorButtonListener</span>());
<span class="linenr">34: </span>
<span class="linenr">35: </span>    label = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"I'm a label"</span>);
<span class="linenr">36: </span>    <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #e69f00; font-weight: bold;">drawPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span>();
<span class="linenr">37: </span>
<span class="linenr">38: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.SOUTH, colorButton);
<span class="linenr">39: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, drawPanel);
<span class="linenr">40: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.EAST, labelButton);
<span class="linenr">41: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.WEST, label);
<span class="linenr">42: </span>
<span class="linenr">43: </span>    frame.setSize(420,300);
<span class="linenr">44: </span>    frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">45: </span>  }
<span class="linenr">46: </span>
<span class="linenr">47: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">LabelButtonListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">48: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span>) {
<span class="linenr">49: </span>      label.setText(<span style="color: #848ea9;">"Ouch!"</span>);
<span class="linenr">50: </span>    }
<span class="linenr">51: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">52: </span>
<span class="linenr">53: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ColorButtonListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">54: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span>) {
<span class="linenr">55: </span>      frame.repaint();
<span class="linenr">56: </span>    }
<span class="linenr">57: </span>  }  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">58: </span>
<span class="linenr">59: </span>}
<span class="linenr">60: </span>
<span class="linenr">61: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> {
<span class="linenr">62: </span>
<span class="linenr">63: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">paintComponent</span>(<span style="color: #0072b2; font-weight: bold;">Graphics</span> <span style="color: #e69f00; font-weight: bold;">g</span>) {
<span class="linenr">64: </span>
<span class="linenr">65: </span>    g.fillRect(0,0,<span style="color: #56b4e9; font-weight: bold;">this</span>.getWidth(), <span style="color: #56b4e9; font-weight: bold;">this</span>.getHeight());
<span class="linenr">66: </span>
<span class="linenr">67: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make random colors to fill with</span>
<span class="linenr">68: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">red</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 255);
<span class="linenr">69: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">green</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 255);
<span class="linenr">70: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">blue</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 255);
<span class="linenr">71: </span>
<span class="linenr">72: </span>    <span style="color: #0072b2; font-weight: bold;">Color</span> <span style="color: #e69f00; font-weight: bold;">randomColor</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Color</span>(red, green, blue);
<span class="linenr">73: </span>    g.setColor(randomColor);
<span class="linenr">74: </span>    g.fillOval(70,70,100,100);
<span class="linenr">75: </span>  }
<span class="linenr">76: </span>
<span class="linenr">77: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0741a28" class="outline-2">
<h2 id="org0741a28">13 Work on Your Swing: <i>layout managers and components</i></h2>
<div class="outline-text-2" id="text-org0741a28">
</div>
<div id="outline-container-orge2b711b" class="outline-3">
<h3 id="orge2b711b"><code>BeatBox.java</code></h3>
<div class="outline-text-3" id="text-orge2b711b">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap13;</span>
<span class="linenr">  2: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">chapter 13</span>
<span class="linenr">  3: </span>
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">BorderLayout</span>;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">GridLayout</span>;
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Label</span>;
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">LayoutManager</span>;
<span class="linenr"> 10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr"> 11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiEvent</span>;
<span class="linenr"> 14: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiMessage</span>;
<span class="linenr"> 15: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiSystem</span>;
<span class="linenr"> 16: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequence</span>;
<span class="linenr"> 17: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequencer</span>;
<span class="linenr"> 18: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ShortMessage</span>;
<span class="linenr"> 19: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Track</span>;
<span class="linenr"> 20: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">BorderFactory</span>;
<span class="linenr"> 21: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">Box</span>;
<span class="linenr"> 22: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">BoxLayout</span>;
<span class="linenr"> 23: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JButton</span>;
<span class="linenr"> 24: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>;
<span class="linenr"> 25: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr"> 26: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr"> 27: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #d55e00; font-weight: bold;">border</span>.<span style="color: #0072b2; font-weight: bold;">Border</span>;
<span class="linenr"> 28: </span>
<span class="linenr"> 29: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">BeatBox</span> {
<span class="linenr"> 30: </span>
<span class="linenr"> 31: </span>  <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span>;
<span class="linenr"> 32: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt; <span style="color: #e69f00; font-weight: bold;">checkboxList</span>;
<span class="linenr"> 33: </span>  <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span>;
<span class="linenr"> 34: </span>  <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">sequence</span>;
<span class="linenr"> 35: </span>  <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span>;
<span class="linenr"> 36: </span>  <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">theFrame</span>;
<span class="linenr"> 37: </span>
<span class="linenr"> 38: </span>  <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">instrumentNames</span> = {<span style="color: #848ea9;">"Bass Drum"</span>, <span style="color: #848ea9;">"Closed Hi-Hat"</span>, <span style="color: #848ea9;">"Open Hi-Hat"</span>,
<span class="linenr"> 39: </span>                              <span style="color: #848ea9;">"Acoustic Snare"</span>, <span style="color: #848ea9;">"Crash Cymbal"</span>, <span style="color: #848ea9;">"Hand Clap"</span>, 
<span class="linenr"> 40: </span>                              <span style="color: #848ea9;">"High Tom"</span>, <span style="color: #848ea9;">"Hi Bongo"</span>, <span style="color: #848ea9;">"Maracas"</span>, <span style="color: #848ea9;">"Whistle"</span>,
<span class="linenr"> 41: </span>                              <span style="color: #848ea9;">"Low Conga"</span>, <span style="color: #848ea9;">"Cowbell"</span>, <span style="color: #848ea9;">"Vibraslap"</span>, <span style="color: #848ea9;">"Low-mid Tom"</span>,
<span class="linenr"> 42: </span>                              <span style="color: #848ea9;">"High Agogo"</span>, <span style="color: #848ea9;">"Open Hi Conga"</span>};
<span class="linenr"> 43: </span>  <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">instruments</span> = {35,42,46,38,49,39,50,60,70,72,64,56,58,47,67,63};
<span class="linenr"> 44: </span>
<span class="linenr"> 45: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 46: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BeatBox</span>().buildGUI();
<span class="linenr"> 47: </span>  }
<span class="linenr"> 48: </span>
<span class="linenr"> 49: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildGUI</span>() {
<span class="linenr"> 50: </span>    theFrame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Cyber BeatBox"</span>);
<span class="linenr"> 51: </span>    theFrame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr"> 52: </span>    <span style="color: #0072b2; font-weight: bold;">BorderLayout</span> <span style="color: #e69f00; font-weight: bold;">layout</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BorderLayout</span>();
<span class="linenr"> 53: </span>    <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">background</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(layout);
<span class="linenr"> 54: </span>    background.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
<span class="linenr"> 55: </span>
<span class="linenr"> 56: </span>    checkboxList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt;();
<span class="linenr"> 57: </span>    <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">buttonBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr"> 58: </span>
<span class="linenr"> 59: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">start</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Start"</span>);
<span class="linenr"> 60: </span>    start.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span>());
<span class="linenr"> 61: </span>    buttonBox.add(start);         
<span class="linenr"> 62: </span>
<span class="linenr"> 63: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">stop</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Stop"</span>);
<span class="linenr"> 64: </span>    stop.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span>());
<span class="linenr"> 65: </span>    buttonBox.add(stop);
<span class="linenr"> 66: </span>
<span class="linenr"> 67: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">upTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Up"</span>);
<span class="linenr"> 68: </span>    upTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span>());
<span class="linenr"> 69: </span>    buttonBox.add(upTempo);
<span class="linenr"> 70: </span>
<span class="linenr"> 71: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">downTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Down"</span>);
<span class="linenr"> 72: </span>    downTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span>());
<span class="linenr"> 73: </span>    buttonBox.add(downTempo);
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span>    <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">nameBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr"> 76: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr"> 77: </span>      nameBox.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Label</span>(instrumentNames[i]));
<span class="linenr"> 78: </span>    }
<span class="linenr"> 79: </span>
<span class="linenr"> 80: </span>    background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.EAST, buttonBox);
<span class="linenr"> 81: </span>    background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.WEST, nameBox);
<span class="linenr"> 82: </span>
<span class="linenr"> 83: </span>    theFrame.getContentPane().add(background);
<span class="linenr"> 84: </span>
<span class="linenr"> 85: </span>    <span style="color: #0072b2; font-weight: bold;">GridLayout</span> <span style="color: #e69f00; font-weight: bold;">grid</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GridLayout</span>(16,16);
<span class="linenr"> 86: </span>    grid.setVgap(1);
<span class="linenr"> 87: </span>    grid.setHgap(2);
<span class="linenr"> 88: </span>    mainPanel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(grid);
<span class="linenr"> 89: </span>    background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr"> 90: </span>
<span class="linenr"> 91: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {                    
<span class="linenr"> 92: </span>      <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">c</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JCheckBox</span>();
<span class="linenr"> 93: </span>      c.setSelected(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr"> 94: </span>      checkboxList.add(c);
<span class="linenr"> 95: </span>      mainPanel.add(c);            
<span class="linenr"> 96: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end loop</span>
<span class="linenr"> 97: </span>
<span class="linenr"> 98: </span>    setUpMidi();
<span class="linenr"> 99: </span>
<span class="linenr">100: </span>    theFrame.setBounds(50,50,300,300);
<span class="linenr">101: </span>    theFrame.pack();
<span class="linenr">102: </span>    theFrame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">103: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">104: </span>
<span class="linenr">105: </span>
<span class="linenr">106: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpMidi</span>() {
<span class="linenr">107: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">108: </span>      sequencer = MidiSystem.getSequencer();
<span class="linenr">109: </span>      sequencer.open();
<span class="linenr">110: </span>      sequence = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ,4);
<span class="linenr">111: </span>      track = sequence.createTrack();
<span class="linenr">112: </span>      sequencer.setTempoInBPM(120);
<span class="linenr">113: </span>
<span class="linenr">114: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr">115: </span>      e.printStackTrace();
<span class="linenr">116: </span>    }
<span class="linenr">117: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">118: </span>
<span class="linenr">119: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildTrackAndStart</span>() {
<span class="linenr">120: </span>    <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">trackList</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">121: </span>
<span class="linenr">122: </span>    sequence.deleteTrack(track);
<span class="linenr">123: </span>    track = sequence.createTrack();
<span class="linenr">124: </span>
<span class="linenr">125: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">126: </span>      trackList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[16];
<span class="linenr">127: </span>
<span class="linenr">128: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">key</span> = instruments[i];   
<span class="linenr">129: </span>
<span class="linenr">130: </span>      <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span> = 0; j &lt; 16; j++) {         
<span class="linenr">131: </span>        <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">jc</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(j + (16 * i));
<span class="linenr">132: </span>        <span style="color: #56b4e9; font-weight: bold;">if</span> (jc.isSelected()) {
<span class="linenr">133: </span>          trackList[j] = key;
<span class="linenr">134: </span>        } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">135: </span>          trackList[j] = 0;
<span class="linenr">136: </span>        }                    
<span class="linenr">137: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner loop</span>
<span class="linenr">138: </span>
<span class="linenr">139: </span>      makeTracks(trackList);
<span class="linenr">140: </span>      track.add(makeEvent(176,1,127,0,16));  
<span class="linenr">141: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close outer</span>
<span class="linenr">142: </span>
<span class="linenr">143: </span>    track.add(makeEvent(192,9,1,0,15));      
<span class="linenr">144: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">145: </span>      sequencer.setSequence(sequence); 
<span class="linenr">146: </span>      sequencer.setLoopCount(<span style="color: #d55e00; font-weight: bold;">sequencer</span>.LOOP_CONTINUOUSLY);                   
<span class="linenr">147: </span>      sequencer.start();
<span class="linenr">148: </span>      sequencer.setTempoInBPM(120);
<span class="linenr">149: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr">150: </span>      e.printStackTrace();
<span class="linenr">151: </span>    }
<span class="linenr">152: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close buildTrackAndStart method</span>
<span class="linenr">153: </span>
<span class="linenr">154: </span>
<span class="linenr">155: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">156: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">157: </span>      buildTrackAndStart();
<span class="linenr">158: </span>    }
<span class="linenr">159: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">160: </span>
<span class="linenr">161: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">162: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">163: </span>      sequencer.stop();
<span class="linenr">164: </span>    }
<span class="linenr">165: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">166: </span>
<span class="linenr">167: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">168: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">169: </span>      <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor(); 
<span class="linenr">170: </span>      sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * 1.03));
<span class="linenr">171: </span>    }
<span class="linenr">172: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">173: </span>
<span class="linenr">174: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">175: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">176: </span>      <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor();
<span class="linenr">177: </span>      sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * .97));
<span class="linenr">178: </span>    }
<span class="linenr">179: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">180: </span>
<span class="linenr">181: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">makeTracks</span>(<span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">list</span>) {        
<span class="linenr">182: </span>
<span class="linenr">183: </span>    <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">184: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">key</span> = list[i];
<span class="linenr">185: </span>
<span class="linenr">186: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (key != 0) {
<span class="linenr">187: </span>        track.add(makeEvent(144,9,key, 100, i));
<span class="linenr">188: </span>        track.add(makeEvent(128,9,key, 100, i + 1));
<span class="linenr">189: </span>      }
<span class="linenr">190: </span>    }
<span class="linenr">191: </span>  }
<span class="linenr">192: </span>
<span class="linenr">193: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span>  <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #d55e00;">makeEvent</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comd</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">chan</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">two</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tick</span>) {
<span class="linenr">194: </span>    <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">195: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">196: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">197: </span>      a.setMessage(comd, chan, one, two);
<span class="linenr">198: </span>      event = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, tick);
<span class="linenr">199: </span>
<span class="linenr">200: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr">201: </span>      e.printStackTrace();
<span class="linenr">202: </span>    }
<span class="linenr">203: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> event;
<span class="linenr">204: </span>  }
<span class="linenr">205: </span>
<span class="linenr">206: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org41bdcf3" class="outline-2">
<h2 id="org41bdcf3"><span class="todo TODO">TODO</span> 14 Saving Objects: <i>serialization and I/O</i></h2>
<div class="outline-text-2" id="text-org41bdcf3">
</div>
<div id="outline-container-orge5d0205" class="outline-3">
<h3 id="orge5d0205"><code>chap14/BeatBoxSaveOnly.java</code></h3>
<div class="outline-text-3" id="text-orge5d0205">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr">  2: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">chapter 14</span>
<span class="linenr">  3: </span>
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.*;
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr"> 10: </span>
<span class="linenr"> 11: </span>
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">BeatBoxSaveOnly</span> {  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">implements MetaEventListener </span>
<span class="linenr"> 13: </span>
<span class="linenr"> 14: </span>      <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span>;
<span class="linenr"> 15: </span>      <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt; <span style="color: #e69f00; font-weight: bold;">checkboxList</span>;
<span class="linenr"> 16: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">int bpm = 120;</span>
<span class="linenr"> 17: </span>      <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span>;
<span class="linenr"> 18: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">sequence</span>;
<span class="linenr"> 19: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">mySequence</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr"> 20: </span>      <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span>;
<span class="linenr"> 21: </span>      <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">theFrame</span>;
<span class="linenr"> 22: </span>
<span class="linenr"> 23: </span>      <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">instrumentNames</span> = {<span style="color: #848ea9;">"Bass Drum"</span>, <span style="color: #848ea9;">"Closed Hi-Hat"</span>, 
<span class="linenr"> 24: </span>         <span style="color: #848ea9;">"Open Hi-Hat"</span>,<span style="color: #848ea9;">"Acoustic Snare"</span>, <span style="color: #848ea9;">"Crash Cymbal"</span>, <span style="color: #848ea9;">"Hand Clap"</span>, 
<span class="linenr"> 25: </span>         <span style="color: #848ea9;">"High Tom"</span>, <span style="color: #848ea9;">"Hi Bongo"</span>, <span style="color: #848ea9;">"Maracas"</span>, <span style="color: #848ea9;">"Whistle"</span>, <span style="color: #848ea9;">"Low Conga"</span>, 
<span class="linenr"> 26: </span>         <span style="color: #848ea9;">"Cowbell"</span>, <span style="color: #848ea9;">"Vibraslap"</span>, <span style="color: #848ea9;">"Low-mid Tom"</span>, <span style="color: #848ea9;">"High Agogo"</span>, 
<span class="linenr"> 27: </span>         <span style="color: #848ea9;">"Open Hi Conga"</span>};
<span class="linenr"> 28: </span>      <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">instruments</span> = {35,42,46,38,49,39,50,60,70,72,64,56,58,47,67,63};
<span class="linenr"> 29: </span>
<span class="linenr"> 30: </span>
<span class="linenr"> 31: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 32: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BeatBoxSaveOnly</span>().buildGUI();
<span class="linenr"> 33: </span>      }
<span class="linenr"> 34: </span>
<span class="linenr"> 35: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildGUI</span>() {
<span class="linenr"> 36: </span>          theFrame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Cyber BeatBox"</span>);
<span class="linenr"> 37: </span>          theFrame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr"> 38: </span>          <span style="color: #0072b2; font-weight: bold;">BorderLayout</span> <span style="color: #e69f00; font-weight: bold;">layout</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BorderLayout</span>();
<span class="linenr"> 39: </span>          <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">background</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(layout);
<span class="linenr"> 40: </span>          background.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
<span class="linenr"> 41: </span>
<span class="linenr"> 42: </span>          checkboxList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt;();
<span class="linenr"> 43: </span>          <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">buttonBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr"> 44: </span>
<span class="linenr"> 45: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">start</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Start"</span>);
<span class="linenr"> 46: </span>          start.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span>());
<span class="linenr"> 47: </span>          buttonBox.add(start);
<span class="linenr"> 48: </span>
<span class="linenr"> 49: </span>
<span class="linenr"> 50: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">stop</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Stop"</span>);
<span class="linenr"> 51: </span>          stop.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span>());
<span class="linenr"> 52: </span>          buttonBox.add(stop);
<span class="linenr"> 53: </span>
<span class="linenr"> 54: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">upTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Up"</span>);
<span class="linenr"> 55: </span>          upTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span>());
<span class="linenr"> 56: </span>          buttonBox.add(upTempo);
<span class="linenr"> 57: </span>
<span class="linenr"> 58: </span>           <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">downTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Down"</span>);
<span class="linenr"> 59: </span>          downTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span>());
<span class="linenr"> 60: </span>          buttonBox.add(downTempo);
<span class="linenr"> 61: </span>
<span class="linenr"> 62: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">saveIt</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Serialize It"</span>);  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new button</span>
<span class="linenr"> 63: </span>          saveIt.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MySendListener</span>());
<span class="linenr"> 64: </span>          buttonBox.add(saveIt);
<span class="linenr"> 65: </span>
<span class="linenr"> 66: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">restore</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Restore"</span>);     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new button</span>
<span class="linenr"> 67: </span>          restore.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyReadInListener</span>());
<span class="linenr"> 68: </span>          buttonBox.add(restore);
<span class="linenr"> 69: </span>
<span class="linenr"> 70: </span>          <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">nameBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr"> 71: </span>          <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr"> 72: </span>              nameBox.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Label</span>(instrumentNames[i]));
<span class="linenr"> 73: </span>          }
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.EAST, buttonBox);
<span class="linenr"> 76: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.WEST, nameBox);
<span class="linenr"> 77: </span>
<span class="linenr"> 78: </span>          theFrame.getContentPane().add(background);
<span class="linenr"> 79: </span>
<span class="linenr"> 80: </span>          <span style="color: #0072b2; font-weight: bold;">GridLayout</span> <span style="color: #e69f00; font-weight: bold;">grid</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GridLayout</span>(16,16);
<span class="linenr"> 81: </span>          grid.setVgap(1);
<span class="linenr"> 82: </span>          grid.setHgap(2);
<span class="linenr"> 83: </span>          mainPanel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(grid);
<span class="linenr"> 84: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr"> 85: </span>
<span class="linenr"> 86: </span>
<span class="linenr"> 87: </span>          <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {                    
<span class="linenr"> 88: </span>                <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">c</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JCheckBox</span>();
<span class="linenr"> 89: </span>                c.setSelected(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr"> 90: </span>                checkboxList.add(c);
<span class="linenr"> 91: </span>                mainPanel.add(c);            
<span class="linenr"> 92: </span>          } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end loop</span>
<span class="linenr"> 93: </span>
<span class="linenr"> 94: </span>          setUpMidi();
<span class="linenr"> 95: </span>
<span class="linenr"> 96: </span>          theFrame.setBounds(50,50,300,300);
<span class="linenr"> 97: </span>          theFrame.pack();
<span class="linenr"> 98: </span>          theFrame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 99: </span>        } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">100: </span>
<span class="linenr">101: </span>
<span class="linenr">102: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpMidi</span>() {
<span class="linenr">103: </span>       <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">104: </span>        sequencer = MidiSystem.getSequencer();
<span class="linenr">105: </span>        sequencer.open();
<span class="linenr">106: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">sequencer.addMetaEventListener(this);</span>
<span class="linenr">107: </span>        sequence = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ,4);
<span class="linenr">108: </span>        track = sequence.createTrack();
<span class="linenr">109: </span>        sequencer.setTempoInBPM(120);
<span class="linenr">110: </span>
<span class="linenr">111: </span>       } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {e.printStackTrace();}
<span class="linenr">112: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">113: </span><span style="color: #009e73; font-style: italic;">/*</span>
<span class="linenr">114: </span><span style="color: #009e73; font-style: italic;">     public class MyCheckBoxListener implements ItemListener {</span>
<span class="linenr">115: </span><span style="color: #009e73; font-style: italic;">        public void itemStateChanged(ItemEvent ev) {      </span>
<span class="linenr">116: </span><span style="color: #009e73; font-style: italic;">           // might add real-time removal or addition, probably not because of timing</span>
<span class="linenr">117: </span><span style="color: #009e73; font-style: italic;">        }</span>
<span class="linenr">118: </span><span style="color: #009e73; font-style: italic;">     } // close inner class</span>
<span class="linenr">119: </span><span style="color: #009e73; font-style: italic;">*/</span>
<span class="linenr">120: </span>
<span class="linenr">121: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildTrackAndStart</span>() {
<span class="linenr">122: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this will hold the instruments for each vertical column,</span>
<span class="linenr">123: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">in other words, each tick (may have multiple instruments)</span>
<span class="linenr">124: </span>        <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">trackList</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">125: </span>
<span class="linenr">126: </span>        sequence.deleteTrack(track);
<span class="linenr">127: </span>        track = sequence.createTrack();
<span class="linenr">128: </span>
<span class="linenr">129: </span>
<span class="linenr">130: </span>      <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">131: </span>         trackList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[16];
<span class="linenr">132: </span>
<span class="linenr">133: </span>         <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">key</span> = instruments[i];
<span class="linenr">134: </span>
<span class="linenr">135: </span>         <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span> = 0; j &lt; 16; j++ ) {         
<span class="linenr">136: </span>               <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">jc</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(j + (16*i));
<span class="linenr">137: </span>
<span class="linenr">138: </span>              <span style="color: #56b4e9; font-weight: bold;">if</span> ( jc.isSelected()) {
<span class="linenr">139: </span>                 trackList[j] = key;
<span class="linenr">140: </span>              } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">141: </span>                 trackList[j] = 0;
<span class="linenr">142: </span>              }       
<span class="linenr">143: </span>          } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner</span>
<span class="linenr">144: </span>
<span class="linenr">145: </span>       makeTracks(trackList);
<span class="linenr">146: </span>     } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close outer</span>
<span class="linenr">147: </span>
<span class="linenr">148: </span>     track.add(makeEvent(192,9,1,0,15)); <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">- so we always go to full 16 beats </span>
<span class="linenr">149: </span>
<span class="linenr">150: </span>
<span class="linenr">151: </span>
<span class="linenr">152: </span>       <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">153: </span>
<span class="linenr">154: </span>           sequencer.setSequence(sequence);  
<span class="linenr">155: </span>           sequencer.setLoopCount(<span style="color: #d55e00; font-weight: bold;">sequencer</span>.LOOP_CONTINUOUSLY);                  
<span class="linenr">156: </span>           sequencer.start();
<span class="linenr">157: </span>           sequencer.setTempoInBPM(120);
<span class="linenr">158: </span>       } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {e.printStackTrace();}
<span class="linenr">159: </span>
<span class="linenr">160: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">161: </span>
<span class="linenr">162: </span><span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">============================================================== inner class listeners           </span>
<span class="linenr">163: </span>
<span class="linenr">164: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">165: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">166: </span>             buildTrackAndStart();
<span class="linenr">167: </span>         }
<span class="linenr">168: </span>      }
<span class="linenr">169: </span>
<span class="linenr">170: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">171: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">172: </span>           sequencer.stop();
<span class="linenr">173: </span>       }
<span class="linenr">174: </span>    }
<span class="linenr">175: </span>
<span class="linenr">176: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">177: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">178: </span>            <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor();
<span class="linenr">179: </span>            sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * 1.03));
<span class="linenr">180: </span>       }
<span class="linenr">181: </span>    }
<span class="linenr">182: </span>
<span class="linenr">183: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">184: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">185: </span>            <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor();
<span class="linenr">186: </span>            sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * .97));
<span class="linenr">187: </span>        }
<span class="linenr">188: </span>    }
<span class="linenr">189: </span>
<span class="linenr">190: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MySendListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new - save</span>
<span class="linenr">191: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">192: </span>          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make an arraylist of just the STATE of the checkboxes</span>
<span class="linenr">193: </span>         <span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">checkboxState</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">boolean</span>[256];
<span class="linenr">194: </span>
<span class="linenr">195: </span>         <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {
<span class="linenr">196: </span>             <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">check</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(i);
<span class="linenr">197: </span>             <span style="color: #56b4e9; font-weight: bold;">if</span> (check.isSelected()) {
<span class="linenr">198: </span>                checkboxState[i] = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">199: </span>             }
<span class="linenr">200: </span>          }
<span class="linenr">201: </span>
<span class="linenr">202: </span>         <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">203: </span>            <span style="color: #0072b2; font-weight: bold;">FileOutputStream</span> <span style="color: #e69f00; font-weight: bold;">fileStream</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileOutputStream</span>(
<span class="linenr">204: </span>                <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"Checkbox.ser"</span>));
<span class="linenr">205: </span>            <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">os</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>(fileStream);
<span class="linenr">206: </span>            os.writeObject(checkboxState);
<span class="linenr">207: </span>         } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">208: </span>             ex.printStackTrace();
<span class="linenr">209: </span>         }
<span class="linenr">210: </span>
<span class="linenr">211: </span>       } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">212: </span>     } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">213: </span>
<span class="linenr">214: </span>
<span class="linenr">215: </span>
<span class="linenr">216: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyReadInListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new - restore</span>
<span class="linenr">217: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">218: </span>          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">read in the thing</span>
<span class="linenr">219: </span>
<span class="linenr">220: </span>          <span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">checkboxState</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">221: </span>          <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">222: </span>              <span style="color: #0072b2; font-weight: bold;">FileInputStream</span> <span style="color: #e69f00; font-weight: bold;">fileIn</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileInputStream</span>(
<span class="linenr">223: </span>                  <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"Checkbox.ser"</span>));
<span class="linenr">224: </span>              <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span> <span style="color: #e69f00; font-weight: bold;">is</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>(fileIn);
<span class="linenr">225: </span>              checkboxState = (<span style="color: #0072b2; font-weight: bold;">boolean</span>[]) is.readObject();
<span class="linenr">226: </span>
<span class="linenr">227: </span>          } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {ex.printStackTrace();}
<span class="linenr">228: </span>
<span class="linenr">229: </span>              <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now reset the sequence to be this</span>
<span class="linenr">230: </span>          <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {
<span class="linenr">231: </span>             <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">check</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(i);
<span class="linenr">232: </span>             <span style="color: #56b4e9; font-weight: bold;">if</span> (checkboxState[i]) {
<span class="linenr">233: </span>                check.setSelected(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">234: </span>             } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr">235: </span>                check.setSelected(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr">236: </span>             }
<span class="linenr">237: </span>         } 
<span class="linenr">238: </span>
<span class="linenr">239: </span>
<span class="linenr">240: </span>
<span class="linenr">241: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now stop sequence and restart</span>
<span class="linenr">242: </span>        sequencer.stop(); 
<span class="linenr">243: </span>        buildTrackAndStart();
<span class="linenr">244: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">245: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">246: </span>
<span class="linenr">247: </span>
<span class="linenr">248: </span><span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">==============================================================       </span>
<span class="linenr">249: </span>
<span class="linenr">250: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">makeTracks</span>(<span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">list</span>) {
<span class="linenr">251: </span>
<span class="linenr">252: </span>         <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">253: </span>           <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">key</span> = list[i];
<span class="linenr">254: </span>
<span class="linenr">255: </span>           <span style="color: #56b4e9; font-weight: bold;">if</span> (key != 0) {
<span class="linenr">256: </span>               track.add(makeEvent(144,9,key, 100, i));
<span class="linenr">257: </span>               track.add(makeEvent(128,9,key, 100, i + 1));
<span class="linenr">258: </span>           }
<span class="linenr">259: </span>         }
<span class="linenr">260: </span>      }
<span class="linenr">261: </span>
<span class="linenr">262: </span>
<span class="linenr">263: </span>
<span class="linenr">264: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span>  <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #d55e00;">makeEvent</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comd</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">chan</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">two</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tick</span>) {
<span class="linenr">265: </span>          <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">266: </span>          <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">267: </span>            <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">268: </span>            a.setMessage(comd, chan, one, two);
<span class="linenr">269: </span>            event = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, tick);
<span class="linenr">270: </span>
<span class="linenr">271: </span>            }<span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) { }
<span class="linenr">272: </span>          <span style="color: #56b4e9; font-weight: bold;">return</span> event;
<span class="linenr">273: </span>       }
<span class="linenr">274: </span>
<span class="linenr">275: </span><span style="color: #009e73; font-style: italic;">/*</span>
<span class="linenr">276: </span><span style="color: #009e73; font-style: italic;">        public void meta(MetaMessage message) {</span>
<span class="linenr">277: </span><span style="color: #009e73; font-style: italic;">            if (message.getType() == 47) {</span>
<span class="linenr">278: </span><span style="color: #009e73; font-style: italic;">                sequencer.start();</span>
<span class="linenr">279: </span><span style="color: #009e73; font-style: italic;">                sequencer.setTempoInBPM(bpm);</span>
<span class="linenr">280: </span><span style="color: #009e73; font-style: italic;">            }</span>
<span class="linenr">281: </span><span style="color: #009e73; font-style: italic;">       }</span>
<span class="linenr">282: </span><span style="color: #009e73; font-style: italic;">*/</span>
<span class="linenr">283: </span>
<span class="linenr">284: </span>
<span class="linenr">285: </span>   } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
<span class="linenr">286: </span>
<span class="linenr">287: </span>
<span class="linenr">288: </span>
<span class="linenr">289: </span>
<span class="linenr">290: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc5af05" class="outline-3">
<h3 id="orgbc5af05"><code>chap14/DungeonTest.java</code></h3>
<div class="outline-text-3" id="text-orgbc5af05">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileInputStream</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileOutputStream</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">Serializable</span>;
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DungeonTest</span>
<span class="linenr">10: </span>{
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">12: </span>        <span style="color: #0072b2; font-weight: bold;">DungeonGame</span> <span style="color: #e69f00; font-weight: bold;">d</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DungeonGame</span>();
<span class="linenr">13: </span>        System.out.println(d.getX() + d.getY() + d.getZ());
<span class="linenr">14: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">15: </span>            <span style="color: #0072b2; font-weight: bold;">FileOutputStream</span> <span style="color: #e69f00; font-weight: bold;">fos</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileOutputStream</span>(<span style="color: #848ea9;">"dg.ser"</span>);
<span class="linenr">16: </span>            <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">oos</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>(fos);
<span class="linenr">17: </span>            oos.writeObject(d);
<span class="linenr">18: </span>            oos.close();
<span class="linenr">19: </span>            <span style="color: #0072b2; font-weight: bold;">FileInputStream</span> <span style="color: #e69f00; font-weight: bold;">fis</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileInputStream</span>(<span style="color: #848ea9;">"dg.ser"</span>);
<span class="linenr">20: </span>            <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span> <span style="color: #e69f00; font-weight: bold;">ois</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>(fis);
<span class="linenr">21: </span>            d = (<span style="color: #0072b2; font-weight: bold;">DungeonGame</span>) ois.readObject();
<span class="linenr">22: </span>            ois.close();
<span class="linenr">23: </span>        }
<span class="linenr">24: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>)
<span class="linenr">25: </span>        {
<span class="linenr">26: </span>            e.printStackTrace();
<span class="linenr">27: </span>        }
<span class="linenr">28: </span>        System.out.println(d.getX() + d.getY() + d.getZ());
<span class="linenr">29: </span>    }
<span class="linenr">30: </span>}
<span class="linenr">31: </span>
<span class="linenr">32: </span>
<span class="linenr">33: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DungeonGame</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Serializable</span> {
<span class="linenr">34: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 3;
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">transient</span> <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #e69f00; font-weight: bold;">y</span>= 4;
<span class="linenr">36: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">short</span> <span style="color: #e69f00; font-weight: bold;">z</span> = 5;
<span class="linenr">37: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getX</span>() {
<span class="linenr">38: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> x;
<span class="linenr">39: </span>    }
<span class="linenr">40: </span>    <span style="color: #0072b2; font-weight: bold;">long</span> <span style="color: #d55e00;">getY</span>() {
<span class="linenr">41: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> y;
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>    <span style="color: #0072b2; font-weight: bold;">short</span> <span style="color: #d55e00;">getZ</span>() {
<span class="linenr">44: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> z;
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e09f7b" class="outline-3">
<h3 id="org9e09f7b"><code>chap14/GameCharacter.java</code></h3>
<div class="outline-text-3" id="text-org9e09f7b">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">Serializable</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Serializable</span>
<span class="linenr"> 6: </span>{
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">power</span>;
<span class="linenr"> 8: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">type</span>;
<span class="linenr"> 9: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">weapons</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">GameCharacter</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">p</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">t</span>, <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">w</span>)
<span class="linenr">12: </span>    {
<span class="linenr">13: </span>        power = p;
<span class="linenr">14: </span>        type = t;
<span class="linenr">15: </span>        weapons = w;
<span class="linenr">16: </span>    }
<span class="linenr">17: </span>
<span class="linenr">18: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getPower</span>() {
<span class="linenr">19: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> power;
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>
<span class="linenr">22: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getType</span>() {
<span class="linenr">23: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> type;
<span class="linenr">24: </span>    }
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getWeapons</span>() {
<span class="linenr">27: </span>        <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">weaponList</span> = <span style="color: #848ea9;">""</span>;
<span class="linenr">28: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; weapons.<span style="color: #0072b2; font-weight: bold;">length</span>; i++)
<span class="linenr">29: </span>        {
<span class="linenr">30: </span>            weaponList += weapons[i] + <span style="color: #848ea9;">" "</span>;
<span class="linenr">31: </span>        }
<span class="linenr">32: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> weaponList;
<span class="linenr">33: </span>    }
<span class="linenr">34: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6287ef8" class="outline-3">
<h3 id="org6287ef8"><code>chap14/GameSaverTest.java</code></h3>
<div class="outline-text-3" id="text-org6287ef8">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileInputStream</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileOutputStream</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">IOException</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">OutputStream</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">GameSaverTest</span>
<span class="linenr">11: </span>{
<span class="linenr">12: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">13: </span>        <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">one</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GameCharacter</span>(50, <span style="color: #848ea9;">"Elf"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">String</span>[] {<span style="color: #848ea9;">"bow"</span>, <span style="color: #848ea9;">"sword"</span>, <span style="color: #848ea9;">"dust"</span>});
<span class="linenr">14: </span>        <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">two</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GameCharacter</span>(200, <span style="color: #848ea9;">"Troll"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">String</span>[] {<span style="color: #848ea9;">"bare hands"</span>, <span style="color: #848ea9;">"big axe"</span>});
<span class="linenr">15: </span>        <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">three</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GameCharacter</span>(120, <span style="color: #848ea9;">"Magician"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">String</span>[] {<span style="color: #848ea9;">"spells"</span>, <span style="color: #848ea9;">"invisibility"</span>});
<span class="linenr">16: </span>
<span class="linenr">17: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">18: </span>            <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">os</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileOutputStream</span>(<span style="color: #848ea9;">"Game.ser"</span>));
<span class="linenr">19: </span>            os.writeObject(one);
<span class="linenr">20: </span>            os.writeObject(two);
<span class="linenr">21: </span>            os.writeObject(three);
<span class="linenr">22: </span>            os.close();
<span class="linenr">23: </span>        }
<span class="linenr">24: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">25: </span>            ex.printStackTrace();
<span class="linenr">26: </span>        }
<span class="linenr">27: </span>
<span class="linenr">28: </span>        one = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">29: </span>        two = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">30: </span>        three = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">31: </span>
<span class="linenr">32: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">33: </span>            <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span> <span style="color: #e69f00; font-weight: bold;">is</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileInputStream</span>(<span style="color: #848ea9;">"Game.ser"</span>));
<span class="linenr">34: </span>            <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">oneRestore</span> = (<span style="color: #0072b2; font-weight: bold;">GameCharacter</span>) is.readObject();
<span class="linenr">35: </span>            <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">twoRestore</span> = (<span style="color: #0072b2; font-weight: bold;">GameCharacter</span>) is.readObject();
<span class="linenr">36: </span>            <span style="color: #0072b2; font-weight: bold;">GameCharacter</span> <span style="color: #e69f00; font-weight: bold;">threeRestore</span> = (<span style="color: #0072b2; font-weight: bold;">GameCharacter</span>) is.readObject();
<span class="linenr">37: </span>
<span class="linenr">38: </span>            System.out.println(<span style="color: #848ea9;">"One's type: "</span> + oneRestore.getType());
<span class="linenr">39: </span>            System.out.println(<span style="color: #848ea9;">"Two's type: "</span> + twoRestore.getType());
<span class="linenr">40: </span>            System.out.println(<span style="color: #848ea9;">"Three's type: "</span> + threeRestore.getType());
<span class="linenr">41: </span>        }
<span class="linenr">42: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">43: </span>            ex.printStackTrace();
<span class="linenr">44: </span>        }
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org93334a4" class="outline-3">
<h3 id="org93334a4"><code>chap14/QuizCard.java</code></h3>
<div class="outline-text-3" id="text-org93334a4">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Serializable</span> {
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>     <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">uniqueID</span>;
<span class="linenr"> 7: </span>     <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">category</span>;
<span class="linenr"> 8: </span>     <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">question</span>;
<span class="linenr"> 9: </span>     <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">answer</span>;
<span class="linenr">10: </span>     <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">hint</span>;
<span class="linenr">11: </span>
<span class="linenr">12: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">QuizCard</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">q</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">13: </span>         question = q;
<span class="linenr">14: </span>         answer = a;
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>
<span class="linenr">17: </span>
<span class="linenr">18: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUniqueID</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">id</span>) {
<span class="linenr">19: </span>        uniqueID = id;
<span class="linenr">20: </span>     }
<span class="linenr">21: </span>
<span class="linenr">22: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getUniqueID</span>() {
<span class="linenr">23: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> uniqueID;
<span class="linenr">24: </span>     }
<span class="linenr">25: </span>
<span class="linenr">26: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setCategory</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">c</span>) {
<span class="linenr">27: </span>        category = c;
<span class="linenr">28: </span>     }
<span class="linenr">29: </span>
<span class="linenr">30: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getCategory</span>() {
<span class="linenr">31: </span>         <span style="color: #56b4e9; font-weight: bold;">return</span> category;
<span class="linenr">32: </span>     }
<span class="linenr">33: </span>
<span class="linenr">34: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setQuestion</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">q</span>) {
<span class="linenr">35: </span>        question = q;
<span class="linenr">36: </span>     }
<span class="linenr">37: </span>
<span class="linenr">38: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getQuestion</span>() {
<span class="linenr">39: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> question;
<span class="linenr">40: </span>     }
<span class="linenr">41: </span>
<span class="linenr">42: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setAnswer</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">43: </span>        answer = a;
<span class="linenr">44: </span>     }
<span class="linenr">45: </span>
<span class="linenr">46: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getAnswer</span>() {
<span class="linenr">47: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> answer;
<span class="linenr">48: </span>     }
<span class="linenr">49: </span>
<span class="linenr">50: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setHint</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">h</span>) {
<span class="linenr">51: </span>        hint = h;
<span class="linenr">52: </span>     }
<span class="linenr">53: </span>
<span class="linenr">54: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getHint</span>() {
<span class="linenr">55: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> hint;
<span class="linenr">56: </span>     }
<span class="linenr">57: </span>
<span class="linenr">58: </span>}     
<span class="linenr">59: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ac4fa8" class="outline-3">
<h3 id="org9ac4fa8"><code>chap14/QuizCardBuilder.java</code></h3>
<div class="outline-text-3" id="text-org9ac4fa8">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr">  2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr">  3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr">  7: </span>
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">QuizCardBuilder</span> {
<span class="linenr">  9: </span>
<span class="linenr"> 10: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span> <span style="color: #e69f00; font-weight: bold;">question</span>;
<span class="linenr"> 11: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span> <span style="color: #e69f00; font-weight: bold;">answer</span>;
<span class="linenr"> 12: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span> <span style="color: #e69f00; font-weight: bold;">cardList</span>;
<span class="linenr"> 13: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span>;
<span class="linenr"> 14: </span>
<span class="linenr"> 15: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">additional, bonus method not found in any book!</span>
<span class="linenr"> 16: </span>
<span class="linenr"> 17: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 18: </span>       <span style="color: #0072b2; font-weight: bold;">QuizCardBuilder</span> <span style="color: #e69f00; font-weight: bold;">builder</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">QuizCardBuilder</span>();
<span class="linenr"> 19: </span>       builder.go();
<span class="linenr"> 20: </span>    }
<span class="linenr"> 21: </span>
<span class="linenr"> 22: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 23: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">build gui</span>
<span class="linenr"> 24: </span>        frame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Quiz Card Builder"</span>);
<span class="linenr"> 25: </span>        frame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">title bar</span>
<span class="linenr"> 26: </span>        <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr"> 27: </span>        <span style="color: #0072b2; font-weight: bold;">Font</span> <span style="color: #e69f00; font-weight: bold;">bigFont</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Font</span>(<span style="color: #848ea9;">"sanserif"</span>, <span style="color: #d55e00; font-weight: bold;">Font</span>.BOLD, 24);
<span class="linenr"> 28: </span>        question = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span>(6,20);
<span class="linenr"> 29: </span>        question.setLineWrap(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 30: </span>        question.setWrapStyleWord(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 31: </span>        question.setFont(bigFont);
<span class="linenr"> 32: </span>
<span class="linenr"> 33: </span>        <span style="color: #0072b2; font-weight: bold;">JScrollPane</span> <span style="color: #e69f00; font-weight: bold;">qScroller</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JScrollPane</span>(question);
<span class="linenr"> 34: </span>        qScroller.setVerticalScrollBarPolicy(
<span class="linenr"> 35: </span>                  <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.VERTICAL_SCROLLBAR_ALWAYS);
<span class="linenr"> 36: </span>        qScroller.setHorizontalScrollBarPolicy(
<span class="linenr"> 37: </span>                  <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.HORIZONTAL_SCROLLBAR_NEVER);
<span class="linenr"> 38: </span>
<span class="linenr"> 39: </span>        answer = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span>(6,20);
<span class="linenr"> 40: </span>        answer.setLineWrap(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 41: </span>        answer.setWrapStyleWord(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 42: </span>        answer.setFont(bigFont);
<span class="linenr"> 43: </span>
<span class="linenr"> 44: </span>        <span style="color: #0072b2; font-weight: bold;">JScrollPane</span> <span style="color: #e69f00; font-weight: bold;">aScroller</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JScrollPane</span>(answer);
<span class="linenr"> 45: </span>        aScroller.setVerticalScrollBarPolicy(
<span class="linenr"> 46: </span>                  <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.VERTICAL_SCROLLBAR_ALWAYS);
<span class="linenr"> 47: </span>        aScroller.setHorizontalScrollBarPolicy(
<span class="linenr"> 48: </span>                  <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.HORIZONTAL_SCROLLBAR_NEVER);
<span class="linenr"> 49: </span>
<span class="linenr"> 50: </span>        <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">nextButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Next Card"</span>);
<span class="linenr"> 51: </span>        cardList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>();
<span class="linenr"> 52: </span>        <span style="color: #0072b2; font-weight: bold;">JLabel</span> <span style="color: #e69f00; font-weight: bold;">qLabel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"Question:"</span>);
<span class="linenr"> 53: </span>        <span style="color: #0072b2; font-weight: bold;">JLabel</span> <span style="color: #e69f00; font-weight: bold;">aLabel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"Answer:"</span>);
<span class="linenr"> 54: </span>
<span class="linenr"> 55: </span>        mainPanel.add(qLabel);
<span class="linenr"> 56: </span>        mainPanel.add(qScroller);
<span class="linenr"> 57: </span>        mainPanel.add(aLabel);
<span class="linenr"> 58: </span>        mainPanel.add(aScroller);
<span class="linenr"> 59: </span>        mainPanel.add(nextButton);
<span class="linenr"> 60: </span>        nextButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">NextCardListener</span>());
<span class="linenr"> 61: </span>        <span style="color: #0072b2; font-weight: bold;">JMenuBar</span> <span style="color: #e69f00; font-weight: bold;">menuBar</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenuBar</span>();
<span class="linenr"> 62: </span>        <span style="color: #0072b2; font-weight: bold;">JMenu</span> <span style="color: #e69f00; font-weight: bold;">fileMenu</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenu</span>(<span style="color: #848ea9;">"File"</span>);
<span class="linenr"> 63: </span>        <span style="color: #0072b2; font-weight: bold;">JMenuItem</span> <span style="color: #e69f00; font-weight: bold;">newMenuItem</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenuItem</span>(<span style="color: #848ea9;">"New"</span>);
<span class="linenr"> 64: </span>
<span class="linenr"> 65: </span>        <span style="color: #0072b2; font-weight: bold;">JMenuItem</span> <span style="color: #e69f00; font-weight: bold;">saveMenuItem</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenuItem</span>(<span style="color: #848ea9;">"Save"</span>);
<span class="linenr"> 66: </span>        newMenuItem.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">NewMenuListener</span>());
<span class="linenr"> 67: </span>        saveMenuItem.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SaveMenuListener</span>());
<span class="linenr"> 68: </span>
<span class="linenr"> 69: </span>        fileMenu.add(newMenuItem);
<span class="linenr"> 70: </span>        fileMenu.add(saveMenuItem);
<span class="linenr"> 71: </span>        menuBar.add(fileMenu);
<span class="linenr"> 72: </span>        frame.setJMenuBar(menuBar);
<span class="linenr"> 73: </span>
<span class="linenr"> 74: </span>        frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr"> 75: </span>        frame.setSize(500,600);
<span class="linenr"> 76: </span>        frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);        
<span class="linenr"> 77: </span>    }
<span class="linenr"> 78: </span>
<span class="linenr"> 79: </span>
<span class="linenr"> 80: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">NextCardListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr"> 81: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr"> 82: </span>          <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #e69f00; font-weight: bold;">card</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">QuizCard</span>(question.getText(), answer.getText());
<span class="linenr"> 83: </span>          cardList.add(card);
<span class="linenr"> 84: </span>          clearCard();
<span class="linenr"> 85: </span>
<span class="linenr"> 86: </span>        }
<span class="linenr"> 87: </span>     }
<span class="linenr"> 88: </span>
<span class="linenr"> 89: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SaveMenuListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr"> 90: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr"> 91: </span>           <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #e69f00; font-weight: bold;">card</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">QuizCard</span>(question.getText(), answer.getText());
<span class="linenr"> 92: </span>           cardList.add(card);
<span class="linenr"> 93: </span>
<span class="linenr"> 94: </span>           <span style="color: #0072b2; font-weight: bold;">JFileChooser</span> <span style="color: #e69f00; font-weight: bold;">fileSave</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFileChooser</span>();
<span class="linenr"> 95: </span>           fileSave.showSaveDialog(frame);
<span class="linenr"> 96: </span>           saveFile(fileSave.getSelectedFile());
<span class="linenr"> 97: </span>        }
<span class="linenr"> 98: </span>     }
<span class="linenr"> 99: </span>
<span class="linenr">100: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">NewMenuListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">101: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr">102: </span>           cardList.clear();
<span class="linenr">103: </span>           clearCard();           
<span class="linenr">104: </span>        }
<span class="linenr">105: </span>    }
<span class="linenr">106: </span>
<span class="linenr">107: </span>
<span class="linenr">108: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">clearCard</span>() {
<span class="linenr">109: </span>       question.setText(<span style="color: #848ea9;">""</span>);
<span class="linenr">110: </span>       answer.setText(<span style="color: #848ea9;">""</span>);
<span class="linenr">111: </span>       question.requestFocus();
<span class="linenr">112: </span>    }
<span class="linenr">113: </span>
<span class="linenr">114: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">saveFile</span>(<span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span>) {
<span class="linenr">115: </span>
<span class="linenr">116: </span>       <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">117: </span>          <span style="color: #0072b2; font-weight: bold;">BufferedWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedWriter</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileWriter</span>(file));
<span class="linenr">118: </span>          <span style="color: #0072b2; font-weight: bold;">Iterator</span> <span style="color: #e69f00; font-weight: bold;">cardIterator</span> = cardList.iterator();
<span class="linenr">119: </span>          <span style="color: #56b4e9; font-weight: bold;">while</span> (cardIterator.hasNext()) {
<span class="linenr">120: </span>             <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #e69f00; font-weight: bold;">card</span> = (<span style="color: #0072b2; font-weight: bold;">QuizCard</span>) cardIterator.next();
<span class="linenr">121: </span>             writer.write(card.getQuestion() + <span style="color: #848ea9;">"/"</span>);
<span class="linenr">122: </span>             writer.write(card.getAnswer() + <span style="color: #848ea9;">"\n"</span>);
<span class="linenr">123: </span>          }
<span class="linenr">124: </span>         writer.close();
<span class="linenr">125: </span>
<span class="linenr">126: </span>
<span class="linenr">127: </span>       } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">128: </span>           System.out.println(<span style="color: #848ea9;">"couldn't write the cardList out"</span>);
<span class="linenr">129: </span>           ex.printStackTrace();
<span class="linenr">130: </span>       }
<span class="linenr">131: </span>
<span class="linenr">132: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">133: </span>}
<span class="linenr">134: </span>
<span class="linenr">135: </span>
<span class="linenr">136: </span>
<span class="linenr">137: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfbc9543" class="outline-3">
<h3 id="orgfbc9543"><code>chap14/QuizCardReader.java</code></h3>
<div class="outline-text-3" id="text-orgfbc9543">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap14</span>;
<span class="linenr">  2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr">  3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr">  7: </span>
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">QuizCardReader</span> {
<span class="linenr">  9: </span>
<span class="linenr"> 10: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span> <span style="color: #e69f00; font-weight: bold;">display</span>;
<span class="linenr"> 11: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span> <span style="color: #e69f00; font-weight: bold;">answer</span>;
<span class="linenr"> 12: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span> <span style="color: #e69f00; font-weight: bold;">cardList</span>;
<span class="linenr"> 13: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #e69f00; font-weight: bold;">currentCard</span>;
<span class="linenr"> 14: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">Iterator</span> <span style="color: #e69f00; font-weight: bold;">cardIterator</span>;
<span class="linenr"> 15: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span>;
<span class="linenr"> 16: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">nextButton</span>;
<span class="linenr"> 17: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">isShowAnswer</span>;
<span class="linenr"> 18: </span>
<span class="linenr"> 19: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">additional, bonus method not found in any book!</span>
<span class="linenr"> 20: </span>
<span class="linenr"> 21: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 22: </span>       <span style="color: #0072b2; font-weight: bold;">QuizCardReader</span> <span style="color: #e69f00; font-weight: bold;">qReader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">QuizCardReader</span>();
<span class="linenr"> 23: </span>       qReader.go();
<span class="linenr"> 24: </span>    }
<span class="linenr"> 25: </span>
<span class="linenr"> 26: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 27: </span>
<span class="linenr"> 28: </span>        frame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Quiz Card Player"</span>);
<span class="linenr"> 29: </span>        frame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr"> 30: </span>        <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr"> 31: </span>        <span style="color: #0072b2; font-weight: bold;">Font</span> <span style="color: #e69f00; font-weight: bold;">bigFont</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Font</span>(<span style="color: #848ea9;">"sanserif"</span>, <span style="color: #d55e00; font-weight: bold;">Font</span>.BOLD, 24);
<span class="linenr"> 32: </span>
<span class="linenr"> 33: </span>        display = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span>(9,20);
<span class="linenr"> 34: </span>        display.setFont(bigFont);
<span class="linenr"> 35: </span>        display.setLineWrap(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 36: </span>        display.setWrapStyleWord(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr"> 37: </span>        display.setEditable(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr"> 38: </span>
<span class="linenr"> 39: </span>        <span style="color: #0072b2; font-weight: bold;">JScrollPane</span> <span style="color: #e69f00; font-weight: bold;">qScroller</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JScrollPane</span>(display);
<span class="linenr"> 40: </span>        qScroller.setVerticalScrollBarPolicy(
<span class="linenr"> 41: </span>              <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.VERTICAL_SCROLLBAR_ALWAYS);
<span class="linenr"> 42: </span>        qScroller.setHorizontalScrollBarPolicy(
<span class="linenr"> 43: </span>              <span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.HORIZONTAL_SCROLLBAR_NEVER);
<span class="linenr"> 44: </span>
<span class="linenr"> 45: </span>        nextButton = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Show Question"</span>);
<span class="linenr"> 46: </span>
<span class="linenr"> 47: </span>        mainPanel.add(qScroller);
<span class="linenr"> 48: </span>        mainPanel.add(nextButton);
<span class="linenr"> 49: </span>        nextButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">NextCardListener</span>());
<span class="linenr"> 50: </span>        <span style="color: #0072b2; font-weight: bold;">JMenuBar</span> <span style="color: #e69f00; font-weight: bold;">menuBar</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenuBar</span>();
<span class="linenr"> 51: </span>        <span style="color: #0072b2; font-weight: bold;">JMenu</span> <span style="color: #e69f00; font-weight: bold;">fileMenu</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenu</span>(<span style="color: #848ea9;">"File"</span>);
<span class="linenr"> 52: </span>
<span class="linenr"> 53: </span>        <span style="color: #0072b2; font-weight: bold;">JMenuItem</span> <span style="color: #e69f00; font-weight: bold;">loadMenuItem</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JMenuItem</span>(<span style="color: #848ea9;">"Load card set"</span>);
<span class="linenr"> 54: </span>
<span class="linenr"> 55: </span>        loadMenuItem.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">OpenMenuListener</span>());
<span class="linenr"> 56: </span>
<span class="linenr"> 57: </span>        fileMenu.add(loadMenuItem);
<span class="linenr"> 58: </span>
<span class="linenr"> 59: </span>        menuBar.add(fileMenu);
<span class="linenr"> 60: </span>        frame.setJMenuBar(menuBar);
<span class="linenr"> 61: </span>
<span class="linenr"> 62: </span>        frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr"> 63: </span>        frame.setSize(500,600);
<span class="linenr"> 64: </span>        frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);        
<span class="linenr"> 65: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close go</span>
<span class="linenr"> 66: </span>
<span class="linenr"> 67: </span>
<span class="linenr"> 68: </span>   <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">NextCardListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr"> 69: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr"> 70: </span>          <span style="color: #56b4e9; font-weight: bold;">if</span> (isShowAnswer) {
<span class="linenr"> 71: </span>             <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">show the answer because they've seen the question</span>
<span class="linenr"> 72: </span>             display.setText(currentCard.getAnswer());
<span class="linenr"> 73: </span>             nextButton.setText(<span style="color: #848ea9;">"Next Card"</span>);
<span class="linenr"> 74: </span>             isShowAnswer = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr"> 75: </span>          } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr"> 76: </span>              <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">show the next question</span>
<span class="linenr"> 77: </span>             <span style="color: #56b4e9; font-weight: bold;">if</span> (cardIterator.hasNext()) {
<span class="linenr"> 78: </span>
<span class="linenr"> 79: </span>                showNextCard();
<span class="linenr"> 80: </span>
<span class="linenr"> 81: </span>              } <span style="color: #56b4e9; font-weight: bold;">else</span> {
<span class="linenr"> 82: </span>                 <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">there are no more cards!</span>
<span class="linenr"> 83: </span>                 display.setText(<span style="color: #848ea9;">"That was last card"</span>);
<span class="linenr"> 84: </span>                 nextButton.disable();
<span class="linenr"> 85: </span>              }
<span class="linenr"> 86: </span>           } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close if</span>
<span class="linenr"> 87: </span>        } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr"> 88: </span>     } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr"> 89: </span>
<span class="linenr"> 90: </span>
<span class="linenr"> 91: </span>   <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">OpenMenuListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr"> 92: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr"> 93: </span>             <span style="color: #0072b2; font-weight: bold;">JFileChooser</span> <span style="color: #e69f00; font-weight: bold;">fileOpen</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFileChooser</span>();
<span class="linenr"> 94: </span>             fileOpen.showOpenDialog(frame);
<span class="linenr"> 95: </span>             loadFile(fileOpen.getSelectedFile());
<span class="linenr"> 96: </span>        }
<span class="linenr"> 97: </span>    }
<span class="linenr"> 98: </span>
<span class="linenr"> 99: </span>   <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">loadFile</span>(<span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span>) {
<span class="linenr">100: </span>      cardList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>();
<span class="linenr">101: </span>      <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">102: </span>         <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr">103: </span>         <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">104: </span>         <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">105: </span>            makeCard(line);
<span class="linenr">106: </span>         }
<span class="linenr">107: </span>         reader.close();
<span class="linenr">108: </span>
<span class="linenr">109: </span>      } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">110: </span>          System.out.println(<span style="color: #848ea9;">"couldn't read the card file"</span>);
<span class="linenr">111: </span>          ex.printStackTrace();
<span class="linenr">112: </span>      }
<span class="linenr">113: </span>
<span class="linenr">114: </span>     <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now time to start</span>
<span class="linenr">115: </span>     cardIterator = cardList.iterator();
<span class="linenr">116: </span>     showNextCard();
<span class="linenr">117: </span>   }
<span class="linenr">118: </span>
<span class="linenr">119: </span>   <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">makeCard</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr">120: </span>
<span class="linenr">121: </span>      <span style="color: #0072b2; font-weight: bold;">StringTokenizer</span> <span style="color: #e69f00; font-weight: bold;">parser</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">StringTokenizer</span>(lineToParse, <span style="color: #848ea9;">"/"</span>);
<span class="linenr">122: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (parser.hasMoreTokens()) {
<span class="linenr">123: </span>         <span style="color: #0072b2; font-weight: bold;">QuizCard</span> <span style="color: #e69f00; font-weight: bold;">card</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">QuizCard</span>(parser.nextToken(), parser.nextToken());
<span class="linenr">124: </span>         cardList.add(card);
<span class="linenr">125: </span>      }
<span class="linenr">126: </span>   }
<span class="linenr">127: </span>
<span class="linenr">128: </span>   <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">showNextCard</span>() {
<span class="linenr">129: </span>        currentCard = (<span style="color: #0072b2; font-weight: bold;">QuizCard</span>) cardIterator.next();
<span class="linenr">130: </span>        display.setText(currentCard.getQuestion());
<span class="linenr">131: </span>        nextButton.setText(<span style="color: #848ea9;">"Show Answer"</span>);
<span class="linenr">132: </span>        isShowAnswer = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">133: </span>   }
<span class="linenr">134: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
<span class="linenr">135: </span>
<span class="linenr">136: </span>
<span class="linenr">137: </span>
<span class="linenr">138: </span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org82c90e9" class="outline-2">
<h2 id="org82c90e9"><span class="todo TODO">TODO</span> 15 Make a Connection: <i>networking sockets and multithreading</i></h2>
<div class="outline-text-2" id="text-org82c90e9">
</div>
<div id="outline-container-org8529d28" class="outline-3">
<h3 id="org8529d28"><code>chap15/DailyAdviceClient.java</code></h3>
<div class="outline-text-3" id="text-org8529d28">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DailyAdviceClient</span>
<span class="linenr"> 7: </span>{
<span class="linenr"> 8: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 9: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">10: </span>            <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">s</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Socket</span>(<span style="color: #848ea9;">"127.0.0.1"</span>, 4242);
<span class="linenr">11: </span>            <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span> <span style="color: #e69f00; font-weight: bold;">streamReader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span>(s.getInputStream()); 
<span class="linenr">12: </span>            <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(streamReader);
<span class="linenr">13: </span>
<span class="linenr">14: </span>            <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">advice</span> = reader.readLine();
<span class="linenr">15: </span>            System.out.println(<span style="color: #848ea9;">"Today you should: "</span> + advice);
<span class="linenr">16: </span>            reader.close();
<span class="linenr">17: </span>        }
<span class="linenr">18: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">19: </span>        {
<span class="linenr">20: </span>            ex.printStackTrace();
<span class="linenr">21: </span>        }
<span class="linenr">22: </span>    }
<span class="linenr">23: </span>
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>)
<span class="linenr">25: </span>    {
<span class="linenr">26: </span>        <span style="color: #0072b2; font-weight: bold;">DailyAdviceClient</span> <span style="color: #e69f00; font-weight: bold;">client</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DailyAdviceClient</span>();
<span class="linenr">27: </span>        client.go();
<span class="linenr">28: </span>    }
<span class="linenr">29: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org54e7c85" class="outline-3">
<h3 id="org54e7c85"><code>chap15/DailyAdviceServer.java</code></h3>
<div class="outline-text-3" id="text-org54e7c85">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DailyAdviceServer</span>
<span class="linenr"> 6: </span>{
<span class="linenr"> 7: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">adviceList</span> = {<span style="color: #848ea9;">"Take smaller bites"</span>, <span style="color: #848ea9;">"Go for the tight jeans. No they do NOT make you look fat"</span>,
<span class="linenr"> 8: </span>        <span style="color: #848ea9;">"One word: inappropriate"</span>, <span style="color: #848ea9;">"Just for today, be honest.  Tell your boss what you *really* think"</span>, 
<span class="linenr"> 9: </span>        <span style="color: #848ea9;">"You might want to rethink that haircut"</span>};
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">12: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">13: </span>            <span style="color: #0072b2; font-weight: bold;">ServerSocket</span> <span style="color: #e69f00; font-weight: bold;">serverSock</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ServerSocket</span>(4242);
<span class="linenr">14: </span>            <span style="color: #56b4e9; font-weight: bold;">while</span> (<span style="color: #d55e00; font-weight: bold;">true</span>)
<span class="linenr">15: </span>            {
<span class="linenr">16: </span>                <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span> = serverSock.accept();
<span class="linenr">17: </span>
<span class="linenr">18: </span>                <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PrintWriter</span>(sock.getOutputStream());
<span class="linenr">19: </span>                <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">advice</span> = getAdvice();
<span class="linenr">20: </span>                writer.println(advice);
<span class="linenr">21: </span>                writer.close();
<span class="linenr">22: </span>                System.out.println(advice);
<span class="linenr">23: </span>            }
<span class="linenr">24: </span>        } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">25: </span>        {
<span class="linenr">26: </span>            ex.printStackTrace();
<span class="linenr">27: </span>        }
<span class="linenr">28: </span>    }
<span class="linenr">29: </span>
<span class="linenr">30: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getAdvice</span>() {
<span class="linenr">31: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">random</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * adviceList.length);
<span class="linenr">32: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> adviceList[random];
<span class="linenr">33: </span>    }
<span class="linenr">34: </span>
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>)
<span class="linenr">36: </span>    {
<span class="linenr">37: </span>        <span style="color: #0072b2; font-weight: bold;">DailyAdviceServer</span> <span style="color: #e69f00; font-weight: bold;">server</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DailyAdviceServer</span>();
<span class="linenr">38: </span>        server.go();
<span class="linenr">39: </span>    }
<span class="linenr">40: </span>
<span class="linenr">41: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6ba790" class="outline-3">
<h3 id="orgd6ba790"><code>chap15/MyRunnable.java</code></h3>
<div class="outline-text-3" id="text-orgd6ba790">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyRunnable</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span>
<span class="linenr"> 4: </span>{
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>()
<span class="linenr"> 7: </span>    {
<span class="linenr"> 8: </span>        go();
<span class="linenr"> 9: </span>    }
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">12: </span>
<span class="linenr">13: </span>        <span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">*</span>
<span class="linenr">14: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">15: </span>            Thread.sleep(2000);
<span class="linenr">16: </span>        } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">InterruptedException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">17: </span>        {
<span class="linenr">18: </span>            ex.printStackTrace();
<span class="linenr">19: </span>        }<span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">*/</span>
<span class="linenr">20: </span>
<span class="linenr">21: </span>        doMore();
<span class="linenr">22: </span>    }
<span class="linenr">23: </span>
<span class="linenr">24: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">doMore</span>() {
<span class="linenr">25: </span>        System.out.println(<span style="color: #848ea9;">"top o' the stack"</span>);
<span class="linenr">26: </span>    }
<span class="linenr">27: </span>
<span class="linenr">28: </span>
<span class="linenr">29: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>)
<span class="linenr">30: </span>    {
<span class="linenr">31: </span>        <span style="color: #0072b2; font-weight: bold;">Runnable</span> <span style="color: #e69f00; font-weight: bold;">threadJob</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyRunnable</span>();
<span class="linenr">32: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">myThread</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(threadJob);
<span class="linenr">33: </span>        myThread.start();
<span class="linenr">34: </span>        System.out.println(<span style="color: #848ea9;">"back in main"</span>);
<span class="linenr">35: </span>    }
<span class="linenr">36: </span>
<span class="linenr">37: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ba0725" class="outline-3">
<h3 id="org3ba0725"><code>chap15/RunThreads.java</code></h3>
<div class="outline-text-3" id="text-org3ba0725">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">RunThreads</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span>
<span class="linenr"> 4: </span>{
<span class="linenr"> 5: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 6: </span>        <span style="color: #0072b2; font-weight: bold;">RunThreads</span> <span style="color: #e69f00; font-weight: bold;">runner</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">RunThreads</span>();
<span class="linenr"> 7: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">alpha</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(runner);
<span class="linenr"> 8: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">beta</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(runner);
<span class="linenr"> 9: </span>        alpha.setName(<span style="color: #848ea9;">"Alpha thread"</span>);
<span class="linenr">10: </span>        beta.setName(<span style="color: #848ea9;">"Beta thread"</span>);
<span class="linenr">11: </span>        alpha.start();
<span class="linenr">12: </span>        beta.start();
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>() {
<span class="linenr">16: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 25; i++)
<span class="linenr">17: </span>        {
<span class="linenr">18: </span>            <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">threadName</span> = Thread.currentThread().getName();
<span class="linenr">19: </span>            System.out.println(threadName + <span style="color: #848ea9;">" is running"</span>);
<span class="linenr">20: </span>        }
<span class="linenr">21: </span>    }
<span class="linenr">22: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d42b51" class="outline-3">
<h3 id="org8d42b51"><code>chap15/RyanAndMonicaJob.java</code></h3>
<div class="outline-text-3" id="text-org8d42b51">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">RyanAndMonicaJob</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span>
<span class="linenr"> 4: </span>{
<span class="linenr"> 5: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">BankAccount</span> <span style="color: #e69f00; font-weight: bold;">account</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BankAccount</span>();
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 8: </span>        <span style="color: #0072b2; font-weight: bold;">RyanAndMonicaJob</span> <span style="color: #e69f00; font-weight: bold;">theJob</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">RyanAndMonicaJob</span>();
<span class="linenr"> 9: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">one</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(theJob);
<span class="linenr">10: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">two</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(theJob);
<span class="linenr">11: </span>        one.setName(<span style="color: #848ea9;">"Ryan"</span>);
<span class="linenr">12: </span>        two.setName(<span style="color: #848ea9;">"Monica"</span>);
<span class="linenr">13: </span>        one.start();
<span class="linenr">14: </span>        two.start();
<span class="linenr">15: </span>    }
<span class="linenr">16: </span>
<span class="linenr">17: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>()
<span class="linenr">18: </span>    {
<span class="linenr">19: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = 0; x &lt; 10; x++) {
<span class="linenr">20: </span>            makeWithdrawal(10);
<span class="linenr">21: </span>            <span style="color: #56b4e9; font-weight: bold;">if</span> (account.getBalance() &lt; 0)
<span class="linenr">22: </span>            {
<span class="linenr">23: </span>                System.out.println(<span style="color: #848ea9;">"Overdrawn!"</span>);
<span class="linenr">24: </span>            }
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>    }
<span class="linenr">27: </span><span style="color: #009e73; font-style: italic;">//  </span><span style="color: #009e73; font-style: italic;">to demonstrate the "overdrawn" error remove the "synchronized" modifier</span>
<span class="linenr">28: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #56b4e9; font-weight: bold;">synchronized</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">makeWithdrawal</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">amount</span>)
<span class="linenr">29: </span>    {
<span class="linenr">30: </span>        <span style="color: #56b4e9; font-weight: bold;">if</span> (account.getBalance() &gt;= amount)
<span class="linenr">31: </span>        {
<span class="linenr">32: </span>            System.out.println(Thread.currentThread().getName() + <span style="color: #848ea9;">" is about to withdrawal"</span>);
<span class="linenr">33: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">34: </span>                System.out.println(Thread.currentThread().getName() + <span style="color: #848ea9;">" is going to sleep"</span>);
<span class="linenr">35: </span>                Thread.sleep(500);
<span class="linenr">36: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">InterruptedException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">37: </span>            System.out.println(Thread.currentThread().getName() + <span style="color: #848ea9;">" woke up"</span>);
<span class="linenr">38: </span>            account.withdraw(amount);
<span class="linenr">39: </span>            System.out.println(Thread.currentThread().getName() + <span style="color: #848ea9;">" completes the withdrawal"</span>);
<span class="linenr">40: </span>        }
<span class="linenr">41: </span>        <span style="color: #56b4e9; font-weight: bold;">else</span>
<span class="linenr">42: </span>        {
<span class="linenr">43: </span>            System.out.println(<span style="color: #848ea9;">"Sorry, not enough for "</span> + Thread.currentThread().getName());
<span class="linenr">44: </span>        }
<span class="linenr">45: </span>    }
<span class="linenr">46: </span>
<span class="linenr">47: </span>}
<span class="linenr">48: </span>
<span class="linenr">49: </span>
<span class="linenr">50: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">BankAccount</span> {
<span class="linenr">51: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">balance</span> = 100;
<span class="linenr">52: </span>
<span class="linenr">53: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">getBalance</span> () {
<span class="linenr">54: </span>        <span style="color: #56b4e9; font-weight: bold;">return</span> balance;
<span class="linenr">55: </span>    }
<span class="linenr">56: </span>
<span class="linenr">57: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">withdraw</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">amount</span>) {
<span class="linenr">58: </span>        balance = balance - amount;
<span class="linenr">59: </span>    }
<span class="linenr">60: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb4a86d5" class="outline-3">
<h3 id="orgb4a86d5"><code>chap15/SimpleChatClient.java</code></h3>
<div class="outline-text-3" id="text-orgb4a86d5">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimpleChatClient</span>
<span class="linenr">10: </span>{
<span class="linenr">11: </span>    <span style="color: #0072b2; font-weight: bold;">JTextArea</span> <span style="color: #e69f00; font-weight: bold;">incoming</span>;
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">JTextField</span> <span style="color: #e69f00; font-weight: bold;">outgoing</span>;
<span class="linenr">13: </span>    <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span>;
<span class="linenr">14: </span>    <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span>;
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span>;
<span class="linenr">16: </span>
<span class="linenr">17: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">18: </span>        <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Ludicrously Simple Chat Client"</span>);
<span class="linenr">19: </span>        <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr">20: </span>        incoming = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextArea</span>(15, 50);
<span class="linenr">21: </span>        incoming.setLineWrap(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">22: </span>        incoming.setWrapStyleWord(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">23: </span>        incoming.setEditable(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr">24: </span>        <span style="color: #0072b2; font-weight: bold;">JScrollPane</span> <span style="color: #e69f00; font-weight: bold;">qScroller</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JScrollPane</span>(incoming);
<span class="linenr">25: </span>        qScroller.setVerticalScrollBarPolicy(<span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.VERTICAL_SCROLLBAR_ALWAYS);
<span class="linenr">26: </span>        qScroller.setHorizontalScrollBarPolicy(<span style="color: #d55e00; font-weight: bold;">ScrollPaneConstants</span>.HORIZONTAL_SCROLLBAR_ALWAYS);
<span class="linenr">27: </span>        outgoing = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextField</span>(20);
<span class="linenr">28: </span>        <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">sendButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Send"</span>);
<span class="linenr">29: </span>        sendButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SendButtonListener</span>());
<span class="linenr">30: </span>        mainPanel.add(qScroller);
<span class="linenr">31: </span>        mainPanel.add(outgoing);
<span class="linenr">32: </span>        mainPanel.add(sendButton);
<span class="linenr">33: </span>        frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr">34: </span>        setUpNetworking();
<span class="linenr">35: </span>
<span class="linenr">36: </span>        <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">readerThread</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">IncomingReader</span>());
<span class="linenr">37: </span>        readerThread.start();
<span class="linenr">38: </span>
<span class="linenr">39: </span>        frame.setSize(650, 500);
<span class="linenr">40: </span>        frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">41: </span>
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>
<span class="linenr">44: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpNetworking</span>() {
<span class="linenr">45: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">46: </span>            sock = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Socket</span>(<span style="color: #848ea9;">"127.0.0.1"</span>, 5000);
<span class="linenr">47: </span>            <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span> <span style="color: #e69f00; font-weight: bold;">streamReader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span>(sock.getInputStream());
<span class="linenr">48: </span>            reader = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(streamReader);
<span class="linenr">49: </span>            writer = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PrintWriter</span>(sock.getOutputStream());
<span class="linenr">50: </span>            System.out.println(<span style="color: #848ea9;">"networking established"</span>);
<span class="linenr">51: </span>        }
<span class="linenr">52: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">53: </span>        {
<span class="linenr">54: </span>            ex.printStackTrace();
<span class="linenr">55: </span>        }
<span class="linenr">56: </span>    }
<span class="linenr">57: </span>
<span class="linenr">58: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SendButtonListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">59: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr">60: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">61: </span>                writer.println(outgoing.getText());
<span class="linenr">62: </span>                writer.flush();
<span class="linenr">63: </span>
<span class="linenr">64: </span>            }
<span class="linenr">65: </span>            <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">66: </span>                ex.printStackTrace();
<span class="linenr">67: </span>            }
<span class="linenr">68: </span>            outgoing.setText(<span style="color: #848ea9;">""</span>);
<span class="linenr">69: </span>            outgoing.requestFocus();
<span class="linenr">70: </span>        }
<span class="linenr">71: </span>    }
<span class="linenr">72: </span>
<span class="linenr">73: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">74: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleChatClient</span>().go();
<span class="linenr">75: </span>    }
<span class="linenr">76: </span>
<span class="linenr">77: </span>    <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">IncomingReader</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span> {
<span class="linenr">78: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>() {
<span class="linenr">79: </span>            <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">message</span>;
<span class="linenr">80: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">81: </span>                <span style="color: #56b4e9; font-weight: bold;">while</span> ((message = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">82: </span>                    System.out.println(<span style="color: #848ea9;">"client read "</span> + message);
<span class="linenr">83: </span>                    incoming.append(message + <span style="color: #848ea9;">"\n"</span>);
<span class="linenr">84: </span>                }
<span class="linenr">85: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">86: </span>            {
<span class="linenr">87: </span>                ex.printStackTrace();
<span class="linenr">88: </span>            }
<span class="linenr">89: </span>        }
<span class="linenr">90: </span>    }
<span class="linenr">91: </span>}
<span class="linenr">92: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef7466c" class="outline-3">
<h3 id="orgef7466c"><code>chap15/SimpleChatClientA.java</code></h3>
<div class="outline-text-3" id="text-orgef7466c">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SimpleChatClientA</span>
<span class="linenr">10: </span>{
<span class="linenr">11: </span>    <span style="color: #0072b2; font-weight: bold;">JTextField</span> <span style="color: #e69f00; font-weight: bold;">outgoing</span>;
<span class="linenr">12: </span>    <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span>;
<span class="linenr">13: </span>    <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span>;
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">16: </span>        <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Ludicrously Simple Chat Client"</span>);
<span class="linenr">17: </span>        <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr">18: </span>        outgoing = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextField</span>(20);
<span class="linenr">19: </span>        <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">sendButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Send"</span>);
<span class="linenr">20: </span>        sendButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SendButtonListener</span>());
<span class="linenr">21: </span>        mainPanel.add(outgoing);
<span class="linenr">22: </span>        mainPanel.add(sendButton);
<span class="linenr">23: </span>        frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr">24: </span>        setUpNetworking();
<span class="linenr">25: </span>        frame.setSize(400, 500);
<span class="linenr">26: </span>        frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">27: </span>
<span class="linenr">28: </span>    }
<span class="linenr">29: </span>
<span class="linenr">30: </span>    <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpNetworking</span>() {
<span class="linenr">31: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">32: </span>            sock = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Socket</span>(<span style="color: #848ea9;">"127.0.0.1"</span>, 5000);
<span class="linenr">33: </span>            writer = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PrintWriter</span>(sock.getOutputStream());
<span class="linenr">34: </span>            System.out.println(<span style="color: #848ea9;">"networking established"</span>);
<span class="linenr">35: </span>        }
<span class="linenr">36: </span>        <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">IOException</span> <span style="color: #e69f00; font-weight: bold;">ex</span>)
<span class="linenr">37: </span>        {
<span class="linenr">38: </span>            ex.printStackTrace();
<span class="linenr">39: </span>        }
<span class="linenr">40: </span>    }
<span class="linenr">41: </span>
<span class="linenr">42: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SendButtonListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">43: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr">44: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">45: </span>                writer.println(outgoing.getText());
<span class="linenr">46: </span>                writer.flush();
<span class="linenr">47: </span>
<span class="linenr">48: </span>            }
<span class="linenr">49: </span>            <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">50: </span>                ex.printStackTrace();
<span class="linenr">51: </span>            }
<span class="linenr">52: </span>            outgoing.setText(<span style="color: #848ea9;">""</span>);
<span class="linenr">53: </span>            outgoing.requestFocus();
<span class="linenr">54: </span>        }
<span class="linenr">55: </span>    }
<span class="linenr">56: </span>
<span class="linenr">57: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">58: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleChatClientA</span>().go();
<span class="linenr">59: </span>    }
<span class="linenr">60: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3169c70" class="outline-3">
<h3 id="org3169c70"><code>chap15/VerySimpleChatServer.java</code></h3>
<div class="outline-text-3" id="text-org3169c70">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">chap15</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">VerySimpleChatServer</span>
<span class="linenr"> 8: </span>{
<span class="linenr"> 9: </span>    <span style="color: #0072b2; font-weight: bold;">ArrayList</span> <span style="color: #e69f00; font-weight: bold;">clientOutputStreams</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ClientHandler</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span> {
<span class="linenr">12: </span>        <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span>;
<span class="linenr">13: </span>        <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span>;
<span class="linenr">14: </span>
<span class="linenr">15: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">ClientHandler</span>(<span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">clientSOcket</span>) {
<span class="linenr">16: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">17: </span>                sock = clientSOcket;
<span class="linenr">18: </span>                <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span> <span style="color: #e69f00; font-weight: bold;">isReader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">InputStreamReader</span>(sock.getInputStream());
<span class="linenr">19: </span>                reader = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(isReader);
<span class="linenr">20: </span>
<span class="linenr">21: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">22: </span>        }
<span class="linenr">23: </span>
<span class="linenr">24: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>() {
<span class="linenr">25: </span>            <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">message</span>;
<span class="linenr">26: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">27: </span>                <span style="color: #56b4e9; font-weight: bold;">while</span> ((message = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">28: </span>                    System.out.println(<span style="color: #848ea9;">"read "</span> + message);
<span class="linenr">29: </span>                    tellEveryone(message);
<span class="linenr">30: </span>                }
<span class="linenr">31: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">32: </span>        }
<span class="linenr">33: </span>    }
<span class="linenr">34: </span>
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">36: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">VerySimpleChatServer</span>().go();
<span class="linenr">37: </span>    }
<span class="linenr">38: </span>
<span class="linenr">39: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">40: </span>        clientOutputStreams = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>();
<span class="linenr">41: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">42: </span>            <span style="color: #0072b2; font-weight: bold;">ServerSocket</span> <span style="color: #e69f00; font-weight: bold;">serverSock</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ServerSocket</span>(5000);
<span class="linenr">43: </span>            <span style="color: #56b4e9; font-weight: bold;">while</span>(<span style="color: #d55e00; font-weight: bold;">true</span>) {
<span class="linenr">44: </span>                <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">clientSocket</span> = serverSock.accept();
<span class="linenr">45: </span>                <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PrintWriter</span>(clientSocket.getOutputStream());
<span class="linenr">46: </span>                clientOutputStreams.add(writer);
<span class="linenr">47: </span>
<span class="linenr">48: </span>                <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">t</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ClientHandler</span>(clientSocket));
<span class="linenr">49: </span>                t.start();
<span class="linenr">50: </span>                System.out.println(<span style="color: #848ea9;">"got a connection"</span>);
<span class="linenr">51: </span>            }
<span class="linenr">52: </span>        } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">53: </span>    }
<span class="linenr">54: </span>
<span class="linenr">55: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">tellEveryone</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">message</span>) {
<span class="linenr">56: </span>        <span style="color: #0072b2; font-weight: bold;">Iterator</span> <span style="color: #e69f00; font-weight: bold;">it</span> = clientOutputStreams.iterator();
<span class="linenr">57: </span>        <span style="color: #56b4e9; font-weight: bold;">while</span> (it.hasNext()) {
<span class="linenr">58: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">59: </span>                <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">writer</span> = (<span style="color: #0072b2; font-weight: bold;">PrintWriter</span>) it.next();
<span class="linenr">60: </span>                writer.println(message);
<span class="linenr">61: </span>                writer.flush();
<span class="linenr">62: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">63: </span>        }
<span class="linenr">64: </span>    }
<span class="linenr">65: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org64b0f87" class="outline-2">
<h2 id="org64b0f87">16 Data Structures: <i>collections and generics</i></h2>
<div class="outline-text-2" id="text-org64b0f87">
</div>
<div id="outline-container-orge8855d3" class="outline-3">
<h3 id="orge8855d3"><code>chap16/Jukebox1.java</code></h3>
<div class="outline-text-3" id="text-orge8855d3">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">File</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileReader</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Jukebox1</span> {
<span class="linenr">10: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">songList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt;();
<span class="linenr">11: </span>
<span class="linenr">12: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">13: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Jukebox1</span>().go();
<span class="linenr">14: </span>  }
<span class="linenr">15: </span>
<span class="linenr">16: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">17: </span>    getSongs();
<span class="linenr">18: </span>    System.out.println(songList);
<span class="linenr">19: </span>  }
<span class="linenr">20: </span>
<span class="linenr">21: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">22: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">getSongs</span>() {
<span class="linenr">23: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">24: </span>      <span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"SongList.txt"</span>);
<span class="linenr">25: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr">26: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">27: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">28: </span>        addSong(line);
<span class="linenr">29: </span>      }
<span class="linenr">30: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">31: </span>      ex.printStackTrace();
<span class="linenr">32: </span>    }
<span class="linenr">33: </span>  }
<span class="linenr">34: </span>
<span class="linenr">35: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">36: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">addSong</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr">37: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">tokens</span> = lineToParse.split(<span style="color: #848ea9;">"/"</span>);
<span class="linenr">38: </span>    songList.add(tokens[0]);
<span class="linenr">39: </span>  }
<span class="linenr">40: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9eeb054" class="outline-3">
<h3 id="org9eeb054"><code>chap16/Jukebox3.java</code></h3>
<div class="outline-text-3" id="text-org9eeb054">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">File</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileReader</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collections</span>;
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #848ea9;">/** . */</span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Jukebox3</span> {
<span class="linenr">11: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; <span style="color: #e69f00; font-weight: bold;">songList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt;();
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">14: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Jukebox3</span>().go();
<span class="linenr">15: </span>  }
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">18: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">19: </span>    getSongs();
<span class="linenr">20: </span>    System.out.println(songList);
<span class="linenr">21: </span>    Collections.sort(songList);
<span class="linenr">22: </span>    System.out.println(songList);
<span class="linenr">23: </span>  }
<span class="linenr">24: </span>
<span class="linenr">25: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">26: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">getSongs</span>() {
<span class="linenr">27: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">28: </span>      <span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"SongListMore.txt"</span>);
<span class="linenr">29: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr">30: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">31: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">32: </span>        addSong(line);
<span class="linenr">33: </span>      }
<span class="linenr">34: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">35: </span>      ex.printStackTrace();
<span class="linenr">36: </span>    }
<span class="linenr">37: </span>  }
<span class="linenr">38: </span>
<span class="linenr">39: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">40: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">addSong</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr">41: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">tokens</span> = lineToParse.split(<span style="color: #848ea9;">"/"</span>);
<span class="linenr">42: </span>    <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">nextSong</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Song</span>(tokens[0], tokens[1], tokens[2], tokens[3]);
<span class="linenr">43: </span>    songList.add(nextSong);
<span class="linenr">44: </span>  }
<span class="linenr">45: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e98357" class="outline-3">
<h3 id="org2e98357"><code>chap16/Jukebox5.java</code></h3>
<div class="outline-text-3" id="text-org2e98357">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">File</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileReader</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collections</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Comparator</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Jukebox5</span> {
<span class="linenr">11: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; <span style="color: #e69f00; font-weight: bold;">songList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt;();
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">14: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Jukebox5</span>().go();
<span class="linenr">15: </span>  }
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ArtistCompare</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Comparator</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; {
<span class="linenr">18: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">compare</span>(<span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">two</span>) {
<span class="linenr">19: </span>      <span style="color: #56b4e9; font-weight: bold;">return</span> one.getArtist().compareTo(two.getArtist());
<span class="linenr">20: </span>    }
<span class="linenr">21: </span>  }
<span class="linenr">22: </span>
<span class="linenr">23: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">24: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">25: </span>    getSongs();
<span class="linenr">26: </span>    System.out.println(songList);
<span class="linenr">27: </span>    Collections.sort(songList);
<span class="linenr">28: </span>    System.out.println(songList);
<span class="linenr">29: </span>
<span class="linenr">30: </span>    <span style="color: #0072b2; font-weight: bold;">ArtistCompare</span> <span style="color: #e69f00; font-weight: bold;">artistCompare</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArtistCompare</span>();
<span class="linenr">31: </span>    Collections.sort(songList, artistCompare);
<span class="linenr">32: </span>
<span class="linenr">33: </span>    System.out.println(songList);
<span class="linenr">34: </span>  }
<span class="linenr">35: </span>
<span class="linenr">36: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">getSongs</span>() {
<span class="linenr">37: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">38: </span>      <span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"SongListMore.txt"</span>);
<span class="linenr">39: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr">40: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">41: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">42: </span>        addSong(line);
<span class="linenr">43: </span>      }
<span class="linenr">44: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">45: </span>      ex.printStackTrace();
<span class="linenr">46: </span>    }
<span class="linenr">47: </span>  }
<span class="linenr">48: </span>
<span class="linenr">49: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">addSong</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr">50: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">tokens</span> = lineToParse.split(<span style="color: #848ea9;">"/"</span>);
<span class="linenr">51: </span>    <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">nextSong</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Song</span>(tokens[0], tokens[1], tokens[2], tokens[3]);
<span class="linenr">52: </span>    songList.add(nextSong);
<span class="linenr">53: </span>  }
<span class="linenr">54: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2caebec" class="outline-3">
<h3 id="org2caebec"><code>chap16/Jukebox6.java</code></h3>
<div class="outline-text-3" id="text-org2caebec">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">File</span>;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileReader</span>;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collection</span>;
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collections</span>;
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">HashSet</span>;
<span class="linenr"> 10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">List</span>;
<span class="linenr"> 11: </span>
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Jukebox6</span> {
<span class="linenr"> 13: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SongBad</span>&gt; <span style="color: #e69f00; font-weight: bold;">songList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">SongBad</span>&gt;();
<span class="linenr"> 14: </span>
<span class="linenr"> 15: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 16: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 17: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Jukebox6</span>().go();
<span class="linenr"> 18: </span>  }
<span class="linenr"> 19: </span>
<span class="linenr"> 20: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 21: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr"> 22: </span>    getSongs();
<span class="linenr"> 23: </span>    System.out.println(songList);
<span class="linenr"> 24: </span>    Collections.sort(songList);
<span class="linenr"> 25: </span>    System.out.println(songList);
<span class="linenr"> 26: </span>
<span class="linenr"> 27: </span>    <span style="color: #0072b2; font-weight: bold;">HashSet</span>&lt;<span style="color: #0072b2; font-weight: bold;">SongBad</span>&gt; <span style="color: #e69f00; font-weight: bold;">songSet</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">HashSet</span>&lt;<span style="color: #0072b2; font-weight: bold;">SongBad</span>&gt;();
<span class="linenr"> 28: </span>    songSet.addAll(songList);
<span class="linenr"> 29: </span>    System.out.println(songSet);
<span class="linenr"> 30: </span>  }
<span class="linenr"> 31: </span>
<span class="linenr"> 32: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 33: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">getSongs</span>() {
<span class="linenr"> 34: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 35: </span>      <span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"SongListMore.txt"</span>);
<span class="linenr"> 36: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr"> 37: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr"> 38: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr"> 39: </span>        addSong(line);
<span class="linenr"> 40: </span>      }
<span class="linenr"> 41: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr"> 42: </span>      ex.printStackTrace();
<span class="linenr"> 43: </span>    }
<span class="linenr"> 44: </span>  }
<span class="linenr"> 45: </span>
<span class="linenr"> 46: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 47: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">addSong</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr"> 48: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">tokens</span> = lineToParse.split(<span style="color: #848ea9;">"/"</span>);
<span class="linenr"> 49: </span>    <span style="color: #0072b2; font-weight: bold;">SongBad</span> <span style="color: #e69f00; font-weight: bold;">nextSong</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SongBad</span>(tokens[0], tokens[1], tokens[2], tokens[3]);
<span class="linenr"> 50: </span>    songList.add(nextSong);
<span class="linenr"> 51: </span>  }
<span class="linenr"> 52: </span>}
<span class="linenr"> 53: </span>
<span class="linenr"> 54: </span><span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 55: </span><span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">SongBad</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Comparable</span>&lt;<span style="color: #0072b2; font-weight: bold;">SongBad</span>&gt; {
<span class="linenr"> 56: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">title</span>;
<span class="linenr"> 57: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">artist</span>;
<span class="linenr"> 58: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">rating</span>;
<span class="linenr"> 59: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">bpm</span>;
<span class="linenr"> 60: </span>
<span class="linenr"> 61: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 62: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">SongBad</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">t</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">r</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">b</span>) {
<span class="linenr"> 63: </span>    title = t;
<span class="linenr"> 64: </span>    artist = a;
<span class="linenr"> 65: </span>    rating = r;
<span class="linenr"> 66: </span>    bpm = b;
<span class="linenr"> 67: </span>  }
<span class="linenr"> 68: </span>
<span class="linenr"> 69: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr"> 70: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #d55e00;">equals</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">aSong</span>) {
<span class="linenr"> 71: </span>    <span style="color: #0072b2; font-weight: bold;">SongBad</span> <span style="color: #e69f00; font-weight: bold;">s</span> = (<span style="color: #0072b2; font-weight: bold;">SongBad</span>) aSong;
<span class="linenr"> 72: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> getTitle().equals(s.getTitle());
<span class="linenr"> 73: </span>  }
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span>  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">leaving this out makes this a bad form of song.  Uncomment this</span>
<span class="linenr"> 76: </span>  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">to get rid of the duplicates</span>
<span class="linenr"> 77: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">hashCode</span>() {
<span class="linenr"> 78: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title.hashCode();
<span class="linenr"> 79: </span>  }
<span class="linenr"> 80: </span>
<span class="linenr"> 81: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">compareTo</span>(<span style="color: #0072b2; font-weight: bold;">SongBad</span> <span style="color: #e69f00; font-weight: bold;">s</span>) {
<span class="linenr"> 82: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title.compareTo(s.getTitle());
<span class="linenr"> 83: </span>  }
<span class="linenr"> 84: </span>
<span class="linenr"> 85: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getArtist</span>() {
<span class="linenr"> 86: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> artist;
<span class="linenr"> 87: </span>  }
<span class="linenr"> 88: </span>
<span class="linenr"> 89: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getBpm</span>() {
<span class="linenr"> 90: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> bpm;
<span class="linenr"> 91: </span>  }
<span class="linenr"> 92: </span>
<span class="linenr"> 93: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getRating</span>() {
<span class="linenr"> 94: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> rating;
<span class="linenr"> 95: </span>  }
<span class="linenr"> 96: </span>
<span class="linenr"> 97: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getTitle</span>() {
<span class="linenr"> 98: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title;
<span class="linenr"> 99: </span>  }
<span class="linenr">100: </span>
<span class="linenr">101: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">toString</span>() {
<span class="linenr">102: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title;
<span class="linenr">103: </span>  }
<span class="linenr">104: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a06859" class="outline-3">
<h3 id="org6a06859"><code>chap16/Jukebox8.java</code></h3>
<div class="outline-text-3" id="text-org6a06859">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">BufferedReader</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">File</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">FileReader</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">ArrayList</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collection</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Collections</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">List</span>;
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">TreeSet</span>;
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Jukebox8</span> {
<span class="linenr">13: </span>  <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; <span style="color: #e69f00; font-weight: bold;">songList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt;();
<span class="linenr">14: </span>
<span class="linenr">15: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">16: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Jukebox8</span>().go();
<span class="linenr">17: </span>  }
<span class="linenr">18: </span>
<span class="linenr">19: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">21: </span>    getSongs();
<span class="linenr">22: </span>    System.out.println(songList);
<span class="linenr">23: </span>    Collections.sort(songList);
<span class="linenr">24: </span>    System.out.println(songList);
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #0072b2; font-weight: bold;">TreeSet</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; <span style="color: #e69f00; font-weight: bold;">songSet</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">TreeSet</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt;();
<span class="linenr">27: </span>    songSet.addAll(songList);
<span class="linenr">28: </span>    System.out.println(songSet);
<span class="linenr">29: </span>  }
<span class="linenr">30: </span>
<span class="linenr">31: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">getSongs</span>() {
<span class="linenr">32: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">33: </span>      <span style="color: #0072b2; font-weight: bold;">File</span> <span style="color: #e69f00; font-weight: bold;">file</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">File</span>(<span style="color: #848ea9;">"SongListMore.txt"</span>);
<span class="linenr">34: </span>      <span style="color: #0072b2; font-weight: bold;">BufferedReader</span> <span style="color: #e69f00; font-weight: bold;">reader</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BufferedReader</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">FileReader</span>(file));
<span class="linenr">35: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">line</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">36: </span>      <span style="color: #56b4e9; font-weight: bold;">while</span> ((line = reader.readLine()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">37: </span>        addSong(line);
<span class="linenr">38: </span>      }
<span class="linenr">39: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">40: </span>      ex.printStackTrace();
<span class="linenr">41: </span>    }
<span class="linenr">42: </span>  }
<span class="linenr">43: </span>
<span class="linenr">44: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">addSong</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">lineToParse</span>) {
<span class="linenr">45: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">tokens</span> = lineToParse.split(<span style="color: #848ea9;">"/"</span>);
<span class="linenr">46: </span>    <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">nextSong</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Song</span>(tokens[0], tokens[1], tokens[2], tokens[3]);
<span class="linenr">47: </span>    songList.add(nextSong);
<span class="linenr">48: </span>  }
<span class="linenr">49: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e09699" class="outline-3">
<h3 id="org1e09699"><code>chap16/Song.java</code></h3>
<div class="outline-text-3" id="text-org1e09699">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap16;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Comparable</span>&lt;<span style="color: #0072b2; font-weight: bold;">Song</span>&gt; {
<span class="linenr"> 4: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">title</span>;
<span class="linenr"> 5: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">artist</span>;
<span class="linenr"> 6: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">rating</span>;
<span class="linenr"> 7: </span>  <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">bpm</span>;
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span style="color: #848ea9;">/** . */</span>
<span class="linenr">10: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">Song</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">t</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">a</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">r</span>, <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">b</span>) {
<span class="linenr">11: </span>    title = t;
<span class="linenr">12: </span>    artist = a;
<span class="linenr">13: </span>    rating = r;
<span class="linenr">14: </span>    bpm = b;
<span class="linenr">15: </span>  }
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #d55e00;">equals</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">aSong</span>) {
<span class="linenr">18: </span>    <span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">s</span> = (<span style="color: #0072b2; font-weight: bold;">Song</span>) aSong;
<span class="linenr">19: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> getTitle().equals(s.getTitle());
<span class="linenr">20: </span>  }
<span class="linenr">21: </span>
<span class="linenr">22: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">hashCode</span>() {
<span class="linenr">23: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title.hashCode();
<span class="linenr">24: </span>  }
<span class="linenr">25: </span>
<span class="linenr">26: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #d55e00;">compareTo</span>(<span style="color: #0072b2; font-weight: bold;">Song</span> <span style="color: #e69f00; font-weight: bold;">s</span>) {
<span class="linenr">27: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title.compareTo(s.getTitle());
<span class="linenr">28: </span>  }
<span class="linenr">29: </span>
<span class="linenr">30: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getArtist</span>() {
<span class="linenr">31: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> artist;
<span class="linenr">32: </span>  }
<span class="linenr">33: </span>
<span class="linenr">34: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getBpm</span>() {
<span class="linenr">35: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> bpm;
<span class="linenr">36: </span>  }
<span class="linenr">37: </span>
<span class="linenr">38: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getRating</span>() {
<span class="linenr">39: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> rating;
<span class="linenr">40: </span>  }
<span class="linenr">41: </span>
<span class="linenr">42: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">getTitle</span>() {
<span class="linenr">43: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title;
<span class="linenr">44: </span>  }
<span class="linenr">45: </span>
<span class="linenr">46: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">toString</span>() {
<span class="linenr">47: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> title;
<span class="linenr">48: </span>  }
<span class="linenr">49: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaeb72d4" class="outline-3">
<h3 id="orgaeb72d4"><code>SongList.txt</code></h3>
<div class="outline-text-3" id="text-orgaeb72d4">
<pre class="example">
Pink Moon/Nick Drake
Somersault/Zero 7
Shiva Moon/Prem Joshua
Circles/BT
Deep Channel/Afro Celts
Passenger/Headmix
Listen/Tahiti 80
</pre>
</div>
</div>

<div id="outline-container-orgf65b703" class="outline-3">
<h3 id="orgf65b703"><code>SongListMore.txt</code></h3>
<div class="outline-text-3" id="text-orgf65b703">
<pre class="example">
Pink Moon/Nick Drake/5/80
Somersault/Zero 7/4/84
Shiva Moon/Prem Joshua/6/120
Circles/BT/5/110
Deep Channel/Afro Celts/4/120
Passenger/Headmix/4/100
Listen/Tahiti 80/5/90
Listen/Tahiti 80/5/90
Listen/Tahiti 80/5/90
Circles/BT/5/110
</pre>
</div>
</div>
</div>
<div id="outline-container-orgafbc5ac" class="outline-2">
<h2 id="orgafbc5ac">17 Release Your Code: <i>packaging and deployment</i></h2>
<div class="outline-text-2" id="text-orgafbc5ac">
<ul class="org-ul">
<li>no code</li>
</ul>
</div>
</div>

<div id="outline-container-orgf9f795a" class="outline-2">
<h2 id="orgf9f795a">18 Distributed Computing: <i>RMI with a dash of servlets, EJB, and Jini</i></h2>
<div class="outline-text-2" id="text-orgf9f795a">
</div>
<div id="outline-container-orgd5d0979" class="outline-3">
<h3 id="orgd5d0979"><code>PhraseOMatic2.java</code></h3>
<div class="outline-text-3" id="text-orgd5d0979">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">PhraseOMatic2</span> {
<span class="linenr"> 3: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #d55e00;">makePhrase</span>() {
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make three sets of words to choose from</span>
<span class="linenr"> 6: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListOne</span> = {<span style="color: #848ea9;">"24/7"</span>,<span style="color: #848ea9;">"multi-Tier"</span>,<span style="color: #848ea9;">"30,000 foot"</span>,<span style="color: #848ea9;">"B-to-B"</span>,
<span class="linenr"> 7: </span>                            <span style="color: #848ea9;">"win-win"</span>,<span style="color: #848ea9;">"front-end"</span>, <span style="color: #848ea9;">"web-based"</span>,<span style="color: #848ea9;">"pervasive"</span>,
<span class="linenr"> 8: </span>                            <span style="color: #848ea9;">"smart"</span>, <span style="color: #848ea9;">"six-sigma"</span>,<span style="color: #848ea9;">"critical-path"</span>, <span style="color: #848ea9;">"dynamic"</span>};
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListTwo</span> = {<span style="color: #848ea9;">"empowered"</span>, <span style="color: #848ea9;">"sticky"</span>, <span style="color: #848ea9;">"valued-added"</span>, <span style="color: #848ea9;">"oriented"</span>,
<span class="linenr">11: </span>                            <span style="color: #848ea9;">"centric"</span>, <span style="color: #848ea9;">"distributed"</span>, <span style="color: #848ea9;">"clustered"</span>, <span style="color: #848ea9;">"branded"</span>,
<span class="linenr">12: </span>                            <span style="color: #848ea9;">"outside-the-box"</span>, <span style="color: #848ea9;">"positioned"</span>, <span style="color: #848ea9;">"networked"</span>,
<span class="linenr">13: </span>                            <span style="color: #848ea9;">"focused"</span>, <span style="color: #848ea9;">"leveraged"</span>, <span style="color: #848ea9;">"aligned"</span>, <span style="color: #848ea9;">"targeted"</span>,
<span class="linenr">14: </span>                            <span style="color: #848ea9;">"shared"</span>, <span style="color: #848ea9;">"cooperative"</span>, <span style="color: #848ea9;">"accelerated"</span>};
<span class="linenr">15: </span>
<span class="linenr">16: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">wordListThree</span> = {<span style="color: #848ea9;">"process"</span>, <span style="color: #848ea9;">"tipping point"</span>, <span style="color: #848ea9;">"solution"</span>,
<span class="linenr">17: </span>                              <span style="color: #848ea9;">"architecture"</span>, <span style="color: #848ea9;">"core competency"</span>, <span style="color: #848ea9;">"strategy"</span>,
<span class="linenr">18: </span>                              <span style="color: #848ea9;">"mindshare"</span>, <span style="color: #848ea9;">"portal"</span>, <span style="color: #848ea9;">"space"</span>, <span style="color: #848ea9;">"vision"</span>,
<span class="linenr">19: </span>                              <span style="color: #848ea9;">"paradigm"</span>, <span style="color: #848ea9;">"mission"</span>};
<span class="linenr">20: </span>
<span class="linenr">21: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">find out how many words are in each list</span>
<span class="linenr">22: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">oneLength</span> = wordListOne.length;
<span class="linenr">23: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">twoLength</span> = wordListTwo.length;
<span class="linenr">24: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">threeLength</span> = wordListThree.length;
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">generate three random numbers, to pull random words from each list</span>
<span class="linenr">27: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand1</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * oneLength);
<span class="linenr">28: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand2</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * twoLength);
<span class="linenr">29: </span>    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">rand3</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * threeLength);
<span class="linenr">30: </span>
<span class="linenr">31: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now build a phrase</span>
<span class="linenr">32: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">phrase</span> = wordListOne[rand1] + <span style="color: #848ea9;">" "</span> + wordListTwo[rand2] + <span style="color: #848ea9;">" "</span>
<span class="linenr">33: </span>        + wordListThree[rand3];
<span class="linenr">34: </span>
<span class="linenr">35: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now return it</span>
<span class="linenr">36: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> (<span style="color: #848ea9;">"What we need is a "</span> + phrase);
<span class="linenr">37: </span>  } 
<span class="linenr">38: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f57057" class="outline-3">
<h3 id="org1f57057"><code>KathyServlet.java</code></h3>
<div class="outline-text-3" id="text-org1f57057">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">IOException</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">PrintWriter</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">servlet</span>.<span style="color: #0072b2; font-weight: bold;">ServletException</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">servlet</span>.<span style="color: #d55e00; font-weight: bold;">http</span>.<span style="color: #0072b2; font-weight: bold;">HttpServlet</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">servlet</span>.<span style="color: #d55e00; font-weight: bold;">http</span>.<span style="color: #0072b2; font-weight: bold;">HttpServletRequest</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">servlet</span>.<span style="color: #d55e00; font-weight: bold;">http</span>.<span style="color: #0072b2; font-weight: bold;">HttpServletResponse</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">KathyServlet</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">HttpServlet</span> {
<span class="linenr">11: </span>
<span class="linenr">12: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">doGet</span>(<span style="color: #0072b2; font-weight: bold;">HttpServletRequest</span> <span style="color: #e69f00; font-weight: bold;">request</span>, <span style="color: #0072b2; font-weight: bold;">HttpServletResponse</span> <span style="color: #e69f00; font-weight: bold;">response</span>)
<span class="linenr">13: </span>      <span style="color: #56b4e9; font-weight: bold;">throws</span>  <span style="color: #0072b2; font-weight: bold;">ServletException</span>, <span style="color: #0072b2; font-weight: bold;">IOException</span> {
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #0072b2; font-weight: bold;">PrintWriter</span> <span style="color: #e69f00; font-weight: bold;">out</span>;
<span class="linenr">16: </span>    response.setContentType(<span style="color: #848ea9;">"text/html"</span>);
<span class="linenr">17: </span>    out = response.getWriter();
<span class="linenr">18: </span>    out.println(<span style="color: #848ea9;">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;"</span>);
<span class="linenr">19: </span>    out.println(<span style="color: #848ea9;">"PhraseOmatic"</span>);
<span class="linenr">20: </span>    out.println(<span style="color: #848ea9;">"&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;"</span>);
<span class="linenr">21: </span>    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">title</span> = <span style="color: #848ea9;">"PhraseOMatic has generated the following phrase."</span>;
<span class="linenr">22: </span>    out.println(<span style="color: #848ea9;">"&lt;H1&gt;"</span> + title + <span style="color: #848ea9;">"&lt;/H1&gt;"</span>);
<span class="linenr">23: </span>    out.println(<span style="color: #848ea9;">"&lt;P&gt;"</span> + PhraseOMatic2.makePhrase());
<span class="linenr">24: </span>    out.println(<span style="color: #848ea9;">"&lt;P&gt;&lt;a href=\"KathyServlet\"&gt;make another phrase&lt;/a&gt;&lt;/p&gt;"</span>);
<span class="linenr">25: </span>    out.println(<span style="color: #848ea9;">"&lt;/BODY&gt;&lt;/HTML&gt;"</span>);
<span class="linenr">26: </span>    out.close();
<span class="linenr">27: </span>  }
<span class="linenr">28: </span>
<span class="linenr">29: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org0790034" class="outline-3">
<h3 id="org0790034"><code>ServiceServer.java</code> (the remote interface)</h3>
<div class="outline-text-3" id="text-org0790034">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">Remote</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">RemoteException</span>;
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">interface</span> <span style="color: #0072b2; font-weight: bold;">ServiceServer</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Remote</span> {
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>  <span style="color: #0072b2; font-weight: bold;">Object</span>[] <span style="color: #d55e00;">getServiceList</span>() <span style="color: #56b4e9; font-weight: bold;">throws</span> <span style="color: #0072b2; font-weight: bold;">RemoteException</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>  <span style="color: #0072b2; font-weight: bold;">Service</span> <span style="color: #d55e00;">getService</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">serviceKey</span>) <span style="color: #56b4e9; font-weight: bold;">throws</span> <span style="color: #0072b2; font-weight: bold;">RemoteException</span>;
<span class="linenr">11: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-orged4184e" class="outline-3">
<h3 id="orged4184e"><code>Service.java</code> (what the GUI services implement)</h3>
<div class="outline-text-3" id="text-orged4184e">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.<span style="color: #0072b2; font-weight: bold;">Serializable</span>;
<span class="linenr">4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">interface</span> <span style="color: #0072b2; font-weight: bold;">Service</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">Serializable</span> {
<span class="linenr">7: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #d55e00;">getGuiPanel</span>();
<span class="linenr">8: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org9094326" class="outline-3">
<h3 id="org9094326"><code>ServiceServerImpl.java</code> (the remote implementation)</h3>
<div class="outline-text-3" id="text-org9094326">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">Naming</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">Remote</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">RemoteException</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #d55e00; font-weight: bold;">server</span>.<span style="color: #0072b2; font-weight: bold;">UnicastRemoteObject</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">HashMap</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Set</span>;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ServiceServerImpl</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">UnicastRemoteObject</span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ServiceServer</span> {
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #0072b2; font-weight: bold;">HashMap</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>, <span style="color: #0072b2; font-weight: bold;">Service</span>&gt; <span style="color: #e69f00; font-weight: bold;">serviceList</span>;
<span class="linenr">14: </span>
<span class="linenr">15: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">ServiceServerImpl</span>() <span style="color: #56b4e9; font-weight: bold;">throws</span> <span style="color: #0072b2; font-weight: bold;">RemoteException</span> {
<span class="linenr">16: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">start and set up services </span>
<span class="linenr">17: </span>    setUpServices();
<span class="linenr">18: </span>  }
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #56b4e9; font-weight: bold;">private</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpServices</span>() {
<span class="linenr">21: </span>    serviceList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">HashMap</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>, <span style="color: #0072b2; font-weight: bold;">Service</span>&gt;();
<span class="linenr">22: </span>    serviceList.put(<span style="color: #848ea9;">"Dice Rolling Service"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DiceService</span>());  
<span class="linenr">23: </span>    serviceList.put(<span style="color: #848ea9;">"Day of the Week Service"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DayOfTheWeekService</span>());  
<span class="linenr">24: </span>    serviceList.put(<span style="color: #848ea9;">"Visual Music Service"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MiniMusicService</span>());   
<span class="linenr">25: </span>  }
<span class="linenr">26: </span>
<span class="linenr">27: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">Object</span>[] <span style="color: #d55e00;">getServiceList</span>() {
<span class="linenr">28: </span>    System.out.println(<span style="color: #848ea9;">"in remote"</span>);
<span class="linenr">29: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> serviceList.keySet().toArray();
<span class="linenr">30: </span>  }
<span class="linenr">31: </span>
<span class="linenr">32: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">Service</span> <span style="color: #d55e00;">getService</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">serviceKey</span>) <span style="color: #56b4e9; font-weight: bold;">throws</span> <span style="color: #0072b2; font-weight: bold;">RemoteException</span> {        
<span class="linenr">33: </span>    <span style="color: #0072b2; font-weight: bold;">Service</span> <span style="color: #e69f00; font-weight: bold;">theService</span> = (<span style="color: #0072b2; font-weight: bold;">Service</span>) serviceList.get(serviceKey);       
<span class="linenr">34: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> theService;
<span class="linenr">35: </span>  }
<span class="linenr">36: </span>
<span class="linenr">37: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">38: </span>
<span class="linenr">39: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">40: </span>      Naming.rebind(<span style="color: #848ea9;">"ServiceServer"</span>, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ServiceServerImpl</span>());
<span class="linenr">41: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">42: </span>    }
<span class="linenr">43: </span>    System.out.println(<span style="color: #848ea9;">"Remote service is running"</span>);
<span class="linenr">44: </span>  }
<span class="linenr">45: </span>
<span class="linenr">46: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2bf5df9" class="outline-3">
<h3 id="org2bf5df9"><code>ServiceBrowser.java</code> (the client)</h3>
<div class="outline-text-3" id="text-org2bf5df9">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">BorderLayout</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Container</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.<span style="color: #0072b2; font-weight: bold;">Object</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">Naming</span>;
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">rmi</span>.<span style="color: #0072b2; font-weight: bold;">Remote</span>;
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JComboBox</span>;
<span class="linenr">12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JFrame</span>;
<span class="linenr">13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ServiceBrowser</span> {
<span class="linenr">16: </span>
<span class="linenr">17: </span>  <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span>;
<span class="linenr">18: </span>  <span style="color: #0072b2; font-weight: bold;">JComboBox</span> <span style="color: #e69f00; font-weight: bold;">serviceList</span>;
<span class="linenr">19: </span>  <span style="color: #0072b2; font-weight: bold;">ServiceServer</span> <span style="color: #e69f00; font-weight: bold;">server</span>;
<span class="linenr">20: </span>
<span class="linenr">21: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildGUI</span>() {
<span class="linenr">22: </span>    <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">frame</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"RMI Browser"</span>);
<span class="linenr">23: </span>    mainPanel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr">24: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr">25: </span>
<span class="linenr">26: </span>    <span style="color: #0072b2; font-weight: bold;">Object</span>[] <span style="color: #e69f00; font-weight: bold;">services</span> = getServicesList();
<span class="linenr">27: </span>
<span class="linenr">28: </span>    serviceList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JComboBox</span>(services);
<span class="linenr">29: </span>    frame.getContentPane().add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.NORTH, serviceList);
<span class="linenr">30: </span>
<span class="linenr">31: </span>    serviceList.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyListListener</span>());     
<span class="linenr">32: </span>
<span class="linenr">33: </span>    frame.setSize(500,500);
<span class="linenr">34: </span>    frame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">35: </span>
<span class="linenr">36: </span>  }
<span class="linenr">37: </span>
<span class="linenr">38: </span>  <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">loadService</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">serviceSelection</span>) {
<span class="linenr">39: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">40: </span>      <span style="color: #0072b2; font-weight: bold;">Service</span> <span style="color: #e69f00; font-weight: bold;">svc</span> = server.getService(serviceSelection);
<span class="linenr">41: </span>
<span class="linenr">42: </span>      mainPanel.removeAll();
<span class="linenr">43: </span>      mainPanel.add(svc.getGuiPanel());
<span class="linenr">44: </span>      mainPanel.validate();
<span class="linenr">45: </span>      mainPanel.repaint();
<span class="linenr">46: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">47: </span>      ex.printStackTrace();
<span class="linenr">48: </span>    }
<span class="linenr">49: </span>  }
<span class="linenr">50: </span>
<span class="linenr">51: </span>
<span class="linenr">52: </span>
<span class="linenr">53: </span>  <span style="color: #0072b2; font-weight: bold;">Object</span>[] <span style="color: #d55e00;">getServicesList</span>() {
<span class="linenr">54: </span>
<span class="linenr">55: </span>    <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">obj</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">56: </span>    <span style="color: #0072b2; font-weight: bold;">Object</span>[] <span style="color: #e69f00; font-weight: bold;">services</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">57: </span>
<span class="linenr">58: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">59: </span>      obj = Naming.lookup(<span style="color: #848ea9;">"rmi://127.0.0.1/ServiceServer"</span>);
<span class="linenr">60: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">61: </span>      ex.printStackTrace();
<span class="linenr">62: </span>    }
<span class="linenr">63: </span>    server = (<span style="color: #0072b2; font-weight: bold;">ServiceServer</span>) obj;
<span class="linenr">64: </span>
<span class="linenr">65: </span>
<span class="linenr">66: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">67: </span>      services = server.getServiceList();
<span class="linenr">68: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">69: </span>      ex.printStackTrace();
<span class="linenr">70: </span>    }
<span class="linenr">71: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> services;
<span class="linenr">72: </span>
<span class="linenr">73: </span>  }
<span class="linenr">74: </span>
<span class="linenr">75: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyListListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">76: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) { 
<span class="linenr">77: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">do things to get the selected service</span>
<span class="linenr">78: </span>      <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">selection</span> =  serviceList.getSelectedItem();
<span class="linenr">79: </span>      loadService(selection);
<span class="linenr">80: </span>    }
<span class="linenr">81: </span>  }
<span class="linenr">82: </span>
<span class="linenr">83: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">84: </span>    <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ServiceBrowser</span>().buildGUI();
<span class="linenr">85: </span>  }
<span class="linenr">86: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org466f2f5" class="outline-3">
<h3 id="org466f2f5"><code>DiceService.java</code> (a universal service, implements Service)</h3>
<div class="outline-text-3" id="text-org466f2f5">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JButton</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JComboBox</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JLabel</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DiceService</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Service</span> {
<span class="linenr">12: </span>
<span class="linenr">13: </span>  <span style="color: #0072b2; font-weight: bold;">JLabel</span> <span style="color: #e69f00; font-weight: bold;">label</span>;
<span class="linenr">14: </span>  <span style="color: #0072b2; font-weight: bold;">JComboBox</span> <span style="color: #e69f00; font-weight: bold;">numOfDice</span>;
<span class="linenr">15: </span>
<span class="linenr">16: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #d55e00;">getGuiPanel</span>() {
<span class="linenr">17: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">button</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Roll 'em!"</span>);
<span class="linenr">18: </span>    <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">choices</span> = {<span style="color: #848ea9;">"1"</span>, <span style="color: #848ea9;">"2"</span>, <span style="color: #848ea9;">"3"</span>, <span style="color: #848ea9;">"4"</span>, <span style="color: #848ea9;">"5"</span>};
<span class="linenr">19: </span>    numOfDice = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JComboBox</span>(choices);
<span class="linenr">20: </span>    label = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"dice values here"</span>);
<span class="linenr">21: </span>    button.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">RollEmListener</span>());
<span class="linenr">22: </span>    <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">panel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr">23: </span>    panel.add(numOfDice);
<span class="linenr">24: </span>    panel.add(button);
<span class="linenr">25: </span>    panel.add(label);
<span class="linenr">26: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> panel;
<span class="linenr">27: </span>  }
<span class="linenr">28: </span>
<span class="linenr">29: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">RollEmListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">30: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr">31: </span>      <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">roll the dice</span>
<span class="linenr">32: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">diceOutput</span> = <span style="color: #848ea9;">""</span>;
<span class="linenr">33: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">selection</span> = (<span style="color: #0072b2; font-weight: bold;">String</span>)  numOfDice.getSelectedItem();
<span class="linenr">34: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numOfDiceToRoll</span> = Integer.parseInt(selection);
<span class="linenr">35: </span>      <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; <span style="color: #0072b2; font-weight: bold;">numOfDiceToRoll</span>; i++) {
<span class="linenr">36: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">r</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 6) + 1);
<span class="linenr">37: </span>        diceOutput += (<span style="color: #848ea9;">" "</span> + r);
<span class="linenr">38: </span>      }
<span class="linenr">39: </span>      label.setText(diceOutput);
<span class="linenr">40: </span>    }
<span class="linenr">41: </span>  }
<span class="linenr">42: </span>
<span class="linenr">43: </span>}
</pre>
</div>
</div>
</div>

<div id="outline-container-org833e76d" class="outline-3">
<h3 id="org833e76d"><code>MiniMusicService.java</code> (a universal service, implements Service)</h3>
<div class="outline-text-3" id="text-org833e76d">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Color</span>;
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Dimension</span>;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics</span>;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Graphics2D</span>;
<span class="linenr">  8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr"> 10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.<span style="color: #0072b2; font-weight: bold;">Exception</span>;
<span class="linenr"> 11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.<span style="color: #0072b2; font-weight: bold;">Math</span>;
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.<span style="color: #0072b2; font-weight: bold;">Object</span>;
<span class="linenr"> 13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">lang</span>.<span style="color: #0072b2; font-weight: bold;">String</span>;
<span class="linenr"> 14: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ControllerEventListener</span>;
<span class="linenr"> 15: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiEvent</span>;
<span class="linenr"> 16: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiMessage</span>;
<span class="linenr"> 17: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">MidiSystem</span>;
<span class="linenr"> 18: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequence</span>;
<span class="linenr"> 19: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Sequencer</span>;
<span class="linenr"> 20: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">ShortMessage</span>;
<span class="linenr"> 21: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.<span style="color: #0072b2; font-weight: bold;">Track</span>;
<span class="linenr"> 22: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JButton</span>;
<span class="linenr"> 23: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr"> 24: </span>
<span class="linenr"> 25: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MiniMusicService</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Service</span> {
<span class="linenr"> 26: </span>
<span class="linenr"> 27: </span>  <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #e69f00; font-weight: bold;">myPanel</span>;
<span class="linenr"> 28: </span>
<span class="linenr"> 29: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #d55e00;">getGuiPanel</span>() {
<span class="linenr"> 30: </span>
<span class="linenr"> 31: </span>    <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr"> 32: </span>    myPanel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span>();
<span class="linenr"> 33: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">playItButton</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Play it"</span>);
<span class="linenr"> 34: </span>    playItButton.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">PlayItListener</span>());
<span class="linenr"> 35: </span>    mainPanel.add(myPanel);
<span class="linenr"> 36: </span>    mainPanel.add(playItButton);
<span class="linenr"> 37: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> mainPanel;
<span class="linenr"> 38: </span>  }
<span class="linenr"> 39: </span>
<span class="linenr"> 40: </span>
<span class="linenr"> 41: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">PlayItListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr"> 42: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr"> 43: </span>
<span class="linenr"> 44: </span>      <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 45: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make (and open) a sequencer, make a sequence and track</span>
<span class="linenr"> 46: </span>        <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span> = MidiSystem.getSequencer();         
<span class="linenr"> 47: </span>        sequencer.open();
<span class="linenr"> 48: </span>
<span class="linenr"> 49: </span>        sequencer.addControllerEventListener(myPanel, <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">int</span>[] {127});
<span class="linenr"> 50: </span>        <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">seq</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ, 4);
<span class="linenr"> 51: </span>        <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span> = seq.createTrack();     
<span class="linenr"> 52: </span>
<span class="linenr"> 53: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">now make two midi events (containing a midi message)</span>
<span class="linenr"> 54: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 100; i += 4) {
<span class="linenr"> 55: </span>          <span style="color: #0072b2; font-weight: bold;">int</span>  <span style="color: #e69f00; font-weight: bold;">rNum</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 50) + 1);
<span class="linenr"> 56: </span>          <span style="color: #56b4e9; font-weight: bold;">if</span> (rNum &lt; 38) {  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">so now only do it if num &lt;38 (75% of the time)</span>
<span class="linenr"> 57: </span>            track.add(makeEvent(144,1,rNum,100,i));
<span class="linenr"> 58: </span>            track.add(makeEvent(176,1,127,0,i));
<span class="linenr"> 59: </span>            track.add(makeEvent(128,1,rNum,100,i + 2));
<span class="linenr"> 60: </span>          }
<span class="linenr"> 61: </span>        } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end loop</span>
<span class="linenr"> 62: </span>
<span class="linenr"> 63: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the events to the track            </span>
<span class="linenr"> 64: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">add the sequence to the sequencer, set timing, and start</span>
<span class="linenr"> 65: </span>
<span class="linenr"> 66: </span>        sequencer.setSequence(seq);
<span class="linenr"> 67: </span>
<span class="linenr"> 68: </span>        sequencer.start();
<span class="linenr"> 69: </span>        sequencer.setTempoInBPM(220);
<span class="linenr"> 70: </span>      } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr"> 71: </span>        ex.printStackTrace();
<span class="linenr"> 72: </span>      }
<span class="linenr"> 73: </span>
<span class="linenr"> 74: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close actionperformed</span>
<span class="linenr"> 75: </span>  } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr"> 76: </span>
<span class="linenr"> 77: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #d55e00;">makeEvent</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comd</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">chan</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">two</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tick</span>) {
<span class="linenr"> 78: </span>    <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr"> 79: </span>    <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 80: </span>      <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr"> 81: </span>      a.setMessage(comd, chan, one, two);
<span class="linenr"> 82: </span>      event = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, tick);
<span class="linenr"> 83: </span>    } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {
<span class="linenr"> 84: </span>    }
<span class="linenr"> 85: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> event;
<span class="linenr"> 86: </span>  }
<span class="linenr"> 87: </span>
<span class="linenr"> 88: </span>  <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDrawPanel</span> <span style="color: #56b4e9; font-weight: bold;">extends</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ControllerEventListener</span> {
<span class="linenr"> 89: </span>
<span class="linenr"> 90: </span>    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">only if we got an event do we want to paint</span>
<span class="linenr"> 91: </span>    <span style="color: #0072b2; font-weight: bold;">boolean</span> <span style="color: #e69f00; font-weight: bold;">msg</span> = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr"> 92: </span>
<span class="linenr"> 93: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">controlChange</span>(<span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">event</span>) {
<span class="linenr"> 94: </span>      msg = <span style="color: #d55e00; font-weight: bold;">true</span>;       
<span class="linenr"> 95: </span>      repaint();         
<span class="linenr"> 96: </span>    }
<span class="linenr"> 97: </span>
<span class="linenr"> 98: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">Dimension</span> <span style="color: #d55e00;">getPreferredSize</span>() {
<span class="linenr"> 99: </span>      <span style="color: #56b4e9; font-weight: bold;">return</span> <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Dimension</span>(300,300);
<span class="linenr">100: </span>    }
<span class="linenr">101: </span>
<span class="linenr">102: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">paintComponent</span>(<span style="color: #0072b2; font-weight: bold;">Graphics</span> <span style="color: #e69f00; font-weight: bold;">g</span>) {
<span class="linenr">103: </span>      <span style="color: #56b4e9; font-weight: bold;">if</span> (msg) {
<span class="linenr">104: </span>
<span class="linenr">105: </span>        <span style="color: #0072b2; font-weight: bold;">Graphics2D</span> <span style="color: #e69f00; font-weight: bold;">g2</span> = (<span style="color: #0072b2; font-weight: bold;">Graphics2D</span>) g;
<span class="linenr">106: </span>
<span class="linenr">107: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">r</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">108: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">gr</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">109: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">b</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) (Math.random() * 250);
<span class="linenr">110: </span>
<span class="linenr">111: </span>        g.setColor(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Color</span>(r,gr,b));
<span class="linenr">112: </span>
<span class="linenr">113: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">ht</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 120) + 10);
<span class="linenr">114: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">width</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 120) + 10);
<span class="linenr">115: </span>
<span class="linenr">116: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">x</span> = (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 40) + 10);
<span class="linenr">117: </span>        <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">y</span> =  (<span style="color: #0072b2; font-weight: bold;">int</span>) ((Math.random() * 40) + 10);        
<span class="linenr">118: </span>
<span class="linenr">119: </span>        g.fillRect(x,y,ht, width);
<span class="linenr">120: </span>        msg = <span style="color: #d55e00; font-weight: bold;">false</span>;
<span class="linenr">121: </span>
<span class="linenr">122: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close if</span>
<span class="linenr">123: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">124: </span>  }  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">125: </span>
<span class="linenr">126: </span>} <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close class</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1689cc" class="outline-3">
<h3 id="orgf1689cc"><code>DayOfTheWeekService.java</code> (a universal service, implements Service)</h3>
<div class="outline-text-3" id="text-orgf1689cc">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">package chap18;</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">Component</span>;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">GridLayout</span>;
<span class="linenr"> 5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #0072b2; font-weight: bold;">LayoutManager</span>;
<span class="linenr"> 6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionEvent</span>;
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ActionListener</span>;
<span class="linenr"> 8: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">text</span>.<span style="color: #0072b2; font-weight: bold;">DateFormatSymbols</span>;
<span class="linenr"> 9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">text</span>.<span style="color: #0072b2; font-weight: bold;">SimpleDateFormat</span>;
<span class="linenr">10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Calendar</span>;
<span class="linenr">11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.<span style="color: #0072b2; font-weight: bold;">Date</span>;
<span class="linenr">12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JButton</span>;
<span class="linenr">13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JComboBox</span>;
<span class="linenr">14: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JLabel</span>;
<span class="linenr">15: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JPanel</span>;
<span class="linenr">16: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #0072b2; font-weight: bold;">JTextField</span>;
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DayOfTheWeekService</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Service</span> {
<span class="linenr">19: </span>
<span class="linenr">20: </span>  <span style="color: #0072b2; font-weight: bold;">JLabel</span> <span style="color: #e69f00; font-weight: bold;">outputLabel</span>;
<span class="linenr">21: </span>  <span style="color: #0072b2; font-weight: bold;">JComboBox</span> <span style="color: #e69f00; font-weight: bold;">month</span>;
<span class="linenr">22: </span>  <span style="color: #0072b2; font-weight: bold;">JTextField</span> <span style="color: #e69f00; font-weight: bold;">day</span>;
<span class="linenr">23: </span>  <span style="color: #0072b2; font-weight: bold;">JTextField</span> <span style="color: #e69f00; font-weight: bold;">year</span>;
<span class="linenr">24: </span>
<span class="linenr">25: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #d55e00;">getGuiPanel</span>() {
<span class="linenr">26: </span>
<span class="linenr">27: </span>    <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">button</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Do it!"</span>);
<span class="linenr">28: </span>    button.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DoItListener</span>());
<span class="linenr">29: </span>    outputLabel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"date appears here"</span>);
<span class="linenr">30: </span>
<span class="linenr">31: </span>    <span style="color: #0072b2; font-weight: bold;">DateFormatSymbols</span> <span style="color: #e69f00; font-weight: bold;">dateStuff</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">DateFormatSymbols</span>();      
<span class="linenr">32: </span>    month = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JComboBox</span>(dateStuff.getMonths());
<span class="linenr">33: </span>    day = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextField</span>(8);
<span class="linenr">34: </span>    year = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextField</span>(8);
<span class="linenr">35: </span>
<span class="linenr">36: </span>    <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">inputPanel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GridLayout</span>(3,2));
<span class="linenr">37: </span>    inputPanel.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"Month"</span>));
<span class="linenr">38: </span>    inputPanel.add(month);
<span class="linenr">39: </span>    inputPanel.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"Day"</span>));
<span class="linenr">40: </span>    inputPanel.add(day);
<span class="linenr">41: </span>    inputPanel.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JLabel</span>(<span style="color: #848ea9;">"Year"</span>));    
<span class="linenr">42: </span>    inputPanel.add(year);
<span class="linenr">43: </span>
<span class="linenr">44: </span>    <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">panel</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>();
<span class="linenr">45: </span>    panel.add(inputPanel);
<span class="linenr">46: </span>    panel.add(button);
<span class="linenr">47: </span>    panel.add(outputLabel);
<span class="linenr">48: </span>    <span style="color: #56b4e9; font-weight: bold;">return</span> panel;
<span class="linenr">49: </span>  }
<span class="linenr">50: </span>
<span class="linenr">51: </span>  <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">DoItListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">52: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">ev</span>) {
<span class="linenr">53: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">monthNum</span> = month.getSelectedIndex(); 
<span class="linenr">54: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">dayNum</span> = Integer.parseInt(day.getText());
<span class="linenr">55: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">yearNum</span> = Integer.parseInt(year.getText());
<span class="linenr">56: </span>      <span style="color: #0072b2; font-weight: bold;">Calendar</span> <span style="color: #e69f00; font-weight: bold;">c</span> = Calendar.getInstance();
<span class="linenr">57: </span>      c.set(<span style="color: #d55e00; font-weight: bold;">Calendar</span>.MONTH, monthNum);
<span class="linenr">58: </span>      c.set(<span style="color: #d55e00; font-weight: bold;">Calendar</span>.DAY_OF_MONTH, dayNum);
<span class="linenr">59: </span>      c.set(<span style="color: #d55e00; font-weight: bold;">Calendar</span>.YEAR, yearNum);
<span class="linenr">60: </span>      <span style="color: #0072b2; font-weight: bold;">Date</span> <span style="color: #e69f00; font-weight: bold;">date</span> = c.getTime();
<span class="linenr">61: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">dayOfWeek</span> = (<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">SimpleDateFormat</span>(<span style="color: #848ea9;">"EEEE"</span>)).format(date);
<span class="linenr">62: </span>      outputLabel.setText(dayOfWeek);
<span class="linenr">63: </span>
<span class="linenr">64: </span>
<span class="linenr">65: </span>    }
<span class="linenr">66: </span>  }
<span class="linenr">67: </span>
<span class="linenr">68: </span>}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org68c69b7" class="outline-2">
<h2 id="org68c69b7"><span class="todo TODO">TODO</span> A Appendix A: <i>Final code kitchen</i></h2>
<div class="outline-text-2" id="text-org68c69b7">
</div>
<div id="outline-container-org6e82ac8" class="outline-3">
<h3 id="org6e82ac8"><code>AppendixA/BeatBoxFinal.java</code></h3>
<div class="outline-text-3" id="text-org6e82ac8">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr">  1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">AppendixA</span>;
<span class="linenr">  2: </span><span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">chapter 14</span>
<span class="linenr">  3: </span>
<span class="linenr">  4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.*;
<span class="linenr">  5: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.*;
<span class="linenr">  6: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ListSelectionEvent</span>;
<span class="linenr">  7: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">swing</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.<span style="color: #0072b2; font-weight: bold;">ListSelectionListener</span>;
<span class="linenr">  8: </span>
<span class="linenr">  9: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 10: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">javax</span>.<span style="color: #d55e00; font-weight: bold;">sound</span>.<span style="color: #d55e00; font-weight: bold;">midi</span>.*;
<span class="linenr"> 11: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr"> 12: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">awt</span>.<span style="color: #d55e00; font-weight: bold;">event</span>.*;
<span class="linenr"> 13: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 14: </span>
<span class="linenr"> 15: </span>
<span class="linenr"> 16: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">BeatBoxFinal</span> {  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">implements MetaEventListener </span>
<span class="linenr"> 17: </span>
<span class="linenr"> 18: </span>      <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">mainPanel</span>;
<span class="linenr"> 19: </span>      <span style="color: #0072b2; font-weight: bold;">JList</span> <span style="color: #e69f00; font-weight: bold;">incomingList</span>;
<span class="linenr"> 20: </span>      <span style="color: #0072b2; font-weight: bold;">JTextField</span> <span style="color: #e69f00; font-weight: bold;">userMessage</span>;
<span class="linenr"> 21: </span>      <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt; <span style="color: #e69f00; font-weight: bold;">checkboxList</span>;
<span class="linenr"> 22: </span>      <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">nextNum</span>;
<span class="linenr"> 23: </span>      <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span> <span style="color: #e69f00; font-weight: bold;">in</span>;
<span class="linenr"> 24: </span>      <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">out</span>;
<span class="linenr"> 25: </span>      <span style="color: #0072b2; font-weight: bold;">Vector</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt; <span style="color: #e69f00; font-weight: bold;">listVector</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Vector</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>&gt;();
<span class="linenr"> 26: </span>      <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">userName</span> ;
<span class="linenr"> 27: </span>      <span style="color: #0072b2; font-weight: bold;">HashMap</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>, <span style="color: #0072b2; font-weight: bold;">boolean</span>[]&gt; <span style="color: #e69f00; font-weight: bold;">otherSeqsMap</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">HashMap</span>&lt;<span style="color: #0072b2; font-weight: bold;">String</span>, <span style="color: #0072b2; font-weight: bold;">boolean</span>[]&gt;();
<span class="linenr"> 28: </span>      <span style="color: #0072b2; font-weight: bold;">Sequencer</span> <span style="color: #e69f00; font-weight: bold;">sequencer</span>;
<span class="linenr"> 29: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">sequence</span>;
<span class="linenr"> 30: </span>      <span style="color: #0072b2; font-weight: bold;">Sequence</span> <span style="color: #e69f00; font-weight: bold;">mySequence</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr"> 31: </span>      <span style="color: #0072b2; font-weight: bold;">Track</span> <span style="color: #e69f00; font-weight: bold;">track</span>;
<span class="linenr"> 32: </span>      <span style="color: #0072b2; font-weight: bold;">JFrame</span> <span style="color: #e69f00; font-weight: bold;">theFrame</span>;
<span class="linenr"> 33: </span>
<span class="linenr"> 34: </span>      <span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">instrumentNames</span> = {<span style="color: #848ea9;">"Bass Drum"</span>, <span style="color: #848ea9;">"Closed Hi-Hat"</span>, 
<span class="linenr"> 35: </span>         <span style="color: #848ea9;">"Open Hi-Hat"</span>,<span style="color: #848ea9;">"Acoustic Snare"</span>, <span style="color: #848ea9;">"Crash Cymbal"</span>, <span style="color: #848ea9;">"Hand Clap"</span>, 
<span class="linenr"> 36: </span>         <span style="color: #848ea9;">"High Tom"</span>, <span style="color: #848ea9;">"Hi Bongo"</span>, <span style="color: #848ea9;">"Maracas"</span>, <span style="color: #848ea9;">"Whistle"</span>, <span style="color: #848ea9;">"Low Conga"</span>, 
<span class="linenr"> 37: </span>         <span style="color: #848ea9;">"Cowbell"</span>, <span style="color: #848ea9;">"Vibraslap"</span>, <span style="color: #848ea9;">"Low-mid Tom"</span>, <span style="color: #848ea9;">"High Agogo"</span>, 
<span class="linenr"> 38: </span>         <span style="color: #848ea9;">"Open Hi Conga"</span>};
<span class="linenr"> 39: </span>      <span style="color: #0072b2; font-weight: bold;">int</span>[] <span style="color: #e69f00; font-weight: bold;">instruments</span> = {35,42,46,38,49,39,50,60,70,72,64,56,58,47,67,63};
<span class="linenr"> 40: </span>
<span class="linenr"> 41: </span>
<span class="linenr"> 42: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span> (<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr"> 43: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BeatBoxFinal</span>().startUp(args[0]);
<span class="linenr"> 44: </span>      }
<span class="linenr"> 45: </span>
<span class="linenr"> 46: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">startUp</span>(<span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">name</span>) {
<span class="linenr"> 47: </span>          userName = name;
<span class="linenr"> 48: </span>          <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr"> 49: </span>              <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Socket</span>(<span style="color: #848ea9;">"127.0.0.1"</span>, 4242);
<span class="linenr"> 50: </span>              out = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>(sock.getOutputStream());
<span class="linenr"> 51: </span>              in = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>(sock.getInputStream());
<span class="linenr"> 52: </span>              <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">remote</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">RemoteReader</span>());
<span class="linenr"> 53: </span>              remote.start();
<span class="linenr"> 54: </span>          }
<span class="linenr"> 55: </span>          <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr"> 56: </span>              System.out.println(<span style="color: #848ea9;">"couldn't connect - you'll have to play alone."</span>);
<span class="linenr"> 57: </span>          }
<span class="linenr"> 58: </span>          setUpMidi();
<span class="linenr"> 59: </span>          buildGUI();
<span class="linenr"> 60: </span>      }
<span class="linenr"> 61: </span>
<span class="linenr"> 62: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildGUI</span>() {
<span class="linenr"> 63: </span>          theFrame = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JFrame</span>(<span style="color: #848ea9;">"Cyber BeatBox"</span>);
<span class="linenr"> 64: </span>          theFrame.setDefaultCloseOperation(<span style="color: #d55e00; font-weight: bold;">JFrame</span>.EXIT_ON_CLOSE);
<span class="linenr"> 65: </span>          <span style="color: #0072b2; font-weight: bold;">BorderLayout</span> <span style="color: #e69f00; font-weight: bold;">layout</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">BorderLayout</span>();
<span class="linenr"> 66: </span>          <span style="color: #0072b2; font-weight: bold;">JPanel</span> <span style="color: #e69f00; font-weight: bold;">background</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(layout);
<span class="linenr"> 67: </span>          background.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
<span class="linenr"> 68: </span>
<span class="linenr"> 69: </span>          checkboxList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>&gt;();
<span class="linenr"> 70: </span>          <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">buttonBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr"> 71: </span>
<span class="linenr"> 72: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">start</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Start"</span>);
<span class="linenr"> 73: </span>          start.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span>());
<span class="linenr"> 74: </span>          buttonBox.add(start);
<span class="linenr"> 75: </span>
<span class="linenr"> 76: </span>
<span class="linenr"> 77: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">stop</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Stop"</span>);
<span class="linenr"> 78: </span>          stop.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span>());
<span class="linenr"> 79: </span>          buttonBox.add(stop);
<span class="linenr"> 80: </span>
<span class="linenr"> 81: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">upTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Up"</span>);
<span class="linenr"> 82: </span>          upTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span>());
<span class="linenr"> 83: </span>          buttonBox.add(upTempo);
<span class="linenr"> 84: </span>
<span class="linenr"> 85: </span>           <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">downTempo</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Tempo Down"</span>);
<span class="linenr"> 86: </span>          downTempo.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span>());
<span class="linenr"> 87: </span>          buttonBox.add(downTempo);
<span class="linenr"> 88: </span>
<span class="linenr"> 89: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">sendIt</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"sendIt"</span>);
<span class="linenr"> 90: </span>          sendIt.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MySendListener</span>());
<span class="linenr"> 91: </span>          buttonBox.add(sendIt);
<span class="linenr"> 92: </span>
<span class="linenr"> 93: </span>
<span class="linenr"> 94: </span>          <span style="color: #0072b2; font-weight: bold;">JButton</span> <span style="color: #e69f00; font-weight: bold;">saveIt</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JButton</span>(<span style="color: #848ea9;">"Serialize It"</span>);  <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new button</span>
<span class="linenr"> 95: </span>          saveIt.addActionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MySendListener</span>());
<span class="linenr"> 96: </span>          buttonBox.add(saveIt);
<span class="linenr"> 97: </span>
<span class="linenr"> 98: </span>          userMessage = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JTextField</span>();
<span class="linenr"> 99: </span>          buttonBox.add(userMessage);
<span class="linenr">100: </span>
<span class="linenr">101: </span>          incomingList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JList</span>();
<span class="linenr">102: </span>          incomingList.addListSelectionListener(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MyListSelectionListener</span>());
<span class="linenr">103: </span>          incomingList.setSelectionMode(<span style="color: #d55e00; font-weight: bold;">ListSelectionModel</span>.SINGLE_SELECTION);
<span class="linenr">104: </span>          <span style="color: #0072b2; font-weight: bold;">JScrollPane</span> <span style="color: #e69f00; font-weight: bold;">theList</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JScrollPane</span>(incomingList);
<span class="linenr">105: </span>          buttonBox.add(theList);
<span class="linenr">106: </span>          incomingList.setListData(listVector);
<span class="linenr">107: </span>
<span class="linenr">108: </span>          <span style="color: #0072b2; font-weight: bold;">Box</span> <span style="color: #e69f00; font-weight: bold;">nameBox</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Box</span>(<span style="color: #d55e00; font-weight: bold;">BoxLayout</span>.Y_AXIS);
<span class="linenr">109: </span>          <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">110: </span>              nameBox.add(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Label</span>(instrumentNames[i]));
<span class="linenr">111: </span>          }
<span class="linenr">112: </span>
<span class="linenr">113: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.EAST, buttonBox);
<span class="linenr">114: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.WEST, nameBox);
<span class="linenr">115: </span>
<span class="linenr">116: </span>          theFrame.getContentPane().add(background);
<span class="linenr">117: </span>
<span class="linenr">118: </span>          <span style="color: #0072b2; font-weight: bold;">GridLayout</span> <span style="color: #e69f00; font-weight: bold;">grid</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">GridLayout</span>(16,16);
<span class="linenr">119: </span>          grid.setVgap(1);
<span class="linenr">120: </span>          grid.setHgap(2);
<span class="linenr">121: </span>          mainPanel = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JPanel</span>(grid);
<span class="linenr">122: </span>          background.add(<span style="color: #d55e00; font-weight: bold;">BorderLayout</span>.CENTER, mainPanel);
<span class="linenr">123: </span>
<span class="linenr">124: </span>
<span class="linenr">125: </span>          <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {                    
<span class="linenr">126: </span>                <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">c</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">JCheckBox</span>();
<span class="linenr">127: </span>                c.setSelected(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr">128: </span>                checkboxList.add(c);
<span class="linenr">129: </span>                mainPanel.add(c);            
<span class="linenr">130: </span>          } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">end loop</span>
<span class="linenr">131: </span>
<span class="linenr">132: </span>          theFrame.setBounds(50,50,300,300);
<span class="linenr">133: </span>          theFrame.pack();
<span class="linenr">134: </span>          theFrame.setVisible(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">135: </span>        } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">136: </span>
<span class="linenr">137: </span>
<span class="linenr">138: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">setUpMidi</span>() {
<span class="linenr">139: </span>       <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">140: </span>        sequencer = MidiSystem.getSequencer();
<span class="linenr">141: </span>        sequencer.open();
<span class="linenr">142: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">sequencer.addMetaEventListener(this);</span>
<span class="linenr">143: </span>        sequence = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Sequence</span>(<span style="color: #d55e00; font-weight: bold;">Sequence</span>.PPQ,4);
<span class="linenr">144: </span>        track = sequence.createTrack();
<span class="linenr">145: </span>        sequencer.setTempoInBPM(120);
<span class="linenr">146: </span>
<span class="linenr">147: </span>       } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {e.printStackTrace();}
<span class="linenr">148: </span>    } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">149: </span>
<span class="linenr">150: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">buildTrackAndStart</span>()
<span class="linenr">151: </span>    {
<span class="linenr">152: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">this will hold the instruments for each vertical column,</span>
<span class="linenr">153: </span>        <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">in other words, each tick (may have multiple instruments)</span>
<span class="linenr">154: </span>        <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Integer</span>&gt; <span style="color: #e69f00; font-weight: bold;">trackList</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">155: </span>
<span class="linenr">156: </span>        sequence.deleteTrack(track);
<span class="linenr">157: </span>        track = sequence.createTrack();
<span class="linenr">158: </span>
<span class="linenr">159: </span>
<span class="linenr">160: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++){
<span class="linenr">161: </span>            trackList = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Integer</span>&gt;();
<span class="linenr">162: </span>            <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">j</span> = 0; j &lt; 16; j++){
<span class="linenr">163: </span>                <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">jc</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(j + (16 * i));
<span class="linenr">164: </span>                <span style="color: #56b4e9; font-weight: bold;">if</span> (jc.isSelected()){
<span class="linenr">165: </span>                    <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">key</span> = instruments[i];
<span class="linenr">166: </span>                    trackList.add(key);
<span class="linenr">167: </span>                } 
<span class="linenr">168: </span>                <span style="color: #56b4e9; font-weight: bold;">else</span>
<span class="linenr">169: </span>                {
<span class="linenr">170: </span>                    trackList.add(<span style="color: #d55e00; font-weight: bold;">null</span>);
<span class="linenr">171: </span>                }
<span class="linenr">172: </span>            } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner</span>
<span class="linenr">173: </span>
<span class="linenr">174: </span>            makeTracks(trackList);
<span class="linenr">175: </span>        } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close outer</span>
<span class="linenr">176: </span>
<span class="linenr">177: </span>     track.add(makeEvent(192,9,1,0,15)); <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">- so we always go to full 16 beats</span>
<span class="linenr">178: </span>
<span class="linenr">179: </span>
<span class="linenr">180: </span>
<span class="linenr">181: </span>       <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">182: </span>
<span class="linenr">183: </span>           sequencer.setSequence(sequence);  
<span class="linenr">184: </span>           sequencer.setLoopCount(<span style="color: #d55e00; font-weight: bold;">sequencer</span>.LOOP_CONTINUOUSLY);                  
<span class="linenr">185: </span>           sequencer.start();
<span class="linenr">186: </span>           sequencer.setTempoInBPM(120);
<span class="linenr">187: </span>       } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) {e.printStackTrace();}
<span class="linenr">188: </span>
<span class="linenr">189: </span>      } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">190: </span>
<span class="linenr">191: </span><span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">============================================================== inner class listeners           </span>
<span class="linenr">192: </span>
<span class="linenr">193: </span>      <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStartListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">194: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">195: </span>             buildTrackAndStart();
<span class="linenr">196: </span>         }
<span class="linenr">197: </span>      }
<span class="linenr">198: </span>
<span class="linenr">199: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyStopListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">200: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">201: </span>           sequencer.stop();
<span class="linenr">202: </span>       }
<span class="linenr">203: </span>    }
<span class="linenr">204: </span>
<span class="linenr">205: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyUpTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">206: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">207: </span>            <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor();
<span class="linenr">208: </span>            sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * 1.03));
<span class="linenr">209: </span>       }
<span class="linenr">210: </span>    }
<span class="linenr">211: </span>
<span class="linenr">212: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyDownTempoListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {
<span class="linenr">213: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">214: </span>            <span style="color: #0072b2; font-weight: bold;">float</span> <span style="color: #e69f00; font-weight: bold;">tempoFactor</span> = sequencer.getTempoFactor();
<span class="linenr">215: </span>            sequencer.setTempoFactor((<span style="color: #0072b2; font-weight: bold;">float</span>)(tempoFactor * .97));
<span class="linenr">216: </span>        }
<span class="linenr">217: </span>    }
<span class="linenr">218: </span>
<span class="linenr">219: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MySendListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ActionListener</span> {    <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">new - save</span>
<span class="linenr">220: </span>       <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">actionPerformed</span>(<span style="color: #0072b2; font-weight: bold;">ActionEvent</span> <span style="color: #e69f00; font-weight: bold;">a</span>) {
<span class="linenr">221: </span>          <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">make an arraylist of just the STATE of the checkboxes</span>
<span class="linenr">222: </span>         <span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">checkboxState</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">boolean</span>[256];
<span class="linenr">223: </span>
<span class="linenr">224: </span>         <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {
<span class="linenr">225: </span>             <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">check</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(i);
<span class="linenr">226: </span>             <span style="color: #56b4e9; font-weight: bold;">if</span> (check.isSelected()) {
<span class="linenr">227: </span>                checkboxState[i] = <span style="color: #d55e00; font-weight: bold;">true</span>;
<span class="linenr">228: </span>             }
<span class="linenr">229: </span>          }
<span class="linenr">230: </span>
<span class="linenr">231: </span>         <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">232: </span>             out.writeObject(userName + nextNum++ + <span style="color: #848ea9;">": "</span> + userMessage.getText());
<span class="linenr">233: </span>            out.writeObject(checkboxState);
<span class="linenr">234: </span>         } <span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) {
<span class="linenr">235: </span>             ex.printStackTrace();
<span class="linenr">236: </span>             System.out.println(<span style="color: #848ea9;">"sorry dude. Could not send it to the server"</span>);
<span class="linenr">237: </span>         }
<span class="linenr">238: </span>
<span class="linenr">239: </span>       } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close method</span>
<span class="linenr">240: </span>     } <span style="color: #009e73; font-style: italic;">// </span><span style="color: #009e73; font-style: italic;">close inner class</span>
<span class="linenr">241: </span>
<span class="linenr">242: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MyListSelectionListener</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">ListSelectionListener</span> {
<span class="linenr">243: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">valueChanged</span>(<span style="color: #0072b2; font-weight: bold;">ListSelectionEvent</span> <span style="color: #e69f00; font-weight: bold;">le</span>) {
<span class="linenr">244: </span>            <span style="color: #56b4e9; font-weight: bold;">if</span> (!le.getValueIsAdjusting()) {
<span class="linenr">245: </span>                <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">selected</span> = (<span style="color: #0072b2; font-weight: bold;">String</span>) incomingList.getSelectedValue();
<span class="linenr">246: </span>                <span style="color: #56b4e9; font-weight: bold;">if</span> (selected != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">247: </span>                    <span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">selectedState</span> = (<span style="color: #0072b2; font-weight: bold;">boolean</span>[]) otherSeqsMap.get(selected);
<span class="linenr">248: </span>                    changeSequence(selectedState);
<span class="linenr">249: </span>                    sequencer.stop();
<span class="linenr">250: </span>                    buildTrackAndStart();
<span class="linenr">251: </span>                }
<span class="linenr">252: </span>            }
<span class="linenr">253: </span>        }
<span class="linenr">254: </span>    }
<span class="linenr">255: </span>
<span class="linenr">256: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">RemoteReader</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span> {
<span class="linenr">257: </span>        <span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">checkboxState</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">258: </span>        <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">nameToShow</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">259: </span>        <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">obj</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">260: </span>
<span class="linenr">261: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>() {
<span class="linenr">262: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">263: </span>                <span style="color: #56b4e9; font-weight: bold;">while</span> ((obj=in.readObject()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">264: </span>                    System.out.println(<span style="color: #848ea9;">"got an object from server"</span>);
<span class="linenr">265: </span>                    System.out.println(obj.getClass());
<span class="linenr">266: </span>                    <span style="color: #0072b2; font-weight: bold;">String</span> <span style="color: #e69f00; font-weight: bold;">nameToShow</span> = (<span style="color: #0072b2; font-weight: bold;">String</span>) obj;
<span class="linenr">267: </span>                    checkboxState = (<span style="color: #0072b2; font-weight: bold;">boolean</span>[]) in.readObject();
<span class="linenr">268: </span>                    otherSeqsMap.put(nameToShow, checkboxState);
<span class="linenr">269: </span>                    listVector.add(nameToShow);
<span class="linenr">270: </span>                    incomingList.setListData(listVector);
<span class="linenr">271: </span>                }
<span class="linenr">272: </span>            }<span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) { e.printStackTrace(); }
<span class="linenr">273: </span>        }
<span class="linenr">274: </span>    }
<span class="linenr">275: </span>
<span class="linenr">276: </span>
<span class="linenr">277: </span><span style="color: #009e73; font-style: italic;">//</span><span style="color: #009e73; font-style: italic;">==============================================================       </span>
<span class="linenr">278: </span>
<span class="linenr">279: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">changeSequence</span>(<span style="color: #0072b2; font-weight: bold;">boolean</span>[] <span style="color: #e69f00; font-weight: bold;">checkboxState</span>) {
<span class="linenr">280: </span>        <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 256; i++) {
<span class="linenr">281: </span>            <span style="color: #0072b2; font-weight: bold;">JCheckBox</span> <span style="color: #e69f00; font-weight: bold;">check</span> = (<span style="color: #0072b2; font-weight: bold;">JCheckBox</span>) checkboxList.get(i);
<span class="linenr">282: </span>            <span style="color: #56b4e9; font-weight: bold;">if</span> (checkboxState[i]) {
<span class="linenr">283: </span>                check.setSelected(<span style="color: #d55e00; font-weight: bold;">true</span>);
<span class="linenr">284: </span>            }
<span class="linenr">285: </span>            <span style="color: #56b4e9; font-weight: bold;">else</span>
<span class="linenr">286: </span>            {
<span class="linenr">287: </span>                check.setSelected(<span style="color: #d55e00; font-weight: bold;">false</span>);
<span class="linenr">288: </span>            }
<span class="linenr">289: </span>        }
<span class="linenr">290: </span>    }
<span class="linenr">291: </span>
<span class="linenr">292: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">makeTracks</span>(<span style="color: #0072b2; font-weight: bold;">ArrayList</span>&lt;<span style="color: #0072b2; font-weight: bold;">Integer</span>&gt; <span style="color: #e69f00; font-weight: bold;">list</span>) {
<span class="linenr">293: </span>         <span style="color: #0072b2; font-weight: bold;">Iterator</span> <span style="color: #e69f00; font-weight: bold;">it</span> = list.iterator();
<span class="linenr">294: </span>         <span style="color: #56b4e9; font-weight: bold;">for</span> (<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">i</span> = 0; i &lt; 16; i++) {
<span class="linenr">295: </span>             <span style="color: #0072b2; font-weight: bold;">Integer</span> <span style="color: #e69f00; font-weight: bold;">num</span> = (<span style="color: #0072b2; font-weight: bold;">Integer</span>) it.next();
<span class="linenr">296: </span>             <span style="color: #56b4e9; font-weight: bold;">if</span> (num != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">297: </span>                 <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">numKey</span> = num.intValue();
<span class="linenr">298: </span>                 track.add(makeEvent(144, 9, numKey, 100, i));
<span class="linenr">299: </span>                 track.add(makeEvent(128, 9, numKey, 100, i+1));
<span class="linenr">300: </span>             }
<span class="linenr">301: </span>         }
<span class="linenr">302: </span>      }
<span class="linenr">303: </span>
<span class="linenr">304: </span>
<span class="linenr">305: </span>
<span class="linenr">306: </span>     <span style="color: #56b4e9; font-weight: bold;">public</span>  <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #d55e00;">makeEvent</span>(<span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">comd</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">chan</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">two</span>, <span style="color: #0072b2; font-weight: bold;">int</span> <span style="color: #e69f00; font-weight: bold;">tick</span>) {
<span class="linenr">307: </span>          <span style="color: #0072b2; font-weight: bold;">MidiEvent</span> <span style="color: #e69f00; font-weight: bold;">event</span> = <span style="color: #d55e00; font-weight: bold;">null</span>;
<span class="linenr">308: </span>          <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">309: </span>            <span style="color: #0072b2; font-weight: bold;">ShortMessage</span> <span style="color: #e69f00; font-weight: bold;">a</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ShortMessage</span>();
<span class="linenr">310: </span>            a.setMessage(comd, chan, one, two);
<span class="linenr">311: </span>            event = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MidiEvent</span>(a, tick);
<span class="linenr">312: </span>
<span class="linenr">313: </span>            }<span style="color: #56b4e9; font-weight: bold;">catch</span>(<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">e</span>) { }
<span class="linenr">314: </span>          <span style="color: #56b4e9; font-weight: bold;">return</span> event;
<span class="linenr">315: </span>       }
<span class="linenr">316: </span>}
<span class="linenr">317: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcfc65a7" class="outline-3">
<h3 id="orgcfc65a7"><code>AppendixA/MusicServer.java</code></h3>
<div class="outline-text-3" id="text-orgcfc65a7">
<div class="org-src-container">
<pre class="src src-java"><span class="linenr"> 1: </span><span style="color: #56b4e9; font-weight: bold;">package</span> <span style="color: #d55e00; font-weight: bold;">AppendixA</span>;
<span class="linenr"> 2: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">io</span>.*;
<span class="linenr"> 3: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">net</span>.*;
<span class="linenr"> 4: </span><span style="color: #56b4e9; font-weight: bold;">import</span> <span style="color: #d55e00; font-weight: bold;">java</span>.<span style="color: #d55e00; font-weight: bold;">util</span>.*;
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">MusicServer</span>
<span class="linenr"> 8: </span>{
<span class="linenr"> 9: </span>    <span style="color: #0072b2; font-weight: bold;">ArrayList</span> <span style="color: #e69f00; font-weight: bold;">clientOutputStreams</span>;
<span class="linenr">10: </span>
<span class="linenr">11: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">static</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">main</span>(<span style="color: #0072b2; font-weight: bold;">String</span>[] <span style="color: #e69f00; font-weight: bold;">args</span>) {
<span class="linenr">12: </span>        <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">MusicServer</span>().go();
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>
<span class="linenr">15: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #56b4e9; font-weight: bold;">class</span> <span style="color: #0072b2; font-weight: bold;">ClientHandler</span> <span style="color: #56b4e9; font-weight: bold;">implements</span> <span style="color: #0072b2; font-weight: bold;">Runnable</span> {
<span class="linenr">16: </span>        <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span> <span style="color: #e69f00; font-weight: bold;">in</span>;
<span class="linenr">17: </span>        <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">sock</span>;
<span class="linenr">18: </span>
<span class="linenr">19: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #d55e00;">ClientHandler</span>(<span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">clientSOcket</span>) {
<span class="linenr">20: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">21: </span>                sock = clientSOcket;
<span class="linenr">22: </span>                in = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectInputStream</span>(sock.getInputStream());
<span class="linenr">23: </span>
<span class="linenr">24: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">25: </span>        }
<span class="linenr">26: </span>
<span class="linenr">27: </span>        <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">run</span>() {
<span class="linenr">28: </span>            <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">o1</span>;
<span class="linenr">29: </span>            <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">o2</span>;
<span class="linenr">30: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">31: </span>                <span style="color: #56b4e9; font-weight: bold;">while</span> ((o1 = in.readObject()) != <span style="color: #d55e00; font-weight: bold;">null</span>) {
<span class="linenr">32: </span>                    o2 = in.readObject();
<span class="linenr">33: </span>                    System.out.println(<span style="color: #848ea9;">"read two objects"</span>);
<span class="linenr">34: </span>                    tellEveryone(o1, o2);
<span class="linenr">35: </span>                }
<span class="linenr">36: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">37: </span>        }
<span class="linenr">38: </span>    }
<span class="linenr">39: </span>
<span class="linenr">40: </span>
<span class="linenr">41: </span>
<span class="linenr">42: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">go</span>() {
<span class="linenr">43: </span>        clientOutputStreams = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ArrayList</span>();
<span class="linenr">44: </span>        <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">45: </span>            <span style="color: #0072b2; font-weight: bold;">ServerSocket</span> <span style="color: #e69f00; font-weight: bold;">serverSock</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ServerSocket</span>(4242);
<span class="linenr">46: </span>            <span style="color: #56b4e9; font-weight: bold;">while</span>(<span style="color: #d55e00; font-weight: bold;">true</span>) {
<span class="linenr">47: </span>                <span style="color: #0072b2; font-weight: bold;">Socket</span> <span style="color: #e69f00; font-weight: bold;">clientSocket</span> = serverSock.accept();
<span class="linenr">48: </span>                <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">out</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>(clientSocket.getOutputStream());
<span class="linenr">49: </span>                clientOutputStreams.add(out);
<span class="linenr">50: </span>
<span class="linenr">51: </span>                <span style="color: #0072b2; font-weight: bold;">Thread</span> <span style="color: #e69f00; font-weight: bold;">t</span> = <span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">Thread</span>(<span style="color: #56b4e9; font-weight: bold;">new</span> <span style="color: #0072b2; font-weight: bold;">ClientHandler</span>(clientSocket));
<span class="linenr">52: </span>                t.start();
<span class="linenr">53: </span>                System.out.println(<span style="color: #848ea9;">"got a connection"</span>);
<span class="linenr">54: </span>            }
<span class="linenr">55: </span>        } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">56: </span>    }
<span class="linenr">57: </span>
<span class="linenr">58: </span>    <span style="color: #56b4e9; font-weight: bold;">public</span> <span style="color: #0072b2; font-weight: bold;">void</span> <span style="color: #d55e00;">tellEveryone</span>(<span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">one</span>, <span style="color: #0072b2; font-weight: bold;">Object</span> <span style="color: #e69f00; font-weight: bold;">two</span>) {
<span class="linenr">59: </span>        <span style="color: #0072b2; font-weight: bold;">Iterator</span> <span style="color: #e69f00; font-weight: bold;">it</span> = clientOutputStreams.iterator();
<span class="linenr">60: </span>        <span style="color: #56b4e9; font-weight: bold;">while</span> (it.hasNext()) {
<span class="linenr">61: </span>            <span style="color: #56b4e9; font-weight: bold;">try</span> {
<span class="linenr">62: </span>                <span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span> <span style="color: #e69f00; font-weight: bold;">out</span> = (<span style="color: #0072b2; font-weight: bold;">ObjectOutputStream</span>) it.next();
<span class="linenr">63: </span>                out.writeObject(one);
<span class="linenr">64: </span>                out.writeObject(two);
<span class="linenr">65: </span>            } <span style="color: #56b4e9; font-weight: bold;">catch</span> (<span style="color: #0072b2; font-weight: bold;">Exception</span> <span style="color: #e69f00; font-weight: bold;">ex</span>) { ex.printStackTrace(); }
<span class="linenr">66: </span>        }
<span class="linenr">67: </span>    }
<span class="linenr">68: </span>}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
